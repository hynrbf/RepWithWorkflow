import{j as fe,D as j,af as ge,C as Ce,G as P,I as be,am as Ae,aW as ye,A as I,aX as _e,aa as Ne,az as Re,Z as z,o as B,q as K,w as r,n as i,H as a,S as D,W as $,r as w,cO as he,ap as Le,x as U,P as De,y as Te,aj as Ve,L as Fe,a$ as Se,aJ as we,aK as Pe,aL as Ie,aM as Oe,Q as xe,aO as Me,O as Ee,aT as ke,aU as qe,bu as je}from"./index-9d6d511f.js";const ze={class:"text-right"},d=!1,Ke=fe({__name:"ARProviderFormModal",props:{provider:{},isEditMode:{type:Boolean},saving:{type:Boolean}},emits:["submit","requestToComplete"],setup(J,{emit:O}){const W=J,G=j.resolve(ge.name),{provider:e,isEditMode:T,saving:H}=Ce(W),V=P();let y=new Ve,F=P(!1),x=P(!1);const Q=j.resolve(be.name),X=Ae(),{changeLifeCycleName:M}=X;ye(()=>{M(I.pageLifeCycleNameCreated),se()}),_e(()=>{M(I.pageLifeCycleNameMounted)});const Z=()=>{var s,t;O("submit",{...(e==null?void 0:e.value)||{}}),(t=(s=V==null?void 0:V.value)==null?void 0:s.$el)==null||t.requestSubmit()},Y=()=>{O("requestToComplete",{...(e==null?void 0:e.value)||{}})},o=s=>`${I.arProvidersRoute}-arProviderFormModal${s}`.replace(/\s+/g,"").replace("/",""),ee=()=>{var s;(s=e==null?void 0:e.value)!=null&&s.details&&(e.value.details.isTradingSameAsRegisteredAddress=!e.value.details.isTradingSameAsRegisteredAddress,e.value.details.isTradingSameAsRegisteredAddress?e.value.details.tradingAddress=e.value.details.registeredAddress??"":e.value.details.tradingAddress="")},ae=async s=>{var c;const t=await G.getFirmPraStatusAsync(s);F.value=t,(c=e==null?void 0:e.value)!=null&&c.details&&(e.value.details.praAuthorised=t)},te=s=>{var t;F.value=s,(t=e==null?void 0:e.value)!=null&&t.details&&(e.value.details.praAuthorised=s)},se=()=>{var s;(s=e==null?void 0:e.value)!=null&&s.details&&(y.firmName=e.value.details.name,y.companyNumber=e.value.details.companyNumber,y.firmReferenceNumber=e.value.details.fcaFirmRefNo,T.value&&(F.value=e.value.details.praAuthorised??!1))},ie=async s=>{var t,c;(t=e==null?void 0:e.value)!=null&&t.details&&(e.value.details.name=s.firmName,e.value.details.companyNumber=s.companyNumber,e.value.details.fcaFirmRefNo=s.firmReferenceNumber,e.value.details.registeredAddress=s.address,e.value.details.tradingAddress=s.tradingAddress,e.value.details.website=s.website,e.value.details.contactNumber={country:"GB",countryCode:"",dialCode:"+44",number:(c=s.contactNumber)==null?void 0:c.replace("+44","")},y=s,x.value=!0,await ae(e.value.details.fcaFirmRefNo??""))},le=Ne(()=>Re(()=>import("./KendoFirmFinderComponent-9a5bf623.js"),["assets/KendoFirmFinderComponent-9a5bf623.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/KendoFirmFinderComponent-d11737a3.css"])),ne=z(()=>{var s;return(s=e==null?void 0:e.value)!=null&&s.details?e.value.details.name&&e.value.details.companyNumber&&e.value.details.fcaFirmRefNo&&e.value.details.emailAddress&&Q.checkIfEmailFormatIsValid(e.value.details.emailAddress):!1}),re=z(()=>{var s,t;return(s=e==null?void 0:e.value)!=null&&s.details&&((t=e==null?void 0:e.value)!=null&&t.representative)?e.value.details.name&&e.value.details.companyNumber&&e.value.details.fcaFirmRefNo&&e.value.details.registeredAddress&&e.value.details.tradingAddress&&e.value.details.emailAddress&&e.value.details.contactNumber&&e.value.representative.forename&&e.value.representative.surname&&e.value.representative.emailAddress&&e.value.representative.contactNumber&&e.value.representative.jobTitle:!1});return(s,t)=>{const c=Fe,oe=Se,de=we,ue=Pe,E=Ie,k=Oe,S=xe,me=Me,q=Ee,pe=ke,ve=qe,ce=je;return B(),K(ce,{class:"ModalFlexible",title:`${a(T)?"Edit":"Add New Provider"}`,"close-icon":!1},{default:r(()=>[i(ve,null,{default:r(()=>[i(pe,{ref_key:"formElement",ref:V},{default:r(()=>[i(a(D),{orientation:"vertical",gap:15,class:"col-md-12"},{default:r(()=>[i($,null,{default:r(()=>{var u,m,f,g,C,b,n,l;return[i(c,{class:"flex-grow-1 section-title k-color-primary"},{default:r(()=>[w("Provider Details")]),_:1}),i(a(D),{orientation:"horizontal",align:{horizontal:"stretch"},style:{gap:"15px",display:"flex"}},{default:r(()=>{var v,p,_,N,R,h;return[i(a(le),{id:o("-provider.firmFinder"),companyNameLabel:"Provider Name",company:a(y),companyName:(p=(v=a(e))==null?void 0:v.details)==null?void 0:p.name,companyNumber:(N=(_=a(e))==null?void 0:_.details)==null?void 0:N.companyNumber,firmReferenceNumber:(h=(R=a(e))==null?void 0:R.details)==null?void 0:h.fcaFirmRefNo,onOnCompanyDetailUpdated:ie,mode:a(he).FromCompanyHouse,onboardingType:a(Le).Ar.toString(),isInitializing:d},null,8,["id","company","companyName","companyNumber","firmReferenceNumber","mode","onboardingType"]),i(oe,{id:o("-providerIntroducerDetails.praAuthorised"),label:"PRA Authorised",class:"flex-grow-0",value:a(F),isSwitchAdjustMarginTop:a(x),name:"providerIntroducerDetails.praAuthorised",isRequired:!0,onOnValueChange:te,isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isSwitchAdjustMarginTop","name","isDataLoadedCompletely"])]}),_:1}),i(de,{id:o("-provider.details.registeredAddress"),name:"provider.details.registeredAddress",class:"mt-2",label:"Registered Address",onOnValueChange:t[0]||(t[0]=v=>{var p;(p=a(e))!=null&&p.details&&(a(e).details.registeredAddress=v)}),value:(m=(u=a(e))==null?void 0:u.details)==null?void 0:m.registeredAddress,isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","name","value","isDataLoadedCompletely"]),i(ue,{id:o("-provider.details.tradingAddress"),name:"provider.details.tradingAddress",label:"Trading Address",isUserModified:(g=(f=a(e))==null?void 0:f.details)==null?void 0:g.isTradingSameAsRegisteredAddress,value:(b=(C=a(e))==null?void 0:C.details)==null?void 0:b.tradingAddress,isChecked:(l=(n=a(e))==null?void 0:n.details)==null?void 0:l.isTradingSameAsRegisteredAddress,onOnValueChange:t[1]||(t[1]=v=>{var p;(p=a(e))!=null&&p.details&&(a(e).details.tradingAddress=v)}),onOnToggle:t[2]||(t[2]=v=>ee()),sameAsLabel:s.$t("same-as-registered-address"),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","name","isUserModified","value","isChecked","sameAsLabel","isDataLoadedCompletely"]),i(a(D),{orientation:"horizontal",align:{horizontal:"stretch"},style:{gap:"15px"}},{default:r(()=>{var v,p,_,N,R,h;return[i(E,{id:o("-provider.emailAddress"),label:"Email Address",name:"details.emailAddress",value:(p=(v=a(e))==null?void 0:v.details)==null?void 0:p.emailAddress,onOnValueChange:t[3]||(t[3]=L=>{var A;(A=a(e))!=null&&A.details&&(a(e).details.emailAddress=L)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"]),i(k,{id:o("-provider.contactNumber"),label:"Contact Number",name:"details.contactNumber",value:(N=(_=a(e))==null?void 0:_.details)==null?void 0:N.contactNumber,onOnValueChange:t[4]||(t[4]=L=>{var A;(A=a(e))!=null&&A.details&&(a(e).details.contactNumber=L)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"]),i(S,{id:o("-provider.website"),label:"Website",name:"details.website",placeholder:"www.domain.com",isRequired:!1,value:(h=(R=a(e))==null?void 0:R.details)==null?void 0:h.website,onOnValueChange:t[5]||(t[5]=L=>{var A;(A=a(e))!=null&&A.details&&(a(e).details.website=L)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"])]}),_:1})]}),_:1}),i($,null,{default:r(()=>[i(c,{class:"flex-grow-1 section-title k-color-primary"},{default:r(()=>{var u,m;return[w(U((m=(u=a(e))==null?void 0:u.details)==null?void 0:m.name)+" Representative Details",1)]}),_:1}),i(a(D),{class:"my-3",orientation:"horizontal",align:{horizontal:"stretch"},style:{gap:"15px"}},{default:r(()=>{var u,m,f,g,C,b;return[i(me,{id:o("-provider.title"),label:"Title",name:"representative.title",isRequired:!1,value:(m=(u=a(e))==null?void 0:u.representative)==null?void 0:m.title,onOnValueChange:t[6]||(t[6]=n=>{var l;(l=a(e))!=null&&l.representative&&(a(e).representative.title=n)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"]),i(S,{id:o("-representative.forename"),label:"Forename(s)",name:"representative.forename",placeholder:"John",value:(g=(f=a(e))==null?void 0:f.representative)==null?void 0:g.forename,onOnValueChange:t[7]||(t[7]=n=>{var l;(l=a(e))!=null&&l.representative&&(a(e).representative.forename=n)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"]),i(S,{id:o("-representative.surname"),label:"Surname",name:"representative.surname",placeholder:"Doe",value:(b=(C=a(e))==null?void 0:C.representative)==null?void 0:b.surname,onOnValueChange:t[8]||(t[8]=n=>{var l;(l=a(e))!=null&&l.representative&&(a(e).representative.surname=n)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"])]}),_:1}),i(a(D),{orientation:"horizontal",align:{horizontal:"stretch"},style:{gap:"15px"}},{default:r(()=>{var u,m,f,g,C,b;return[i(E,{id:o("-representative.emailAddress"),label:"Email Address",name:"representative.emailAddress",value:(m=(u=a(e))==null?void 0:u.representative)==null?void 0:m.emailAddress,onOnValueChange:t[9]||(t[9]=n=>{var l;(l=a(e))!=null&&l.representative&&(a(e).representative.emailAddress=n)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"]),i(k,{id:o("-representative.contactNumber"),label:"Contact Number",name:"representative.contactNumber",value:(g=(f=a(e))==null?void 0:f.representative)==null?void 0:g.contactNumber,onOnValueChange:t[10]||(t[10]=n=>{var l;(l=a(e))!=null&&l.representative&&(a(e).representative.contactNumber=n)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"]),i(S,{id:o("-representative.jobTitle"),label:"Job Title",name:"representative.jobTitle",placeholder:"Job Title",value:(b=(C=a(e))==null?void 0:C.representative)==null?void 0:b.jobTitle,onOnValueChange:t[11]||(t[11]=n=>{var l;(l=a(e))!=null&&l.representative&&(a(e).representative.jobTitle=n)}),isValueReactive:!0,isDataLoadedCompletely:!d},null,8,["id","value","isDataLoadedCompletely"])]}),_:1})]),_:1}),De("div",ze,[a(T)?Te("",!0):(B(),K(q,{key:0,style:{"margin-right":"10px","font-weight":"600"},type:"button","theme-color":"primary",onClick:Y,"fill-mode":"outline",disabled:!re.value},{default:r(()=>[w(" Request Provider to Complete Details ")]),_:1},8,["disabled"])),i(q,{type:"button","theme-color":"primary",onClick:Z,disabled:!ne.value||a(H)},{default:r(()=>[w(U(a(T)?"Save Changes":"Save & Add Provider"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["title"])}}});export{Ke as default};
