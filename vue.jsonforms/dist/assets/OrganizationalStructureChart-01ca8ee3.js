import{j as S,_ as z,aA as R,o as c,m as d,n as g,w as b,P as l,a0 as v,x as u,J as y,K as L,bp as O}from"./index-9d6d511f.js";import{s as k}from"./organizationchart.esm-8c183601.js";const N=S({name:"OrganizationalStructureChart",props:{employeesValues:{type:Object,default:[]}},data(){return{employees:this.employeesValues,selection:{}}},components:{OrganizationChart:k},computed:{transformedData(){const e=["Director (SMF3)".toLowerCase(),"Director (SMF16)".toLowerCase()];this.employees.forEach(o=>{var a,s;return o.isRoot=e==null?void 0:e.includes(((s=(a=o.primaryRole)==null?void 0:a.name)==null?void 0:s.toLowerCase())??"")});const t=this.employees.filter(o=>o.isRoot),n=[];for(const o of t)n.push(this.mapEmployeeToOrganizationChartNode(o));return{key:"absolute-root",styleClass:"absolute-root",type:"",data:{},children:n}},unAssignedEmployees(){const e=this.employees.filter(n=>!n.lineManager&&!n.isRoot),t=[];for(const n of e)t.push(this.mapEmployeeToOrganizationChartNode(n));return t}},mounted(){this.setupChartLineStylesForMultipleRoot()},updated(){document.querySelectorAll("tr.p-organizationchart-lines").forEach(function(t){const n=t;if(!n)return;window.getComputedStyle(n).visibility==="hidden"?n.classList.add("hide-all-child"):n.classList.remove("hide-all-child")})},methods:{mapEmployeeToOrganizationChartNode(e){var n;let t="";return e.title&&(t+=`${e.title} `),e.firstName&&(t+=`${e.firstName} `),e.lastName&&(t+=e.lastName),{key:e.id,type:"person",data:{image:"https://primefaces.org/cdn/primevue/images/avatar/amyelsner.png",name:t,role:(n=e.primaryRole)==null?void 0:n.name,status:e.employmentStatus},styleClass:e.employmentStatus,children:this.employees.filter(o=>{var a;return((a=o.lineManager)==null?void 0:a.id)===e.id}).map(o=>this.mapEmployeeToOrganizationChartNode(o))}},setupChartLineStylesForMultipleRoot(){var o,a;let e=document.querySelector(".p-organizationchart-table:has(.absolute-root)");if(!e)return;const t=(a=(o=e.children[0])==null?void 0:o.children[3])==null?void 0:a.children;if(!t)return;const n=Array.from(t);for(const s of n)s&&this.setLinesStyleRecursive(s)},setLinesStyleRecursive(e){var h,m,r,p;const t=e.querySelector(".p-organizationchart-table");if(!t)return;const n=(m=(h=t.children[0])==null?void 0:h.children[3])==null?void 0:m.children;if(!(n!=null&&n.length))return;const o=Array.from(n);if(!o)return;const a=(p=(r=t.children[0])==null?void 0:r.children[2])==null?void 0:p.children;if(!(a!=null&&a.length))return;let s=0;for(const i of o){const _=i.querySelector(".p-organizationchart-table .node-content");if(!_)continue;const C=Array.from(_.classList).filter(f=>f!=="node-content")[0];if(a.length<2){const f=a[s].children[0];f.style.background=this.getStatusColor(C),f.style.width="1px";continue}this.setLineStyle(s,a[s],a[s+1],C,a.length),s+=2}for(const i of o)i&&this.setLinesStyleRecursive(i)},setLineStyle(e,t,n,o,a){const s=this.getStatusColor(o);t.style.borderRightColor=s,e>0&&(t.style.borderTopColor=s),e<a-2&&(n.style.borderColor=`${s} transparent transparent transparent`)},getStatusColor(e){return e==="Active"?"var(--color-success-600)":e==="Onboarding"?"var(--color-warning-600)":"var(--color-error-600)"},formatRole(e,t){return e.length>t?e.substring(0,t)+"...":e}}});const E={class:"d-flex flex-column"},w=["alt","src"],x={class:"node-name"},$={class:"node-role is-clickable"},A={key:1,class:"node-role"},M=l("label",{class:"unassigned-text"},"Unassigned",-1),T={class:"orphans-section"},D=["alt","src"],F={class:"node-name"},q={class:"node-role is-clickable"},K={key:1,class:"node-role"};function V(e,t,n,o,a,s){const h=O,m=R("OrganizationChart");return c(),d("div",E,[g(m,{selectionKeys:e.selection,"onUpdate:selectionKeys":t[0]||(t[0]=r=>e.selection=r),value:e.transformedData,collapsible:"",selectionMode:"multiple"},{person:b(r=>[l("div",{class:v(["node-content",`${r.node.data.status}`])},[l("img",{alt:r.node.data.name,src:r.node.data.image,class:"node-avatar"},null,8,w),l("span",x,u(r.node.data.name),1),r.node.data.role.length>20?(c(),d(y,{key:0},[l("span",$,u(e.formatRole(r.node.data.role,20)),1),g(h,{text:r.node.data.role,class:"node-role-tooltip is-zindex-base"},null,8,["text"])],64)):(c(),d("span",A,u(r.node.data.role),1))],2)]),_:1},8,["selectionKeys","value"]),M,l("div",T,[(c(!0),d(y,null,L(e.unAssignedEmployees,(r,p)=>(c(),d("div",{class:"my-2",key:p},[g(m,{value:r},{person:b(i=>[l("div",{class:v(["node-content",`${i.node.data.status}`])},[l("img",{alt:i.node.data.name,src:i.node.data.image,class:"node-avatar"},null,8,D),l("span",F,u(i.node.data.name),1),i.node.data.role.length>20?(c(),d(y,{key:0},[l("span",q,u(e.formatRole(i.node.data.role,20)),1),g(h,{text:i.node.data.role,class:"node-role-tooltip is-zindex-base"},null,8,["text"])],64)):(c(),d("span",K,u(i.node.data.role),1))],2)]),_:2},1032,["value"])]))),128))])])}const U=z(N,[["render",V]]);export{U as default};
