import{bb as K,aV as p,b1 as y,bd as N,D as j,bC as ee,j as te,aa as h,bc as T,l as ie,bD as oe,I as ne,A as f,b3 as I,a3 as ae,am as re,bl as se,b4 as D,b6 as k,au as _,av as V,as as G,at as le,az as v,aA as b,o as S,m as de,n as d,w as c,P as r,x as P,r as M,q as w,y as L,J as ce,aC as ue,aG as me,aH as pe,b9 as ge,a5 as he,a6 as fe,_ as ve}from"./index-9d6d511f.js";import{F as m,g as Pe,M as Ae,a as be,_ as Me,b as ye,c as Oe}from"./MediaLabelComponent-feae136c.js";import{_ as ke}from"./GridCardTable-248623f7.js";import{_ as Se}from"./StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js";import{_ as Te}from"./DateTimeComponent-2c5db54c.js";const z=K("arMediaMarketingOutletStore",{state:()=>({mediaMarketingOutlet:void 0,mediaMarketingOutlets:[]}),getters:{mediaMarketingOutletsUnarchived({mediaMarketingOutlets:e}){return e.filter(t=>!t.archived)},mediaMarketingOutletsArchived({mediaMarketingOutlets:e}){return e.filter(t=>t.archived)}},actions:{setMediaMarketingOutlet(e){this.mediaMarketingOutlet=e},getMediaMarketingOutlet(e,t=!0){const o=this.mediaMarketingOutlets.find(n=>n.id===e);return t&&(this.mediaMarketingOutlet=o),o},appendMediaMarketingOutlet(e){return this.mediaMarketingOutlets=[...this.mediaMarketingOutlets,e],e},amendMediaMarketingOutlet(e,t){let o;return this.mediaMarketingOutlets=this.mediaMarketingOutlets.map(n=>n.id===e?(o={...n,...t},o):n),o},removeMediaMarketingOutlet(e){this.mediaMarketingOutlets=this.mediaMarketingOutlets.filter(t=>t.id!==e)},async fetchMediaMarketingOutletsAsync(){const e=p(),{fetchArCustomerByEmailAsync:t}=e,{currentArCustomer:o}=y(e);try{await t(o.value.email);const{mediaMarketingOutlets:n}=o.value;this.mediaMarketingOutlets=n}catch(n){return Promise.reject(n)}},async fetchMediaMarketingOutletAsync(e,t=!0){var s;const o=p(),{fetchArCustomerByEmailAsync:n}=o,{currentArCustomer:a}=y(o);try{await n(a.value.email);const l=(s=a.value.mediaMarketingOutlets)==null?void 0:s.find(u=>u.id===e);if(t&&(this.mediaMarketingOutlet=l),!l)throw new Error("Media Marketing not found.");return Promise.resolve(l)}catch(l){return Promise.reject(l)}},async createMediaMarketingOutletAsync(e,t=!0){const o=p(),{updateCustomerArByEmailAsync:n}=o,{currentArCustomer:a}=y(o);try{const s=a.value.email,l=a.value.mediaMarketingOutlets||[];if(!s)throw new Error("Email not defined.");const u={id:N(),createdAt:Date.now(),...e};return await n(s,{mediaMarketingOutlets:[...l,u]}),t&&this.appendMediaMarketingOutlet(u),Promise.resolve(u)}catch(s){return Promise.reject(s)}},async updateMediaMarketingOutletAsync(e,t,o=!0){const n=p(),{updateCustomerArByEmailAsync:a}=n,{currentArCustomer:s}=y(n);try{const l=s.value.email,u=s.value.mediaMarketingOutlets||[];if(!l)throw new Error("Email not defined.");let g;if(await a(l,{mediaMarketingOutlets:[...u.map(A=>A.id===e?g={...A,...t}:A)]}),!g)throw new Error("Media Marketing not found.");return o&&(this.mediaMarketingOutlet=g,this.amendMediaMarketingOutlet(g.id,g)),Promise.resolve(g)}catch(l){return Promise.reject(l)}},async deleteMediaMarketingOutletAsync(e,t=!0){const o=p(),{updateCustomerArByEmailAsync:n}=o,{currentArCustomer:a}=y(o);try{const s=a.value.email,l=a.value.mediaMarketingOutlets||[];if(!s)throw new Error("Email not defined.");return await n(s,{mediaMarketingOutlets:[...l.filter(u=>u.id!==e)]}),t&&this.removeMediaMarketingOutlet(e),Promise.resolve(!0)}catch(s){return Promise.reject(s)}}}}),E=j.resolve(ee.name),q=K("financialArPromotionStore",{state:()=>({financialPromotion:void 0,financialPromotions:[],financialPromotionTotal:0}),actions:{setFinancialPromotion(e){this.financialPromotion=e},getFinancialPromotion(e,t=!0){const o=this.financialPromotions.find(n=>n.id===e);return t&&(this.financialPromotion=o),o},appendFinancialPromotion(e){return this.financialPromotions=[...this.financialPromotions,e],e},amendFinancialPromotion(e,t,o=!0){let n;return this.financialPromotions=this.financialPromotions.map(a=>a.id===e?(n={...a,...t},n):a),o&&(this.financialPromotion=n),n},removeFinancialPromotion(e){this.financialPromotions=this.financialPromotions.filter(t=>t.id!==e)},async fetchFinancialPromotionsAsync(e){const t=p(),{currentArCustomer:o}=y(t);try{const n=await E.getFinancialPromotionsAsync(o.value.id,e),{data:a,total:s}=n;this.financialPromotions=a,this.financialPromotionTotal=s}catch(n){return Promise.reject(n)}},async fetchFinancialPromotionAsync(e,t=!0){try{const o=await E.getFinancialPromotionAsync(e);return t&&this.setFinancialPromotion(o),Promise.resolve(o)}catch(o){return Promise.reject(o)}},async saveOrUpdateFinancialPromotionAsync(e,t=!0){try{const o=p(),{currentArCustomer:n}=y(o),a=await E.saveOrUpdateFinancialPromotionAsync({...e,customerId:n.value.id});if(t){let s=!1;this.financialPromotions=this.financialPromotions.map(l=>l.id===e.id?(s=!0,{...l,...a}):l),s||(this.financialPromotions=[a,...this.financialPromotions]),this.setFinancialPromotion(a)}return Promise.resolve(a)}catch(o){return Promise.reject(o)}},async deleteFinancialPromotionAsync(e,t=!0){try{return await E.deleteFinancialPromotionAsync(e),t&&this.removeFinancialPromotion(e),Promise.resolve(!0)}catch(o){return Promise.reject(o)}}}}),we=te({components:{ViewOutletModal:h(()=>v(()=>import("./ARViewOutletModal-0ba9bd8c.js"),["assets/ARViewOutletModal-0ba9bd8c.js","assets/ModalComponent.vue_vue_type_script_setup_true_lang-fe9b98ed.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/DateTimeComponent-2c5db54c.js","assets/DateTimeComponent-c81dcb9c.css","assets/StaffLabelComponent-6b30f61e.js","assets/MediaLabelComponent-feae136c.js","assets/StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js","assets/MediaLabelComponent-567bf1c1.css"])),AddOutletModal:h(()=>v(()=>import("./ARAddOutletModal-2f87d6b7.js"),["assets/ARAddOutletModal-2f87d6b7.js","assets/ModalComponent.vue_vue_type_script_setup_true_lang-fe9b98ed.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/OverlayLoader-e5a9021a.js","assets/OverlayLoader-bebe70db.css","assets/KendoOfficerSelectComponent-a3474693.js","assets/MediaLabelComponent-feae136c.js","assets/StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js","assets/MediaLabelComponent-567bf1c1.css","assets/ARMediaDropdown.vue_vue_type_script_setup_true_lang-15340789.js"])),AddPromotionModal:h(()=>v(()=>import("./ARAddPromotionModal-61b74764.js"),["assets/ARAddPromotionModal-61b74764.js","assets/ModalComponent.vue_vue_type_script_setup_true_lang-fe9b98ed.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/OverlayLoader-e5a9021a.js","assets/OverlayLoader-bebe70db.css","assets/KendoNumericInputComponent-fbc7c250.js","assets/KendoOfficerSelectComponent-a3474693.js","assets/MediaLabelComponent-feae136c.js","assets/StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js","assets/MediaLabelComponent-567bf1c1.css","assets/GridCardTable-248623f7.js","assets/GridCardTable-d4d68ddc.css","assets/DateTimeComponent-2c5db54c.js","assets/DateTimeComponent-c81dcb9c.css","assets/ARAddPromotionModal-53f91e67.css"])),OutletActions:h(()=>v(()=>import("./AROutletActions-a02e3796.js"),["assets/AROutletActions-a02e3796.js","assets/SpinnerComponent-154f27a2.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/SpinnerComponent-e29f1e6a.css","assets/AROutletActions-a5f96f55.css"])),PromotionActions:h(()=>v(()=>import("./ARPromotionActions-b2d5fb3a.js"),["assets/ARPromotionActions-b2d5fb3a.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/MediaLabelComponent-feae136c.js","assets/StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js","assets/MediaLabelComponent-567bf1c1.css","assets/ARPromotionActions-aa085156.css"])),ViewPromotionModal:h(()=>v(()=>import("./ARViewPromotionModal-3da8280b.js"),["assets/ARViewPromotionModal-3da8280b.js","assets/ModalComponent.vue_vue_type_script_setup_true_lang-fe9b98ed.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/OverlayLoader-e5a9021a.js","assets/OverlayLoader-bebe70db.css","assets/MediaLabelComponent-feae136c.js","assets/StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js","assets/MediaLabelComponent-567bf1c1.css","assets/useFinancialPromotionStore-bdfe7e68.js","assets/file-xls-fcdae677.js","assets/file-xls-3b8704d3.css","assets/GridCardTable-248623f7.js","assets/GridCardTable-d4d68ddc.css","assets/DateTimeComponent-2c5db54c.js","assets/DateTimeComponent-c81dcb9c.css","assets/ARViewPromotionModal-5f7f6161.css"])),MediaDropdown:h(()=>v(()=>import("./ARMediaDropdown-cc52933e.js"),["assets/ARMediaDropdown-cc52933e.js","assets/ARMediaDropdown.vue_vue_type_script_setup_true_lang-15340789.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/MediaLabelComponent-feae136c.js","assets/StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js","assets/MediaLabelComponent-567bf1c1.css"])),PromotionTableFilters:h(()=>v(()=>import("./ARPromotionTableFilters-58274811.js"),["assets/ARPromotionTableFilters-58274811.js","assets/index-9d6d511f.js","assets/index-982d5504.css"]))},data(){return{isLoading:!1,isShowSavingText:!1,moment:T,eventBus:ie("$eventBusService"),currentTab:0,tabs:[{title:this.$t("marketingFinancialPage-mediaMarketing"),content:"mediaMarketing"},{title:this.$t("marketingFinancialPage-financialPromotions"),content:"financialPromotions"}],activeOutletTableGroup:"active",outletTableGroups:[{title:"Active",value:"active"},{title:"All",value:"all"}],isViewOutletModalVisible:!1,isAddOutletModalVisible:!1,isFetchingOutlet:!1,isAddingOutlet:!1,isArchivingOutlet:!1,archiveItem:"",activePromotionTableGroup:"pending",promotionTableGroups:[{title:"Pending",value:"pending"},{title:"Approved",value:"approved"},{title:"Rejected",value:"rejected"},{title:"All",value:"all"}],isViewPromotionModalVisible:!1,isAddPromotionModalVisible:!1,isFetchingPromotion:!1,isSavingPromotion:!1,currentPromotionValues:void 0,webScrapeService:j.resolve(oe.name),helperService:j.resolve(ne.name),updatingPromotionIds:[],promotionTableLoading:!1,marketingOutletTableLoading:!1,promotionTableSettings:{pageSize:10,pageNumber:1,skip:0,take:10,filters:{},sorts:[]},mediaMarketingTableSettings:{pageSize:10,pageNumber:1,skip:0,take:10,filters:{},sorts:[]}}},computed:{AppConstants(){return f},...I(p,["currentArFirmName","currentArCustomer"]),...I(z,["mediaMarketingOutlet","mediaMarketingOutlets","mediaMarketingOutletsArchived","mediaMarketingOutletsUnarchived"]),...I(q,["financialPromotion","financialPromotions","financialPromotionTotal"]),activeOutlet(){return this.mediaMarketingOutlet},outlets(){return this.orderBy(this.mediaMarketingOutlets,this.mediaMarketingTableSettings.sorts)},outletColumns(){return[{field:"name",title:"Account Name"},{field:"approved",title:"Approved",className:"text-center",sortable:!1},{field:"pending",title:"Pending",className:"text-center",sortable:!1},{field:"rejected",title:"Rejected",className:"text-center",sortable:!1},{field:"createdAt",title:"Most Recent Post",className:"text-center"},{field:"updatedAt",title:"Most Recent Approval",className:"text-center"},{field:"actions",title:" "}]},outletItems(){let e=this.outlets.filter(t=>!t.archived);return this.activeOutletTableGroup==="all"&&this.orderBy(this.mediaMarketingOutlets.filter(t=>t.archived),this.mediaMarketingTableSettings.sorts).map(t=>{e.push({...t,inactive:t.archived})}),e},activePromotion(){return this.financialPromotion},promotions(){return this.financialPromotions},promotionColumns(){const e=[{field:"media",title:"Media"},{field:"type",title:"Type"},{field:"contentOwner",title:"Content Owner"},{field:"moderator",title:"Moderator"}];switch(this.activePromotionTableGroup){case"pending":return[...e,{field:"approvalType",title:"Approval Type"},{field:"contentStatus",title:"Content Status"},{field:"approvalRequiredDate",title:"Approval Required Date"},{field:"actions",title:" "}];case"approved":return[...e,{field:"contentStatus",title:"Content Status"},{field:"dateApproved",title:"Date Approved"},{field:"dateLive",title:"Date Live"},{field:"actions",title:" "}];case"rejected":return[...e,{field:"contentStatus",title:"Content Status"},{field:"dateRejected",title:"Date Rejected"},{field:"dateLive",title:"Date Live"},{field:"actions",title:" "}];default:return[...e,{field:"contentStatus",title:"Content Status"},{field:"status",title:"Status"},{field:"date",title:"Date"},{field:"dateLive",title:"Date Live"},{field:"actions",title:" "}]}},promotionItems(){switch(this.activePromotionTableGroup){case"pending":return this.promotions.filter(e=>e.approvalStatus===m.Pending);case"approved":return this.promotions.filter(e=>e.approvalStatus===m.Approved);case"rejected":return this.promotions.filter(e=>e.approvalStatus===m.Rejected);default:return this.promotions.map(e=>(e.approvalStatus===m.Approved&&(e.approved=!0),e.approvalStatus===m.Rejected&&(e.rejected=!0),e.approvalStatus===m.Pending&&(e.pending=!0),e))}},promotionTypeOptions(){return[{label:`${this.currentArFirmName} Products/Services`,value:"self"},{label:"Authorised Third Party Products/Services",value:"authorised-3rd-party"},{label:"Non-Authorised Third Party Products/Services",value:"non-authorised-3rd-party"}]},approvalTypeOptions(){return ae.getPostApprovalTypes().map(e=>({label:e,value:e}))},contentStatusOptions(){return[{label:"Live",value:"Live"},{label:"Not Live",value:"Not Live"}]}},created(){this.changeLifeCycleName(f.pageLifeCycleNameCreated)},async mounted(){this.eventBus.emit(f.bottomBarEnableEvent,!0),this.changeLifeCycleName(f.pageLifeCycleNameMounted),this.fetchDataAsync()},unmounted(){this.isLoading=!1},setup(){const e=re(),{changeLifeCycleName:t}=e;return{changeLifeCycleName:t}},methods:{orderBy:se,groupBy:Pe,...D(p,["updateCustomerArByEmailAsync"]),...D(z,["createMediaMarketingOutletAsync","updateMediaMarketingOutletAsync","fetchMediaMarketingOutletAsync","fetchMediaMarketingOutletsAsync","deleteMediaMarketingOutletAsync","appendMediaMarketingOutlet","amendMediaMarketingOutlet","getMediaMarketingOutlet","removeMediaMarketingOutlet"]),...D(q,["fetchFinancialPromotionAsync","fetchFinancialPromotionsAsync","deleteFinancialPromotionAsync","appendFinancialPromotion","amendFinancialPromotion","getFinancialPromotion","removeFinancialPromotion","setFinancialPromotion","saveOrUpdateFinancialPromotionAsync"]),async fetchDataAsync(){this.isLoading=!0,await Promise.all([this.fetchMediaMarketingOutletsAsync(),this.fetchPromotionsDataAsync()]),this.isLoading=!1},async fetchPromotionsDataAsync(){const{pageSize:e,pageNumber:t,filters:o,sorts:n}=this.promotionTableSettings;this.promotionTableLoading=!0;try{await this.fetchFinancialPromotionsAsync({pageSize:e,pageNumber:t,...o,sortPropertyName:k(n)?void 0:n[0].field,sortDirection:k(n)?void 0:n[0].dir})}catch{throw new Error("Something went wrong.")}finally{this.promotionTableLoading=!1}},selectTab(e){this.currentTab=e.selected},async addOutletAsync(e){const t=new Ae;t.id=N(),t.url=e.url,t.name=e.name,t.owner=e.owner,t.archived=!1,t.platform=e.platform,t.createdAt=T().unix(),t.updatedAt=T().unix(),this.isAddingOutlet=!0;try{await this.createMediaMarketingOutletAsync(t),this.isAddOutletModalVisible=!1,this.isAddingOutlet=!1,this.webScrapeService.registerMediaAsync(t.id,t.url,`${this.currentArCustomer.id}`),setTimeout(()=>{this.fetchFinancialPromotionsAsync()},2e3)}catch{_({type:V.ERROR,content:"Error Adding Media Marketing Outlet."})}},viewOutlet(e){this.isViewOutletModalVisible=!0,this.isFetchingOutlet=!0,this.getMediaMarketingOutlet(e,!0),this.isFetchingOutlet=!1},async archiveOutlet(e,t){G({content:this.$t(t?"marketingFinancialPage-confirmArchiveOutlet":"marketingFinancialPage-confirmUnarchiveOutlet"),type:le.CONFIRM,onConfirm:()=>{this.isArchivingOutlet=!0,this.archiveItem=e,this.updateMediaMarketingOutletAsync(e,{archived:t,updatedAt:T().unix()}).then(()=>{this.isArchivingOutlet=!1})}})},getOutlet(e){return this.getMediaMarketingOutlet(e,!1)},removeOutlet(e){this.removeMediaMarketingOutlet(e),this.deleteMediaMarketingOutletAsync(e,!1)},async savePromotionAsync(e){var o,n,a,s;let t=new be;e.id?t={...t,...e}:(t.id=N(),t.mediaOutlet=e.mediaOutlet,t.contentUrl=e.contentUrl,t.editorContent={content:(o=e.editorContent)==null?void 0:o.content,rawContent:(n=e.editorContent)==null?void 0:n.rawContent,suggestions:(a=e.editorContent)==null?void 0:a.suggestions,commentThreads:(s=e.editorContent)==null?void 0:s.commentThreads},t.owner=e.owner,t.moderator=e.moderator,t.approvalStatus=m.Pending,t.approvalDays=e.approvalDays,t.isLive=e.isLive,t.media=e.media||[],t.type=e.type,t.productType=(e.productType||[]).map(({label:l})=>l),t.remunerationMethod=e.remunerationMethod,t.createdAt=T().unix(),t.updatedAt=void 0),this.isSavingPromotion=!0;try{await this.saveOrUpdateFinancialPromotionAsync(t),this.webScrapeService.webScrapeAndRegisterAsync(`${this.currentArCustomer.email}`,t.id)}catch{}finally{this.isSavingPromotion=!1,this.isAddPromotionModalVisible=!1,this.currentPromotionValues=void 0}},async viewPromotionAsync(e){this.setFinancialPromotion(),this.isViewPromotionModalVisible=!0,this.isFetchingPromotion=!0,await this.fetchFinancialPromotionAsync(e),this.isFetchingPromotion=!1},removePromotion(e){this.removeFinancialPromotion(e),this.deleteFinancialPromotionAsync(e,!1)},getFinancialTypeLabel(e){var t;return((t=this.promotionTypeOptions.find(o=>o.value===e))==null?void 0:t.label)||""},setUpdatingPromotionId(e){this.updatingPromotionIds.push(e)},unsetUpdatingPromotionId(e){this.updatingPromotionIds=this.updatingPromotionIds.filter(t=>t!==e)},approveRejectPost(e,t){G({title:"Confirm",content:t?"Do you wish to approve this post?":"Do you wish to reject this post?",confirmButtonText:t?"Confirm & Approve":"Confirm & Reject",confirmButtonThemeColor:t?"primary":"error",onConfirm:async()=>{const o=this.getFinancialPromotion(e);o||_({type:V.ERROR,content:"Something went wrong. Please try again later."});try{this.setUpdatingPromotionId(e),await this.saveOrUpdateFinancialPromotionAsync({...o,approvalStatus:t?m.Approved:m.Rejected}),_({type:V.SUCCESS,content:t?"Post Approved.":"Post Rejected."}),this.unsetUpdatingPromotionId(e)}catch{}}})},handleEdit(e){this.currentPromotionValues=e,this.isAddPromotionModalVisible=!0,this.isViewPromotionModalVisible=!1},async handleSaveAsync(){const{email:e=""}=this.currentArCustomer;this.isShowSavingText=!0,this.isLoading=!0,await this.updateCustomerArByEmailAsync(e,{financialPromotions:this.financialPromotions}).then(()=>{this.isLoading=!1,this.isShowSavingText=!1,_({type:V.SUCCESS,content:this.$t("common-notification-saved"),interval:f.notificationPopupTimeOut}),setTimeout(()=>this.eventBus.emit(f.autoNextEvent),f.notificationPopupTimeOut)}).catch()},async promotionTableFilterAsync(e){const{values:t}=e;if(k(t))return;const o={};k(t.platform)||(o.mediaOutlets=t.platform.map(({value:n})=>n)),k(t.type)||(o.types=t.type.map(({value:n})=>n)),k(t.contentStatus)||(o.contentStatus=t.contentStatus.map(({value:n})=>n)),this.promotionTableSettings={...this.promotionTableSettings,filters:o,skip:0,pageNumber:1},await this.fetchPromotionsDataAsync()},async promotionTablePageChangedAsync(e){const{skip:t,take:o}=e.page,n=Math.ceil(t/o+1);this.promotionTableSettings={...this.promotionTableSettings,skip:t,pageNumber:n},await this.fetchPromotionsDataAsync()},async promotionTableSearchAsync(e){this.promotionTableSettings={...this.promotionTableSettings,filters:{...this.promotionTableSettings.filters,search:e},skip:0,pageNumber:1},await this.fetchPromotionsDataAsync()},async promotionTableSortAsync(e){this.promotionTableSettings={...this.promotionTableSettings,sorts:e.sort},await this.fetchPromotionsDataAsync()},setUniqueIdentifier(e){const t=`${f.arMarketingAndFinancialPromotionsRoute}${e}`;return this.helperService.removeStringSpacesThenSlash(t)},marketingOutletSortAsync(e){this.marketingOutletTableLoading=!0,setTimeout(()=>{this.marketingOutletTableLoading=!1,this.mediaMarketingTableSettings.sorts=e.sort},300)},marketingOutletPageAsync(e){this.marketingOutletTableLoading=!0,setTimeout(()=>{this.marketingOutletTableLoading=!1,this.mediaMarketingTableSettings.skip=e.page.skip,this.mediaMarketingTableSettings.skip=e.page.skip},300)}}}),C=e=>(he("data-v-7b1fdfb8"),e=e(),fe(),e),Ce={class:"font-size-xl text-primary mb-3"},Fe={class:"alert alert-primary border-0"},_e=["href"],Ve={class:"row mb-3"},Le={class:"col-8"},Ee=["href"],Re={class:"col-4 text-end"},Ie={class:"row mb-2"},De={class:"col text-center"},Ne=C(()=>r("h6",{class:"font-weight-medium mt-2"},"0",-1)),je={class:"col text-center"},$e=C(()=>r("h6",{class:"font-weight-medium mt-2"},"0",-1)),Ue={class:"col text-center"},Be=C(()=>r("h6",{class:"font-weight-medium mt-2"},"0",-1)),Ge={class:"row font-size-xs text-center"},ze={class:"col-lg-6 border-end"},qe=C(()=>r("span",{class:"font-weight-medium font-color-dark"}," Most Recent Post ",-1)),Ke={class:"col-lg-6"},He=C(()=>r("span",{class:"font-weight-medium font-color-dark"}," Most Recent Approval ",-1)),Je={class:"font-size-xl text-primary mb-3"},We={class:"alert alert-primary border-0"},Qe=["href"],Xe={class:"is-truncated"};function Ye(e,t,o,n,a,s){const l=ue,u=me,g=pe,A=Me,F=Te,$=b("OutletActions"),R=Se,U=ke,B=ye,H=Oe,J=b("PromotionActions"),W=b("PromotionTableFilters"),Q=ge,X=b("AddOutletModal"),Y=b("ViewOutletModal"),Z=b("AddPromotionModal"),x=b("ViewPromotionModal");return S(),de(ce,null,[d(l,{"is-loading":e.isLoading,isShowSavingText:e.isShowSavingText},null,8,["is-loading","isShowSavingText"]),d(u),d(g,{title:e.$t("marketingFinancialPage-title"),routeName:e.helperService.removeStringSpacesThenSlash(e.AppConstants.arMarketingAndFinancialPromotionsRoute),class:"PageTitle"},null,8,["title","routeName"]),d(Q,{class:"TabStrip TabStrip--lined",selected:e.currentTab,tabs:e.tabs,onSelect:e.selectTab},{mediaMarketing:c(()=>[r("h2",Ce,P(e.$t("marketingFinancialPage-mediaMarketingOutlet")),1),r("p",null,[r("div",Fe,P(e.$t("marketingFinancialPage-mediaMarketingDescription",{currentFirmName:e.currentArFirmName})),1)]),d(U,{class:"OutletTable mt-4",columns:e.outletColumns,items:e.outletItems.slice(e.mediaMarketingTableSettings.skip,e.mediaMarketingTableSettings.skip+e.mediaMarketingTableSettings.take),groups:e.outletTableGroups,"active-group":e.activeOutletTableGroup,"onUpdate:activeGroup":t[0]||(t[0]=i=>e.activeOutletTableGroup=i),"add-button-text":e.$t("marketingFinancialPage-addMediaMarketingOutlet"),onAdd:t[1]||(t[1]=i=>e.isAddOutletModalVisible=!0),pageable:e.outletItems.length>10,isSortable:"",sort:e.mediaMarketingTableSettings.sorts,skip:e.mediaMarketingTableSettings.skip,take:e.mediaMarketingTableSettings.take,total:e.outletItems.length,loading:e.marketingOutletTableLoading,handleSortChange:e.marketingOutletSortAsync,handlePageChange:e.marketingOutletPageAsync},{"cell-name":c(({item:i})=>[r("a",{href:i.url,target:"_blank"},[d(A,{id:i==null?void 0:i.platform,iconSize:32,text:i.name},null,8,["id","text"])],8,_e)]),"cell-approved":c(()=>[M(" 0")]),"cell-pending":c(()=>[M(" 0")]),"cell-rejected":c(()=>[M(" 0")]),"cell-createdAt":c(({item:{createdAt:i}})=>[i?(S(),w(F,{key:0,value:e.moment(i*1e3).toDate(),class:"is-text-nowrap"},null,8,["value"])):L("",!0)]),"cell-updatedAt":c(({item:{updatedAt:i}})=>[i?(S(),w(F,{key:0,value:e.moment(i*1e3).toDate(),class:"is-text-nowrap"},null,8,["value"])):L("",!0)]),"cell-actions":c(({item:i})=>[d($,{outlet:i,archiving:e.isArchivingOutlet,onView:e.viewOutlet,onArchive:e.archiveOutlet,onRemove:e.removeOutlet},null,8,["outlet","archiving","onView","onArchive","onRemove"])]),"card-content":c(({item:i})=>[r("div",Ve,[r("div",Le,[r("a",{href:i.url,target:"_blank",class:"link"},[d(A,{id:i==null?void 0:i.platform,"icon-size":"32",text:i.name},null,8,["id","text"])],8,Ee)]),r("div",Re,[d($,{outlet:i,archiving:e.isArchivingOutlet,onView:e.viewOutlet,onArchive:e.archiveOutlet},null,8,["outlet","archiving","onView","onArchive"])])]),r("div",Ie,[r("div",De,[d(R,{status:"approved"}),Ne]),r("div",je,[d(R,{status:"pending"}),$e]),r("div",Ue,[d(R,{status:"rejected"}),Be])]),r("div",Ge,[r("div",ze,[qe,i.createdAt?(S(),w(F,{key:0,value:i.createdAt,class:"is-text-nowrap"},null,8,["value"])):L("",!0)]),r("div",Ke,[He,i.updatedAt?(S(),w(F,{key:0,value:i.updatedAt,class:"is-text-nowrap"},null,8,["value"])):L("",!0)])])]),_:1},8,["columns","items","groups","active-group","add-button-text","pageable","sort","skip","take","total","loading","handleSortChange","handlePageChange"])]),financialPromotions:c(()=>[r("h2",Je,P(e.$t("marketingFinancialPage-financialPromotions")),1),r("p",null,[r("div",We,P(e.$t("marketingFinancialPage-financialPromotionsDescription",{currentFirmName:e.currentArFirmName})),1)]),(S(),w(U,{key:`promotion-table-${e.activePromotionTableGroup}`,class:"PromotionTable mt-4",columns:e.promotionColumns,items:e.promotionItems,groups:e.promotionTableGroups,"active-group":e.activePromotionTableGroup,"onUpdate:activeGroup":t[4]||(t[4]=i=>e.activePromotionTableGroup=i),"add-button-text":e.$t("marketingFinancialPage-addFinancialPromotion"),"no-switcher":"","no-actionbar":!1,"search-placeholder":"Search Content Owner, Moderator",pageable:e.promotionItems.length>10,isSortable:"",sort:e.promotionTableSettings.sorts,skip:e.promotionTableSettings.skip,take:e.promotionTableSettings.pageSize,total:e.financialPromotionTotal,loading:e.promotionTableLoading,handlePageChange:e.promotionTablePageChangedAsync,handleSortChange:e.promotionTableSortAsync,onAdd:t[5]||(t[5]=()=>{e.isAddPromotionModalVisible=!0,e.currentPromotionValues=void 0}),onFilter:e.promotionTableFilterAsync,onSearch:e.promotionTableSearchAsync},{"cell-media":c(({item:i})=>{var O;return[r("a",{href:i.contentUrl,target:"_blank",class:"link"},[d(A,{id:(O=e.getOutlet(i.mediaOutlet))==null?void 0:O.platform,"icon-only":"","icon-size":"32"},null,8,["id"])],8,Qe)]}),"cell-type":c(({item:i})=>[r("div",Xe,P(e.getFinancialTypeLabel(i.type)),1)]),"cell-contentOwner":c(({item:i})=>[d(B,{id:i.owner,rounded:"full","text-truncated":"","text-only":""},null,8,["id"])]),"cell-moderator":c(({item:i})=>[d(B,{id:i.moderator,rounded:"full","text-truncated":""},null,8,["id"])]),"cell-approvalType":c(({item:i})=>[M(" Existing Post ")]),"cell-contentStatus":c(({item:i})=>[d(H,{live:i.isLive},null,8,["live"])]),"cell-approvalRequiredDate":c(({item:i})=>[M(P(e.moment((i.createdAt||0)*1e3).add(i.approvalDays||0,"days").calendar()),1)]),"cell-dateApproved":c(({item:i})=>[M(P(e.moment((i.approvedAt||0)*1e3).calendar()),1)]),"cell-dateRejected":c(({item:i})=>[M(P(e.moment((i.rejectedAt||0)*1e3).calendar()),1)]),"cell-actions":c(({item:i})=>[d(J,{promotion:i,disabled:e.updatingPromotionIds.includes(i.id),onView:e.viewPromotionAsync,onRemove:e.removePromotion,onApprove:t[2]||(t[2]=O=>e.approveRejectPost(O,!0)),onReject:t[3]||(t[3]=O=>e.approveRejectPost(O,!1))},null,8,["promotion","disabled","onView","onRemove"])]),"filter-fields":c(({form:i})=>[d(W,{form:i,type:e.activePromotionTableGroup},null,8,["form","type"])]),_:1},8,["columns","items","groups","active-group","add-button-text","pageable","sort","skip","take","total","loading","handlePageChange","handleSortChange","onFilter","onSearch"]))]),_:1},8,["selected","tabs","onSelect"]),d(X,{modelValue:e.isAddOutletModalVisible,"onUpdate:modelValue":t[6]||(t[6]=i=>e.isAddOutletModalVisible=i),saving:e.isAddingOutlet,onSubmit:e.addOutletAsync},null,8,["modelValue","saving","onSubmit"]),d(Y,{modelValue:e.isViewOutletModalVisible,"onUpdate:modelValue":t[7]||(t[7]=i=>e.isViewOutletModalVisible=i),outlet:e.activeOutlet},null,8,["modelValue","outlet"]),d(Z,{modelValue:e.isAddPromotionModalVisible,"onUpdate:modelValue":t[8]||(t[8]=i=>e.isAddPromotionModalVisible=i),"initial-values":e.currentPromotionValues,outlets:e.outlets,"promotion-type-options":e.promotionTypeOptions,saving:e.isSavingPromotion,onSubmit:e.savePromotionAsync},null,8,["modelValue","initial-values","outlets","promotion-type-options","saving","onSubmit"]),d(x,{modelValue:e.isViewPromotionModalVisible,"onUpdate:modelValue":t[9]||(t[9]=i=>e.isViewPromotionModalVisible=i),promotion:e.activePromotion,loading:e.isFetchingPromotion,onEdit:e.handleEdit},null,8,["modelValue","promotion","loading","onEdit"])],64)}const Ze=ve(we,[["render",Ye],["__scopeId","data-v-7b1fdfb8"]]),nt=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));export{nt as A,z as u};
