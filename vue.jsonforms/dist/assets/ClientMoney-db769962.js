var Re=Object.defineProperty;var we=(e,n,d)=>n in e?Re(e,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[n]=d;var i=(e,n,d)=>(we(e,typeof n!="symbol"?n+"":n,d),d);import{D as q,bT as Ue,bb as Me,j as Y,C as Q,G as z,Z as x,bF as Ne,aX as ke,o as C,q as K,w as u,n as o,r as j,x as _,m as k,y as E,P as a,a0 as ae,aB as Be,H as X,a_ as De,L as Fe,bU as Ee,E as Oe,bV as Le,bW as qe,B as ze,a5 as me,a6 as ce,bX as Ke,_ as pe,A,a$ as ve,aJ as he,aL as fe,aM as ge,Q as ye,bY as Ae,K as be,bZ as _e,b0 as Ve,aa as We,bc as N,l as ie,ae as je,I as He,ag as Ye,af as Ge,b3 as se,b4 as re,bd as Je,ai as Ze,as as le,at as Xe,au as Qe,av as xe,ay as et,am as tt,an as nt,bI as de,az as ot,aA as J,bf as at,J as Z,aC as it,aH as st,aU as rt,aG as lt,b8 as dt,R as ut,U as mt,ba as ct,a4 as pt,W as vt,bg as ht,aZ as ft,a2 as gt,aO as yt}from"./index-9d6d511f.js";import{_ as At}from"./NumberListComponent-fb44b311.js";const bt=q.resolve(Ue.name),ue=Me("clientMoneyStore",{state:()=>({insurerRatings:void 0}),actions:{async fetchInsurerRatingsAsync(e){try{const n=await bt.getInsurerRatingsAsync(e);return this.insurerRatings=n,Promise.resolve(n)}catch(n){return Promise.reject(n)}}}});class ee{constructor(){i(this,"providerName","");i(this,"companyNumber");i(this,"firmReferenceNumber");i(this,"isPraAuthorized",!1);i(this,"insurerRating");i(this,"registeredAddress");i(this,"tradingAddress");i(this,"emailAddress");i(this,"contactNumber");i(this,"website");i(this,"withBindingAuthority");i(this,"haveRiskTransferAgreement");i(this,"allowToCascadeRiskTransferAgreement")}}class _t{constructor(){i(this,"id");i(this,"classification");i(this,"insurerRating");i(this,"providerName");i(this,"companyNumber");i(this,"firmReferenceNumber");i(this,"isPraAuthorized",!1);i(this,"registeredAddress");i(this,"tradingAddress");i(this,"emailAddress");i(this,"contactNumber");i(this,"website");i(this,"withBindingAuthority",null);i(this,"dateAgreed");i(this,"insuranceProviders",[new ee]);i(this,"haveRiskTransferAgreement",null);i(this,"allowComminglingOfRiskTransferFunds",null);i(this,"accountType");i(this,"riskTransferAgreement");i(this,"StatutoryTrustLetter");i(this,"firmRepresentative");i(this,"createdAt");i(this,"updatedAt")}}var W=(e=>(e.Insurer="Insurer",e.MGA="MGA",e.WholesaleBroker="Wholesale Broker",e))(W||{});class Vt{constructor(){i(this,"highestAmount1");i(this,"highestAmount1From");i(this,"highestAmount1To");i(this,"highestAmount2");i(this,"highestAmount2From");i(this,"hasObtainedInLastYear");i(this,"reviewPeriodStartDate");i(this,"reviewPeriodEndtDate");i(this,"reportDate");i(this,"undertakeClientAccountRecon")}}const Ce=e=>(me("data-v-58272a09"),e=e(),ce(),e),Ct={key:0,class:"fineprint ms-1"},$t={class:"ms-auto"},Pt=Ce(()=>a("span",null,"Poor",-1)),St=Ce(()=>a("span",null,"Good",-1)),Tt=Y({__name:"InsurerRating",props:{modelValue:{default:""},id:{},label:{},name:{},hint:{},disabled:{type:Boolean,default:!1},isRequired:{type:Boolean,default:!0},maxWidth:{},unrated:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:n}){const d=e,{modelValue:m,unrated:r}=Q(d),c=["C","CC-","CC","CC+","CCC","B-","B","B+","BB-","BB","BB+","BBB-","BBB","BBB+","A-","A","A+","AA-","AA","AA+","AAA"],{generateColor:p}=Ke(),y=z(),l=z(),g=z(1),b=x(()=>P(g.value,c)),w=(v,f)=>{const $=100/f.length;return f.indexOf(v)*$},P=(v,f)=>{const $=100/f.length,B=Object.keys(f).find(M=>M*$>=v),D=(B!==void 0?B:f.length)-1;return f[D]},T=(v,f)=>{g.value=v.value,n("update:modelValue",b.value),v.value=b.value,f==null||f(v)},h=()=>{if(!y.value||!l.value)return;const v=y.value.querySelector(".k-draghandle");v&&v.appendChild(l.value)},I=z(r.value);return Ne(()=>{m.value&&(g.value=w(m.value,c)),I.value=r.value}),ke(()=>{h()}),(v,f)=>{const $=De,U=Fe,B=Ee,D=Oe,M=Le,G=qe,H=ze;return C(),K(H,{id:v.id,name:v.name,component:"template"},{template:u(({props:S})=>[o(G,{class:ae(S.class)},{default:u(()=>[v.label?(C(),K(U,{key:0,"editor-id":v.id,disabled:v.disabled,valid:S.valid,"editor-valid":S.valid,class:"control-label mb-2"},{default:u(()=>[j(_(v.label)+" ",1),v.isRequired?E("",!0):(C(),k("span",Ct,"(Optional)")),a("span",$t,[o($,{modelValue:I.value,"onUpdate:modelValue":f[0]||(f[0]=F=>I.value=F),label:"Unrated"},null,8,["modelValue"])])]),_:2},1032,["editor-id","disabled","valid","editor-valid"])):E("",!0),a("div",{ref_key:"ratingElement",ref:y,class:ae(["InsurerRating",I.value&&"InsurerRating--disabled"]),style:Be({"--current-color":X(p)(g.value),maxWidth:v.maxWidth?`${v.maxWidth}px`:void 0})},[Pt,o(B,{value:g.value,min:1,max:100,class:"w-100",disabled:I.value,onChange:F=>T(F,S.onChange)},null,8,["value","disabled","onChange"]),a("label",{ref_key:"labelElement",ref:l,class:"InsurerRating-label"},_(b.value),513),St],6),S.touched&&S.validationMessage?(C(),K(D,{key:1},{default:u(()=>[j(_(S.validationMessage),1)]),_:2},1024)):(C(),K(M,{key:2},{default:u(()=>[j(_(v.hint),1)]),_:1}))]),_:2},1032,["class"])]),_:1},8,["id","name"])}}});const $e=pe(Tt,[["__scopeId","data-v-58272a09"]]),It={class:"row gy-3"},Rt=a("div",{class:"col-lg-10"},null,-1),wt={class:"col-lg-2"},Ut={class:"col-lg-12"},Mt={class:"col-lg-12"},Nt={class:"col-lg-12"},kt={class:"col-lg-4"},Bt={class:"col-lg-4"},Dt={class:"col-lg-4"},Pe=Y({__name:"InsuranceProviderDetails",props:{modelValue:{default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:n}){const d=e,{modelValue:m}=Q(d),r=x({get(){return m.value},set(y){n("update:modelValue",y)}}),c=`insurance-provider-${Math.random().toString(36).slice(2,7)}`,p=y=>`${A.clientMoneyRoute}-insuranceProvider${y}`.replace(/\s+/g,"").replace("/","");return(y,l)=>{const g=ve,b=he,w=fe,P=ge,T=ye;return C(),k("div",It,[Rt,a("div",wt,[o(g,{modelValue:r.value.isPraAuthorized,"onUpdate:modelValue":l[0]||(l[0]=h=>r.value.isPraAuthorized=h),id:p(`-praAuthorized-${c}`),name:`praAuthorized-${c}`,label:"PRA Authorized","no-text":""},null,8,["modelValue","id","name"])]),a("div",Ut,[o($e,{modelValue:r.value.insurerRating,"onUpdate:modelValue":l[1]||(l[1]=h=>r.value.insurerRating=h),id:p(`-insurerRating-${c}`),name:`InsurerRating-${c}`,label:"Insurer Rating","max-width":480,unrated:!r.value.insurerRating},null,8,["modelValue","id","name","unrated"])]),a("div",Mt,[o(b,{modelValue:r.value.registeredAddress,"onUpdate:modelValue":l[2]||(l[2]=h=>r.value.registeredAddress=h),id:p(`-registeredAddress-${c}`),name:`registeredAddress-${c}`,label:"Registered Address"},null,8,["modelValue","id","name"])]),a("div",Nt,[o(b,{modelValue:r.value.tradingAddress,"onUpdate:modelValue":l[3]||(l[3]=h=>r.value.tradingAddress=h),id:p(`-tradingAddress-${c}`),name:`tradingAddress-${c}`,label:"Trading Address"},null,8,["modelValue","id","name"])]),a("div",kt,[o(w,{modelValue:r.value.emailAddress,"onUpdate:modelValue":l[4]||(l[4]=h=>r.value.emailAddress=h),id:p(`-emailAddress-${c}`),name:"emailAddress",label:"Email Address"},null,8,["modelValue","id"])]),a("div",Bt,[o(P,{modelValue:r.value.contactNumber,"onUpdate:modelValue":l[5]||(l[5]=h=>r.value.contactNumber=h),id:p(`-contactNumber-${c}`),name:"contactNumber",label:"Contact Number",isDataLoadedCompletely:!0},null,8,["modelValue","id"])]),a("div",Dt,[o(T,{modelValue:r.value.website,"onUpdate:modelValue":l[6]||(l[6]=h=>r.value.website=h),id:p(`-website-${c}`),name:"website",type:"url",label:"Website"},null,8,["modelValue","id"])])])}}}),Ft=Y({__name:"InuranceProviderTabs",props:{modelValue:{default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:n}){const d=e,{modelValue:m}=Q(d),r=z(0),c=x({get(){return m.value.map((l,g)=>({id:`insurance-provider-${l.providerName.toLowerCase().trim().replace(/ /g,"-")||Math.random().toString(36).substring(2,7)}`,title:l.providerName||"<Insurance Provider Name>",content:"",active:r.value===g}))},set(l){for(const g in l)if(l[g].active){r.value=+g;break}}}),p=l=>{r.value=l,n("update:modelValue",[...m.value,new ee])},y=l=>{r.value===l&&(r.value=l+1),n("update:modelValue",m.value.filter((g,b)=>b!==l))};return(l,g)=>{const b=Ve,w=_e;return C(),K(w,{items:c.value,"onUpdate:items":g[0]||(g[0]=P=>c.value=P),addable:!0,removable:!0,onAdd:p,onRemove:y},Ae({_:2},[be(c.value,P=>({name:`content(${P.id})`,fn:u(({index:T})=>[o(b,{items:[{id:`insurance-provider-${P.id}`,noHeader:!0,active:!0}]},{content:u(()=>[o(Pe,{modelValue:X(m)[T],"onUpdate:modelValue":h=>X(m)[T]=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["items"])])}))]),1032,["items"])}}}),Et=Y({name:"ClientMoney",components:{InsurerRating:$e,InsuranceProviderDetails:Pe,InuranceProviderTabs:Ft,KendoFirmFinderComponentAsync:We(()=>ot(()=>import("./KendoFirmFinderComponent-9a5bf623.js"),["assets/KendoFirmFinderComponent-9a5bf623.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/KendoFirmFinderComponent-d11737a3.css"]))},data(){return{moment:N,isLoading:!1,isShowSavingText:!1,currentTab:0,tabs:[{title:this.$t("clientMoneyPage-providerDetails"),content:"providerDetails"},{title:this.$t("clientMoneyPage-clientMoneyAudit"),content:"clientMoneyAudit"}],activeProviderIndex:0,providers:[],clientMoneyAudit:{},ClassificationEnum:W,classificationOptions:[{label:W.Insurer,value:this.$t("clientMoneyPage-insurer")},{label:W.MGA,value:this.$t("clientMoneyPage-mga")},{label:W.WholesaleBroker,value:this.$t("clientMoneyPage-wholesaleBroker")}],accountTypeOptions:[{label:this.$t("clientMoneyPage-statutoryClientAccount"),value:"Statutory Client Account"},{label:this.$t("clientMoneyPage-nonStatutoryClientAccount"),value:"Non Statutory Client Account"},{label:this.$t("clientMoneyPage-insurerTrustAccount"),value:"Insurer Trust Account"}],disabledAccountTypes:["Insurer Trust Account"],eventBus:ie("$eventBusService"),eventBusFormSaved:ie("$eventBusService"),isInitializing:!0,companiesHouseService:q.resolve(je.name),helperService:q.resolve(He.name),userSubmittedChangesService:q.resolve(Ye.name),isSavingAlertOpened:!1,accountPeriodStartOn:N().startOf("y").subtract(1,"y").unix(),accountPeriodEndOn:N().endOf("y").subtract(1,"y").unix(),accountMadeUpTo:N().endOf("y").subtract(1,"y").unix(),fcaService:q.resolve(Ge.name)}},provide(){return{populateRelatedFieldsAsync:this.populateRelatedFieldsAsync}},computed:{...se(de,["currentCustomer","currentFirmName","currentCompanyNumber"]),...se(ue,["insurerRatings"]),AppConstants(){return A},providersTabs:{get(){return this.providers.map(({id:e,providerName:n},d)=>({id:`provider-${e}`,title:n??"<Provider Name>",content:"",active:this.activeProviderIndex===d}))},set(e){for(const n in e)if(e[n].active){this.activeProviderIndex=+n;break}}},providerPanels(){return this.providers.map(({id:e})=>({id:`provider-${e}`,title:this.$t("clientMoneyPage-title"),content:""}))}},methods:{...re(de,["updateCustomerByEmailAsync"]),...re(ue,["fetchInsurerRatingsAsync"]),setUniqueIdentifier(e){return`${A.clientMoneyRoute}${e}`.replace(/\s+/g,"").replace("/","")},selectTab(e){this.currentTab=e.selected},addProvider(e){const n=new _t;n.id=Je(),n.firmRepresentative=new Ze,this.providers.push(n),this.activeProviderIndex=e,this.$nextTick(()=>{this.$refs.clientMoneyPanel.expand(`provider-${n.id}`)})},removeProvider(e){const n=this.providers[e].id;this.providers=this.providers.filter(d=>d.id!==n),this.providers.length||this.addProvider(0),this.activeProviderIndex===e&&(this.activeProviderIndex=0)},makeProviderNav(e){return[{id:`provider-details-${e}`,anchorTo:`panel-provider-details-${e}`,label:this.$t("clientMoneyPage-providerDetails"),icon:"business-card",active:!0},{id:`risk-transfer-funds-${e}`,anchorTo:`panel-risk-transfer-funds-${e}`,label:this.$t("clientMoneyPage-riskTransferFunds"),icon:"money-transfer-57"},{id:`representative-details-${e}`,anchorTo:`panel-representative-details-${e}`,label:this.$t("clientMoneyPage-representativeDetails"),icon:"user-protection-check"}]},makeSubProviderPanels(e){return[{id:`provider-details-${e}`,title:this.$t("clientMoneyPage-providerDetails"),content:"",active:!0},{id:`insurance-provider-details-${e}`,title:this.$t("clientMoneyPage-insuranceProviderDetails"),content:"",active:!0},{id:`risk-transfer-funds-${e}`,title:this.$t("clientMoneyPage-riskTransferFunds"),content:"",active:!0},{id:`representative-details-${e}`,title:this.$t("clientMoneyPage-representativeDetails"),content:"",active:!0}]},addInsuranceProvider(e){this.providers[e].insuranceProviders.push(new ee)},setClientMoneyAudit(){const e=new Vt;e.highestAmount1=0,e.highestAmount2=0,this.clientMoneyAudit=e},submit(e){var n,d,m,r,c,p,y;this.isSavingAlertOpened||(e?le({title:"Confirm",content:"Client Money is incomplete. Are you sure you wish to proceed?",confirmButtonText:"Proceed",saveDetailsText:"Complete Now",type:Xe.SAVEDETAILS,width:390,onSaveDetails:()=>{this.isSavingAlertOpened=!1},onConfirm:async()=>{await this.saveInfoAsync(!0,e)},onCancel:()=>{this.isSavingAlertOpened=!1},onClose:()=>{this.isSavingAlertOpened=!1}}):le({title:this.$t("common-alert-title"),content:this.$t("common-alert-content"),confirmButtonText:this.$t("common-alert-buttonText"),onConfirm:async()=>{await this.saveInfoAsync(!0)},onCancel:()=>{this.isSavingAlertOpened=!1},onClose:()=>{this.isSavingAlertOpened=!1}}),this.isSavingAlertOpened=!0,(r=(m=(d=(n=this.$refs)==null?void 0:n.formElement)==null?void 0:d.$el)==null?void 0:m.requestSubmit)==null||r.call(m),(y=(p=(c=this.$refs.formElement2)==null?void 0:c.$el)==null?void 0:p.requestSubmit)==null||y.call(p))},async saveInfoAsync(e=!1,n=!1){if(!this.currentCustomer)return;this.processInvalidFields(A.clientMoneyRoute,this.eventBus);const{email:d=""}=this.currentCustomer;this.isShowSavingText=e,this.isLoading=e,this.userSubmittedChangesService.hasUserSubmittedChangesToRemoteApi=!0,this.isSavingAlertOpened=!1,this.updateCustomerByEmailAsync(d,{clientMonies:this.providers,clientMoneyAudit:this.clientMoneyAudit}).then(()=>{e&&Qe({type:xe.SUCCESS,content:"Saved successfully.",interval:A.notificationPopupTimeOut}),this.isLoading=!1,this.isShowSavingText=!1,n&&setTimeout(()=>this.eventBus.emit(A.autoNextEvent),A.notificationPopupTimeOut)}).catch()},addCustomAccountTypeOption(e){this.accountTypeOptions=[...this.accountTypeOptions,{label:e,value:e}]},async isPraAuthorisedAsync(e,n){const d=await this.fcaService.getFirmPraStatusAsync(n);e.isPraAuthorized=d},async populateRelatedFieldsAsync(e,n,d){try{const m=await this.fcaService.getFirmAddressesDetailsAsync(n,"PPOB");if(!m.length)return;const r=this.helperService.formatFcaAddress(m[0]);e.tradingAddress=e.registeredAddress=r;const c=new et;if(c.number=this.helperService.cleanContactNumber(m[0]["Phone Number"]),e.contactNumber=c,e.website=m[0]["Website Address"],await this.isPraAuthorisedAsync(e,n),d){const p=await this.fetchInsurerRatingsAsync(d);p!=null&&p.rating&&(e.insurerRating=p==null?void 0:p.rating)}}catch{throw new Error("Something went wrong. Please try again later.")}}},created(){this.providers.length||this.addProvider(0),this.setClientMoneyAudit(),this.changeLifeCycleName(A.pageLifeCycleNameCreated),this.eventBus.on(A.formFieldChangedEvent,()=>{this.userSubmittedChangesService.hasUserSubmittedChangesToRemoteApi=!1})},async mounted(){this.isInitializing=!1;try{this.isLoading=!0;const{accounts:e={}}=await this.companiesHouseService.getCompanyProfileAsync(this.currentCompanyNumber),{made_up_to:n,period_start_on:d,period_end_on:m}=e.last_accounts??{},r="YYYY-MM-DD";n&&(this.accountMadeUpTo=N(n,r).unix()),d&&(this.accountPeriodStartOn=N(d,r).unix()),m&&(this.accountPeriodEndOn=N(m,r).unix())}catch{throw new Error(this.$t("common-general-error"))}finally{this.isLoading=!1}this.eventBus.emit(A.bottomBarEnableEvent,!0),this.eventBusFormSaved.on(A.formSavedEvent,e=>{this.submit(e)}),this.changeLifeCycleName(A.pageLifeCycleNameMounted),this.userSubmittedChangesService.hasUserSubmittedChangesToRemoteApi=!1},unmounted(){this.eventBus.emit(A.bottomBarEnableEvent,!1),this.eventBusFormSaved.off(A.formSavedEvent),this.isLoading=!1},setup(){const e=tt(),{changeLifeCycleName:n}=e,d=nt(),{processInvalidFields:m}=d;return{changeLifeCycleName:n,processInvalidFields:m}}}),te=e=>(me("data-v-a23146f5"),e=e(),ce(),e),Ot={class:"row gy-3"},Lt={class:"col-lg-6"},qt={class:"col-lg-6"},zt={class:"col-lg-10"},Kt={class:"col-lg-2"},Wt={class:"col-lg-12"},jt={class:"col-lg-12"},Ht={class:"col-lg-4"},Yt={class:"col-lg-4"},Gt={class:"col-lg-4"},Jt={class:"col-lg-12"},Zt={key:0,class:"col-lg-12"},Xt={class:"row align-items-center"},Qt={class:"col-lg-8"},xt={class:"col-lg-4"},en={class:"font-weight-normal"},tn={class:"row align-items-center"},nn={class:"col-lg-8"},on={class:"col-lg-4 text-right"},an=te(()=>a("p",{class:"mb-2 font-weight-normal"}," Please Update Risk Transfer Agreement (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size) ",-1)),sn=te(()=>a("p",{class:"mb-2 font-weight-normal"}," Please Upload Statutory Trust Client Account Confirmation Letter (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size) ",-1)),rn={class:"row gy-3"},ln={class:"col-lg-4"},dn={class:"col-lg-4"},un={class:"col-lg-4"},mn={class:"col-lg-4"},cn={class:"col-lg-4"},pn={class:"col-lg-4"},vn={class:"font-size-xl"},hn={class:"row"},fn={class:"row"},gn={key:0,class:"row gy-3 mb-3"},yn={class:"col-lg-12"},An=te(()=>a("p",{class:"mb-2 font-weight-normal"},[j(" Please upload a copy of the most recent Client Money Audit "),a("span",{class:"fineprint"}," (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size) ")],-1));function bn(e,n,d,m,r,c){const p=it,y=lt,l=st,g=ft,b=gt,w=J("InsurerRating"),P=J("KendoFirmFinderComponentAsync"),T=ve,h=he,I=fe,v=ge,f=ye,$=dt,U=ut,B=J("InuranceProviderTabs"),D=At,M=mt,G=yt,H=Ve,S=_e,F=ct,ne=rt,oe=pt,Se=vt,Te=at("sticky");return C(),k(Z,null,[o(p,{isLoading:e.isLoading,isShowSavingText:e.isShowSavingText},null,8,["isLoading","isShowSavingText"]),o(y),o(l,{title:e.$t("clientMoneyPage-title"),description:e.$t("clientMoneyPage-description",{firmName:e.currentFirmName}),routeName:e.helperService.removeStringSpacesThenSlash(e.AppConstants.clientMoneyRoute)},null,8,["title","description","routeName"]),o(ne,{onSubmit:e.submit},{default:u(()=>[o(F,{ref:"formElement"},{default:u(({form:Ie})=>[o(S,{items:e.providersTabs,"onUpdate:items":n[0]||(n[0]=V=>e.providersTabs=V),addable:!0,removable:!0,onAdd:e.addProvider,onRemove:e.removeProvider},Ae({_:2},[be(e.providersTabs,V=>({name:`content(${V.id})`,fn:u(({index:t})=>[o(H,{ref:"clientMoneyPanel",items:[V]},{"before-content":u(({item:R})=>[ht(o(g,{items:e.makeProviderNav(R.id),class:"clientMoneyNavPill",anchorable:""},null,8,["items"]),[[Te,{parentSelector:".CollapsiblePanel-body",stickyClass:"is-bg-white",marginTop:54,delay:1e3}]])]),content:u(({item:R})=>[o(H,{items:e.makeSubProviderPanels(R.id),accordion:!1,"hidden-items":[e.ClassificationEnum.MGA,e.ClassificationEnum.WholesaleBroker].includes(e.providers[t].classification)?[]:[`insurance-provider-details-${R.id}`]},{[`content-provider-details-${R.id}`]:u(()=>[a("div",Ot,[a("div",Lt,[o(b,{modelValue:e.providers[t].classification,"onUpdate:modelValue":s=>e.providers[t].classification=s,id:e.setUniqueIdentifier(`-classification-${t}`),name:`classification-${t}`,label:"Classification","data-items":e.classificationOptions,"value-primitive":""},null,8,["modelValue","onUpdate:modelValue","id","name","data-items"])]),a("div",qt,[o(w,{modelValue:e.providers[t].insurerRating,"onUpdate:modelValue":s=>e.providers[t].insurerRating=s,name:`insurerRating-${t}`,label:"Insurer Rating",unrated:!e.providers[t].insurerRating},null,8,["modelValue","onUpdate:modelValue","name","unrated"])]),a("div",zt,[o(P,{id:e.setUniqueIdentifier(`-companyInfo-${t}`),companyNameLabel:"Provider Name",company:{},companyName:e.providers[t].providerName,companyNumber:e.providers[t].companyNumber,firmReferenceNumber:e.providers[t].firmReferenceNumber,onOnCompanyDetailUpdated:s=>{e.providers[t].providerName=s.firmName,e.providers[t].companyNumber=s.companyNumber,e.providers[t].firmReferenceNumber=s.firmReferenceNumber,e.populateRelatedFieldsAsync(e.providers[t],s.firmReferenceNumber,s.firmName)},isInitializing:e.isInitializing},null,8,["id","companyName","companyNumber","firmReferenceNumber","onOnCompanyDetailUpdated","isInitializing"])]),a("div",Kt,[o(T,{modelValue:e.providers[t].isPraAuthorized,"onUpdate:modelValue":s=>e.providers[t].isPraAuthorized=s,id:e.setUniqueIdentifier(`-isPraAuthorized-${t}`),name:`isPraAuthorized-${t}`,label:"PRA Authorized","no-text":""},null,8,["modelValue","onUpdate:modelValue","id","name"])]),a("div",Wt,[o(h,{modelValue:e.providers[t].registeredAddress,"onUpdate:modelValue":s=>e.providers[t].registeredAddress=s,id:e.setUniqueIdentifier(`-registeredAddress-${t}`),name:`registeredAddress-${t}`,label:"Registered Address"},null,8,["modelValue","onUpdate:modelValue","id","name"])]),a("div",jt,[o(h,{modelValue:e.providers[t].tradingAddress,"onUpdate:modelValue":s=>e.providers[t].tradingAddress=s,id:e.setUniqueIdentifier(`-tradingAddress-${t}`),name:`tradingAddress-${t}`,label:"Trading Address"},null,8,["modelValue","onUpdate:modelValue","id","name"])]),a("div",Ht,[o(I,{modelValue:e.providers[t].emailAddress,"onUpdate:modelValue":s=>e.providers[t].emailAddress=s,id:e.setUniqueIdentifier(`-emailAddress-${t}`),name:`emailAddress-${t}`,label:"Email Address"},null,8,["modelValue","onUpdate:modelValue","id","name"])]),a("div",Yt,[o(v,{modelValue:e.providers[t].contactNumber,"onUpdate:modelValue":s=>e.providers[t].contactNumber=s,id:e.setUniqueIdentifier(`-contactNumber-${t}`),name:`contactNumber-${t}`,label:"Contact Number",isDataLoadedCompletely:!e.isInitializing},null,8,["modelValue","onUpdate:modelValue","id","name","isDataLoadedCompletely"])]),a("div",Gt,[o(f,{modelValue:e.providers[t].website,"onUpdate:modelValue":s=>e.providers[t].website=s,id:e.setUniqueIdentifier(`-website-${t}`),name:`website-${t}`,type:"url",label:"Website"},null,8,["modelValue","onUpdate:modelValue","id","name"])]),a("div",Jt,[o($,{modelValue:e.providers[t].withBindingAuthority,"onUpdate:modelValue":s=>e.providers[t].withBindingAuthority=s,reverse:"",wide:""},{text:u(()=>[j(" Does "+_(e.providers[t].providerName)+" provide "+_(e.currentFirmName)+" with Binding Authority? ",1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e.providers[t].withBindingAuthority?(C(),k("div",Zt,[a("div",Xt,[a("div",Qt," What was the date on which Terms of Business were agreed between "+_(e.providers[t].providerName)+" and "+_(e.currentFirmName)+"? ",1),a("div",xt,[o(U,{modelValue:e.providers[t].dateAgreed,"onUpdate:modelValue":s=>e.providers[t].dateAgreed=s,name:`dateAgreed-${t}`,id:e.setUniqueIdentifier(`-dateAgreed-${t}`),epoch:""},null,8,["modelValue","onUpdate:modelValue","name","id"])])])])):E("",!0)])]),[`content-insurance-provider-details-${R.id}`]:u(()=>[a("p",en,_(e.$t("clientMoneyPage-insuranceProviderDetailsBelow",{providerName:e.providers[t].providerName})),1),o(B,{modelValue:e.providers[t].insuranceProviders,"onUpdate:modelValue":s=>e.providers[t].insuranceProviders=s},null,8,["modelValue","onUpdate:modelValue"])]),[`content-risk-transfer-funds-${R.id}`]:u(()=>{var s;return[o(D,{items:[`Do you have a Risk Transfer Agreement in place with ${e.providers[t].providerName||""}?`,`Does ${e.providers[t].providerName||""} allow commingling of Risk Transfer Funds with Client Money?`,"Please specify the Account Type in which you collect and hold Premium payments."],"disabled-items":[!e.providers[t].haveRiskTransferAgreement&&2]},{"item-1":u(({item:O})=>[o($,{modelValue:e.providers[t].haveRiskTransferAgreement,"onUpdate:modelValue":L=>e.providers[t].haveRiskTransferAgreement=L,reverse:"",wide:"",text:O},null,8,["modelValue","onUpdate:modelValue","text"])]),"item-2":u(({item:O})=>[o($,{modelValue:e.providers[t].allowComminglingOfRiskTransferFunds,"onUpdate:modelValue":L=>e.providers[t].allowComminglingOfRiskTransferFunds=L,reverse:"",wide:"",text:O,disabled:!e.providers[t].haveRiskTransferAgreement},null,8,["modelValue","onUpdate:modelValue","text","disabled"])]),"item-3":u(({item:O})=>[a("div",tn,[a("div",nn,_(O),1),a("div",on,[o(b,{modelValue:e.providers[t].accountType,"onUpdate:modelValue":L=>e.providers[t].accountType=L,name:`accountType-${t}`,id:e.setUniqueIdentifier(`-accountType-${t}`),label:"Account Type","data-items":e.accountTypeOptions,"disabled-values":!e.providers[t].haveRiskTransferAgreement||!e.providers[t].allowComminglingOfRiskTransferFunds?e.disabledAccountTypes:[],addable:!0,"value-primitive":"",onAddCustom:e.addCustomAccountTypeOption},null,8,["modelValue","onUpdate:modelValue","name","id","data-items","disabled-values","onAddCustom"])])])]),_:2},1032,["items","disabled-items"]),e.providers[t].haveRiskTransferAgreement?(C(),k(Z,{key:0},[an,o(M,{class:"mb-3",name:`riskTransferAgreement-${t}`,id:e.setUniqueIdentifier(`-riskTransferAgreement-${t}`),stretched:"",multiple:"",dropzone:"",value:e.providers[t].haveRiskTransferAgreement,"allowed-extensions":[".pdf",".jpg","doc","docx"]},null,8,["name","id","value","allowed-extensions"])],64)):E("",!0),((s=e.providers[t].accountType)==null?void 0:s.value)==="Statutory Client Account"?(C(),k(Z,{key:1},[sn,o(M,{name:`statutoryTrustLetter-${t}`,id:e.setUniqueIdentifier(`-statutoryTrustLetter-${t}`),stretched:"",multiple:"",dropzone:"",value:e.providers[t].StatutoryTrustLetter,"allowed-extensions":[".pdf",".jpg","doc","docx"]},null,8,["name","id","value","allowed-extensions"])],64)):E("",!0)]}),[`content-representative-details-${R.id}`]:u(()=>[a("div",rn,[a("div",ln,[o(G,{modelValue:e.providers[t].firmRepresentative.title,"onUpdate:modelValue":s=>e.providers[t].firmRepresentative.title=s,name:`firmRepresentative.title-${t}`,id:e.setUniqueIdentifier(`-firmRepresentative.title-${t}`),label:"Title","is-required":!1},null,8,["modelValue","onUpdate:modelValue","name","id"])]),a("div",dn,[o(f,{modelValue:e.providers[t].firmRepresentative.forename,"onUpdate:modelValue":s=>e.providers[t].firmRepresentative.forename=s,name:`firmRepresentative.forename-${t}`,id:e.setUniqueIdentifier(`-firmRepresentative.forename-${t}`),label:"Forename(s)"},null,8,["modelValue","onUpdate:modelValue","name","id"])]),a("div",un,[o(f,{modelValue:e.providers[t].firmRepresentative.surname,"onUpdate:modelValue":s=>e.providers[t].firmRepresentative.surname=s,name:`firmRepresentative.surname-${t}`,id:e.setUniqueIdentifier(`-firmRepresentative.surname-${t}`),label:"Surname"},null,8,["modelValue","onUpdate:modelValue","name","id"])]),a("div",mn,[o(I,{modelValue:e.providers[t].firmRepresentative.emailAddress,"onUpdate:modelValue":s=>e.providers[t].firmRepresentative.emailAddress=s,name:`firmRepresentative.emailAddress-${t}`,id:e.setUniqueIdentifier(`-firmRepresentative.emailAddress-${t}`),label:"Email Address"},null,8,["modelValue","onUpdate:modelValue","name","id"])]),a("div",cn,[o(v,{modelValue:e.providers[t].firmRepresentative.contactNumber,"onUpdate:modelValue":s=>e.providers[t].firmRepresentative.contactNumber=s,name:`firmRepresentative.contactNumber-${t}`,id:e.setUniqueIdentifier(`-firmRepresentative.contactNumber-${t}`),label:"Contact Number",isDataLoadedCompletely:!e.isInitializing},null,8,["modelValue","onUpdate:modelValue","name","id","isDataLoadedCompletely"])]),a("div",pn,[o(f,{modelValue:e.providers[t].firmRepresentative.jobTitle,"onUpdate:modelValue":s=>e.providers[t].firmRepresentative.jobTitle=s,name:`firmRepresentative.jobTitle-${t}`,id:e.setUniqueIdentifier(`-firmRepresentative.jobTitle-${t}`),label:"Job Title","is-required":!1},null,8,["modelValue","onUpdate:modelValue","name","id"])])])]),_:2},1032,["items","hidden-items"])]),_:2},1032,["items"])])}))]),1032,["items","onAdd","onRemove"])]),_:1},512)]),_:1},8,["onSubmit"]),o(ne,null,{default:u(()=>[o(F,null,{default:u(({form:Ie})=>[o(Se,null,{title:u(()=>[a("span",vn,_(e.$t("clientMoneyPage-clientMoneyAudit")),1)]),default:u(()=>[o(D,{class:"ClientMoneyAuditList",items:[`Please specify the highest Account Balance between ${e.moment.unix(e.accountPeriodStartOn).format("DD/MM/Y")} and ${e.moment.unix(e.accountPeriodEndOn).format("DD/MM/Y")}`,`Please specify the highest Account Balance since ${e.moment.unix(e.accountMadeUpTo).format("DD/MM/Y")}`,`Has ${e.currentFirmName||""} obtained a client money audit in the last 12 months?`,`Does ${e.currentFirmName||""} undertake a client account reconciliation at least once every 25 business days?`]},{"item-1":u(({item:V})=>[a("p",null,_(V),1),a("div",hn,[o(oe,{class:"col-lg-6",name:"highestAmount1",label:"Amount",id:e.setUniqueIdentifier("-client-money-highest-amount1"),value:e.clientMoneyAudit.highestAmount1,onOnValueChange:n[1]||(n[1]=t=>e.clientMoneyAudit.highestAmount1=t)},null,8,["id","value"])])]),"item-2":u(({item:V})=>[a("p",null,_(V),1),a("div",fn,[o(oe,{class:"col-lg-6",name:"highestAmount2",label:"Amount",id:e.setUniqueIdentifier("-client-money-highest-amount2"),value:e.clientMoneyAudit.highestAmount2,onOnValueChange:n[2]||(n[2]=t=>e.clientMoneyAudit.highestAmount2=t)},null,8,["id","value"])])]),"item-3":u(({item:V})=>[o($,{modelValue:e.clientMoneyAudit.hasObtainedInLastYear,"onUpdate:modelValue":n[3]||(n[3]=t=>e.clientMoneyAudit.hasObtainedInLastYear=t),reverse:"",wide:"",text:V},null,8,["modelValue","text"]),e.clientMoneyAudit.hasObtainedInLastYear?(C(),k("div",gn,[o(U,{class:"col-lg-4",modelValue:e.clientMoneyAudit.reviewPeriodStartDate,"onUpdate:modelValue":n[4]||(n[4]=t=>e.clientMoneyAudit.reviewPeriodStartDate=t),label:"Review Period Start Date",name:"reviewPeriodStartDate",id:e.setUniqueIdentifier("-reviewPeriodStartDate"),epoch:""},null,8,["modelValue","id"]),o(U,{class:"col-lg-4",modelValue:e.clientMoneyAudit.reviewPeriodEndtDate,"onUpdate:modelValue":n[5]||(n[5]=t=>e.clientMoneyAudit.reviewPeriodEndtDate=t),label:"Review Period End Date",name:"reviewPeriodEndDate",id:e.setUniqueIdentifier("-reviewPeriodEndDate"),epoch:""},null,8,["modelValue","id"]),o(U,{class:"col-lg-4",modelValue:e.clientMoneyAudit.reportDate,"onUpdate:modelValue":n[6]||(n[6]=t=>e.clientMoneyAudit.reportDate=t),label:"Date of Report",name:"reportDate",id:e.setUniqueIdentifier("-reportDate"),epoch:""},null,8,["modelValue","id"]),a("div",yn,[An,o(M,{name:"StatutoryTrustLetter",stretched:"",multiple:"",dropzone:"","allowed-extensions":[".pdf",".jpg","doc","docx"]},null,8,["allowed-extensions"])])])):E("",!0)]),"item-4":u(({item:V})=>[o($,{modelValue:e.clientMoneyAudit.undertakeClientAccountRecon,"onUpdate:modelValue":n[7]||(n[7]=t=>e.clientMoneyAudit.undertakeClientAccountRecon=t),reverse:"",wide:"",text:V},null,8,["modelValue","text"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})],64)}const $n=pe(Et,[["render",bn],["__scopeId","data-v-a23146f5"]]);export{$n as default};
