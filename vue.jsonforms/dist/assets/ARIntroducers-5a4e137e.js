import{j as K,bi as me,D as O,I as J,bj as Ce,bk as be,bl as le,a3 as ue,A as _,_ as G,o as f,m as g,n as i,w as n,bg as Se,bm as Ne,r as m,x as c,P as o,y as z,J as U,K as j,bn as Ae,bo as _e,bp as pe,N as he,O as Y,bq as we,a2 as Fe,br as Te,bs as $e,bt as B,q as M,L as Q,S as fe,W as Ie,bh as Re,bu as Z,aa as ke,af as ve,aj as H,ay as X,ap as Le,az as Pe,aA as q,bv as De,bw as Ve,bx as ze,aJ as Ee,aK as Oe,aL as Be,aM as Ue,Q as qe,aO as Me,ba as Ke,aU as Ge,by as je,ab as Je,bz as We,ac as He,aq as W,l as ce,am as Xe,bd as Ye,au as Qe,av as Ze,bA as xe,as as et,at as tt,aC as it,aG as rt,aH as st}from"./index-9d6d511f.js";const nt=K({name:"IntroducerList",components:{GridPdfExport:me},props:{introducers:{type:Array,default:()=>[]}},data(){return{helperService:O.resolve(J.name),hasIntroducers:!1,columnMenu:!0,gridData:[],skip:0,take:7,group:[],filter:null,isShowTasksModal:!1,fcaFirmRefNo:"",isGridVisible:!1,introducersInternal:[],selectedProducts:[],selectedStatus:{label:"",value:""},activeIntroducerTableGroup:"current",introducerTableGroups:[{title:"Current",value:"current"},{title:"All",value:"all"}],sortParams:[],isInitializing:!0,itemsToPDF:[]}},mounted(){this.introducersInternal=this.introducers,this.isInitializing=!1},computed:{ProviderRepresentative(){return Ce},ProviderIntroducerDetails(){return be},introducerColumns(){return[{field:"details.name",title:"Introducer Name",width:"200",resizable:!0},{field:"details.fcaFirmRefNo",title:"FRN",width:70,resizable:!0},{field:"products",title:"Products",resizable:!0},{field:"referrals",title:"Referrals",resizable:!0},{field:"introducer",title:"Introducer Representative",resizable:!0},{field:"status",title:"Status"},{field:"tasks",title:"Tasks",width:70,sortable:!1},{field:"actions",title:" ",className:"text-center"}]}},methods:{orderBy:le,closeForm(){this.isShowTasksModal=!1},emitViewIntroducer(e){this.$emit("viewIntroducerList",e)},emitEditIntroducer(e){this.$emit("editIntroducerList",e)},emitAddIntroducer(){this.$emit("addIntroducer")},emitViewIntroducerFromCard(e){this.$emit("viewIntroducerCard",e)},emitIntroducerFromCard(e){this.$emit("editIntroducerCard",e)},emitFilterIntroducersByProductsStatus(){this.introducersInternal=this.introducers.filter(e=>{const t=e.products.map(r=>r.name),a=this.selectedProducts.every(r=>t.includes(r)),l=e.status===this.selectedStatus.value;return a&&l})},emitSearchIntroducersByNameFRN(e){if(!e){this.introducersInternal=this.introducers;return}this.introducersInternal=this.introducers.filter(t=>{if(!t.details.name||!t.details.fcaFirmRefNo)return!1;const a=t.details.name.toLowerCase().includes(e.toLowerCase()),l=t.details.fcaFirmRefNo.toLowerCase().includes(e.toLowerCase());return a||l})},emitClearFilters(){this.selectedProducts=[],this.selectedStatus={label:"",value:""}},emitCloseFilter(){this.introducersInternal=this.introducers,this.emitClearFilters()},exportToPdf(e){const t=this.formatIntroducersPdfData(e);this.itemsToPDF=le(t,this.sortParams),this.$refs.gridPdfExport.save(this.itemsToPDF)},formatIntroducersPdfData(e){return e.map(t=>{var a;return{...t,"details.name":`${(a=t.details)==null?void 0:a.name} `,"details.fcaFirmRefNo":t.details.fcaFirmRefNo,praAuthorised:t.details.praAuthorised,products:t.products,introducer:`${t.representative.forename} ${t.representative.surname}`,status:t.status,tasks:t.tasks}})},getProducts(){return ue.getProducts()},getStatuses(){return ue.getStatuses().map(e=>({label:e,value:e}))},handleStatusChange(e){this.selectedStatus=e},handleSort(e){this.sortParams=e.sort},handlePage(e){this.skip=e.page.skip,this.take=e.page.take},setUniqueIdentifier(e){const t=`${_.arIntroducersRoute}-list${e}`;return this.helperService.removeStringSpacesThenSlash(t)}}}),ot={style:{color:"#309161","font-size":"14px","font-weight":"400","text-decoration":"underline"}},at=["href"],dt={style:{"text-decoration":"underline"}},lt={class:"text-center"},ut={class:"row-name"},ct={class:"d-inline-flex gap-2"},mt={class:"row mt-2"};function pt(e,t,a,l,r,d){var I;const v=Ae,u=me,w=_e,h=pe,b=he,y=Y,F=we,E=Fe,T=$e,p=Te;return f(),g(U,null,[i(u,{ref:"gridPdfExport"},{default:n(()=>[Se(i(v,{"data-items":e.itemsToPDF,columns:e.introducerColumns},null,8,["data-items","columns"]),[[Ne,e.isGridVisible]])]),_:1},512),i(p,{isSortable:"",columns:e.introducerColumns,items:e.orderBy(e.introducersInternal,e.sortParams).slice(e.skip,e.skip+e.take),groups:e.introducerTableGroups,"no-actionbar":!1,"search-placeholder":"Search Name, FRN","add-button-text":"Add New Introducer",activeGroup:e.activeIntroducerTableGroup,"onUpdate:activeGroup":t[1]||(t[1]=s=>e.activeIntroducerTableGroup=s),sort:e.sortParams,handleSortChange:e.handleSort,handlePageChange:e.handlePage,pageable:!0,skip:e.skip,take:e.take,total:((I=e.introducersInternal)==null?void 0:I.length)??0,onAdd:e.emitAddIntroducer,onFilter:e.emitFilterIntroducersByProductsStatus,onSearch:e.emitSearchIntroducersByNameFRN,onClear:e.emitClearFilters,onClose:e.emitCloseFilter,onAddExport:e.exportToPdf},{"cell-details.name":n(({item:{details:s}})=>[i(w,{rounded:"full",type:"text",text:(s==null?void 0:s.name)??""},{text:n(()=>[m(c(s==null?void 0:s.name),1)]),_:2},1032,["text"])]),"cell-details.fcaFirmRefNo":n(({item:{details:s}})=>[o("div",ot,[s!=null&&s.fcaFirmRefNo?(f(),g("a",{key:0,href:e.helperService.generateFCASearchUrl((s==null?void 0:s.fcaFirmRefNo)??""),target:"_blank",rel:"noopener noreferrer",style:{color:"#309161","font-size":"14px","font-weight":"400","text-decoration":"underline"}},c(s==null?void 0:s.fcaFirmRefNo),9,at)):z("",!0)])]),"cell-products":n(({item:{products:s}})=>[m(c("")),o("span",dt,c((s==null?void 0:s.length)>1?"+2":""),1)]),"cell-introducer":n(({item:{representative:s}})=>[i(w,{rounded:"full",type:"text",text:`${s==null?void 0:s.forename} ${s==null?void 0:s.surname}`},{text:n(()=>[m(c(s==null?void 0:s.forename)+" "+c(s==null?void 0:s.surname),1)]),_:2},1032,["text"])]),"cell-status":n(({item:{status:s}})=>[i(h,{"theme-color":s==="Complete"?"success-tint":"warning-tint"},{default:n(()=>[m(c(s),1)]),_:2},1032,["theme-color"])]),"cell-tasks":n(({item:{tasks:s}})=>[o("div",lt,[o("span",ut,c((s==null?void 0:s.length)??0),1)])]),"cell-actions":n(({item:{id:s}})=>[o("div",ct,[i(y,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"View",class:"ActionButton",onClick:S=>e.emitViewIntroducer(s)},{default:n(()=>[i(b,{symbol:"eye",size:"20"})]),_:2},1032,["onClick"]),i(y,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"Edit",class:"ActionButton",onClick:S=>e.emitEditIntroducer(s)},{default:n(()=>[i(b,{symbol:"edit-pen",size:"20"})]),_:2},1032,["onClick"])])]),"filter-fields":n(({})=>[i(F,{name:"products",id:e.setUniqueIdentifier("-products"),label:"Products","data-items":e.getProducts(),class:"mb-3",value:e.selectedProducts,onOnValueChange:t[0]||(t[0]=s=>{e.selectedProducts=s}),isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","data-items","value","isDataLoadedCompletely"]),i(E,{name:"status",id:e.setUniqueIdentifier("-status"),label:"Status","data-items":e.getStatuses(),class:"mb-3",value:e.selectedStatus,onOnValueChange:e.handleStatusChange,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","data-items","value","onOnValueChange","isDataLoadedCompletely"])]),card:n(()=>[o("div",mt,[(f(!0),g(U,null,j(e.introducers,(s,S)=>{var N,A;return f(),g("div",{class:"col-lg-4",key:s.id},[i(T,{cardId:s.id,cardName:(N=s.details)==null?void 0:N.name,cardfcaFirmRefNo:(A=s.details)==null?void 0:A.fcaFirmRefNo,cardTasks:s.tasks,cardIndex:S,onViewProvider:e.emitViewIntroducerFromCard,onEditProvider:e.emitIntroducerFromCard},null,8,["cardId","cardName","cardfcaFirmRefNo","cardTasks","cardIndex","onViewProvider","onEditProvider"])])}),128))])]),_:1},8,["columns","items","groups","activeGroup","sort","handleSortChange","handlePageChange","skip","take","total","onAdd","onFilter","onSearch","onClear","onClose","onAddExport"])],64)}const ht=G(nt,[["render",pt]]),ft=K({name:"ViewIntroducerModal",props:{introducer:{type:B,default:()=>[]}},data(){return{hasIntroducers:!1,filter:null,isShowTasksModal:!1,fcaFirmRefNo:"",helperService:O.resolve(J.name)}},methods:{closeForm(){this.isShowTasksModal=!1},emitViewEditProvider(e){this.$emit("edit-introducer",e)},emitViewIntroducerPermissions(e){this.$emit("view-introducer-permissions",e)}}});const It={class:"d-flex flex-row vstack align-center"},vt={class:"introducer-name"},yt={class:"hstack align-center"},gt={class:"vstack"},Ct={class:"another-text-style text-width"},bt={class:"vstack"},St={class:"another-text-style text-width"},Nt={class:"vstack"},At={class:"another-text-style text-width"},_t={class:"vstack"},wt={class:"another-text-style"},Ft={class:"vstack"},Tt={class:"another-text-style"},$t={class:"vstack"},Rt={class:"another-text-style text-width"},kt={class:"vstack"},Lt={class:"another-text-style text-width"},Pt={class:"vstack"},Dt={class:"another-text-style text-width"},Vt={class:"vstack"},zt={class:"another-text-style text-width"},Et={class:"vstack"},Ot={class:"another-text-style text-width"},Bt={class:"vstack"},Ut={class:"another-text-style text-width"},qt={class:"vstack"},Mt={class:"another-text-style text-width"},Kt={class:"vstack"},Gt={class:"another-text-style text-width"},jt={class:"vstack"},Jt={class:"another-text-style text-width"};function Wt(e,t,a,l,r,d){const v=pe,u=he,w=Y,h=Q,b=fe,y=Ie,F=Re,E=Z;return f(),M(E,{ref:"modalElement"},{default:n(()=>{var T;return[o("div",It,[o("text",vt,c((T=e.introducer.details)==null?void 0:T.name),1)]),o("div",yt,[i(v,{"theme-color":"success-tint",style:{"margin-top":"5px"}},{default:n(()=>[m(c("Active")+" ")]),_:1}),i(w,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"Edit",class:"ActionButton",onClick:t[0]||(t[0]=p=>e.emitViewEditProvider(e.introducer.id))},{default:n(()=>[i(u,{symbol:"edit-pen",size:"20"})]),_:1})]),i(h,{class:"flex-grow-1 section-title k-color-primary"},{default:n(()=>[m(c(e.$t("introducersPage-formHeader")),1)]),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>{var p,I,s,S;return[o("div",gt,[i(h,{class:"text-style text-width"},{default:n(()=>[m(" Introducer Name ")]),_:1}),o("text",Ct,c((p=e.introducer.details)==null?void 0:p.name),1)]),o("div",bt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Company Number")]),_:1}),o("text",St,c((s=(I=e.introducer)==null?void 0:I.details)==null?void 0:s.companyNumber),1)]),o("div",Nt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Firm Reference Number")]),_:1}),o("text",At,c((S=e.introducer.details)==null?void 0:S.fcaFirmRefNo),1)])]}),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>[i(y,{bodyClass:"!k-p-0"},{default:n(()=>[i(b,{class:"k-m-0 k-d-flex k-justify-items-center k-align-items-center k-py-1 k-px-3",orientation:"horizontal",gap:20,align:{horizontal:"start"}},{default:n(()=>[i(u,{symbol:"account-setting-40",size:"20"}),i(h,{class:"flex-grow-1 section-title k-color-primary"},{default:n(()=>[m("View Permissions")]),_:1}),i(w,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"Upload",class:"ActionButton",onClick:t[1]||(t[1]=p=>e.emitViewIntroducerPermissions(e.introducer.details.fcaFirmRefNo))},{default:n(()=>[i(u,{symbol:"download-file-41",size:"20"})]),_:1})]),_:1})]),_:1})]),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>{var p,I;return[o("div",_t,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Registered Address")]),_:1}),o("text",wt,c((I=(p=e.introducer)==null?void 0:p.details)==null?void 0:I.registeredAddress),1)])]}),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>{var p,I;return[o("div",Ft,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Trading Address")]),_:1}),o("text",Tt,c((I=(p=e.introducer)==null?void 0:p.details)==null?void 0:I.tradingAddress),1)])]}),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>{var p,I,s,S,N,A;return[o("div",$t,[i(h,{class:"text-style text-width"},{default:n(()=>[m(" Email Address ")]),_:1}),o("text",Rt,c((I=(p=e.introducer)==null?void 0:p.details)==null?void 0:I.emailAddress),1)]),o("div",kt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Contact Number")]),_:1}),o("text",Lt,c((S=(s=e.introducer)==null?void 0:s.details)==null?void 0:S.contactNumberDisplay),1)]),o("div",Pt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Website")]),_:1}),o("text",Dt,c((A=(N=e.introducer)==null?void 0:N.details)==null?void 0:A.website),1)])]}),_:1}),o("div",null,[i(F,{height:1,width:960,spacing:0,style:{"margin-top":"20px","margin-bottom":"20px"}})]),i(h,{class:"flex-grow-1 section-title k-color-primary"},{default:n(()=>[m(c(e.$t("introducersPage-introducerRepresentativeText")),1)]),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>{var p,I,s,S,N,A;return[o("div",Vt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Title")]),_:1}),o("text",zt,c((I=(p=e.introducer)==null?void 0:p.representative)==null?void 0:I.title),1)]),o("div",Et,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Forename(s)")]),_:1}),o("text",Ot,c((S=(s=e.introducer)==null?void 0:s.representative)==null?void 0:S.forename),1)]),o("div",Bt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Surname")]),_:1}),o("text",Ut,c((A=(N=e.introducer)==null?void 0:N.representative)==null?void 0:A.surname),1)])]}),_:1}),i(b,{orientation:"horizontal",class:"mt-4"},{default:n(()=>{var p,I,s,S,N,A;return[o("div",qt,[i(h,{class:"text-style text-width"},{default:n(()=>[m(" Email Address ")]),_:1}),o("text",Mt,c((I=(p=e.introducer)==null?void 0:p.representative)==null?void 0:I.emailAddress),1)]),o("div",Kt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Contact Number")]),_:1}),o("text",Gt,c((S=(s=e.introducer)==null?void 0:s.representative)==null?void 0:S.contactNumberDisplay),1)]),o("div",jt,[i(h,{class:"text-style text-width"},{default:n(()=>[m("Job Title")]),_:1}),o("text",Jt,c((A=(N=e.introducer)==null?void 0:N.representative)==null?void 0:A.jobTitle),1)])]}),_:1})]}),_:1},512)}const Ht=G(ft,[["render",Wt],["__scopeId","data-v-64ba7b2b"]]),Xt=K({name:"IntroducerFormModal",components:{KendoFirmFinderComponentAsync:ke(()=>Pe(()=>import("./KendoFirmFinderComponent-9a5bf623.js"),["assets/KendoFirmFinderComponent-9a5bf623.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/KendoFirmFinderComponent-d11737a3.css"]))},props:{introducer:B,isAdd:Boolean,saving:Boolean,isCompany:{type:Boolean,default:void 0}},data(){return{fcaService:O.resolve(ve.name),helperService:O.resolve(J.name),introducerInputFirm:new H,isInitializing:!0,introducerContactNumber:new X,isIntroducerAddressesTheSame:!1,isCompanySelected:this.isCompany,firmReferenceNumber:"",introducerInternal:this.introducer??new B}},computed:{OnboardingType(){return Le},ContactNumber(){return X},AppConstants(){return _},minimumRequiredFieldsAreNotEmptyForCompany(){return this.introducerInternal.details.name&&this.introducerInternal.details.companyNumber&&this.introducerInternal.details.fcaFirmRefNo&&this.introducerInternal.details.emailAddress},minimumRequiredFieldsAreNotEmptyForSoleTrader(){return this.introducerInternal.details.foreName&&this.introducerInternal.details.emailAddress},allRequiredFieldsAreNotEmptyForCompany(){return this.introducerInternal.details.name&&this.introducerInternal.details.companyNumber&&this.introducerInternal.details.fcaFirmRefNo&&this.introducerInternal.details.registeredAddress&&this.introducerInternal.details.tradingAddress&&this.introducerInternal.details.emailAddress&&this.introducerInternal.details.contactNumber&&this.introducerInternal.representative.forename&&this.introducerInternal.representative.surname&&this.introducerInternal.representative.emailAddress&&this.introducerInternal.representative.contactNumber&&this.introducerInternal.representative.jobTitle},allRequiredFieldsAreNotEmptyForSoleTrader(){return this.introducerInternal.details.foreName&&this.introducerInternal.details.fcaFirmRefNo&&this.introducerInternal.details.homeAddress&&this.introducerInternal.details.tradingAddress&&this.introducerInternal.details.emailAddress&&this.introducerInternal.details.contactNumber},isEmailValid(){return this.introducerInternal.details.emailAddress?this.helperService.checkIfEmailFormatIsValid(this.introducerInternal.details.emailAddress):!1}},mounted(){var e,t,a;this.introducerInternal=this.introducer??new B,this.introducerInputFirm.firmName=(e=this.introducer)==null?void 0:e.details.name,this.introducerInputFirm.companyNumber=(t=this.introducer)==null?void 0:t.details.companyNumber,this.introducerInputFirm.firmReferenceNumber=(a=this.introducer)==null?void 0:a.details.fcaFirmRefNo},methods:{setUniqueIdentifier(e){const t=`${_.arIntroducersRoute}${e}`;return this.helperService.removeStringSpacesThenSlash(t)},handleSubmit(e){return this.$emit("submit",{...this.introducer||{},...this.introducerInternal}),e},onIntroducerDetailUpdated(e){this.introducerInternal.details.name=e.firmName,this.introducerInternal.details.companyNumber=e.companyNumber,this.introducerInternal.details.fcaFirmRefNo=e.firmReferenceNumber,this.introducerInputFirm=e,this.introducerInternal.details.registeredAddress=e.address,this.introducerInternal.details.isCompany=this.isCompanySelected,this.getFCADetails()},async getFCADetails(){var t,a,l;const e=await this.fcaService.getFirmAddressesDetailsAsync(this.introducerInternal.details.fcaFirmRefNo,"PPOB");if((e==null?void 0:e.length)>0){const r=e[0],d=JSON.parse(JSON.stringify(r));this.introducerContactNumber={dialCode:d.dialCode,country:d.country,countryCode:d.countryCode,number:d["Phone Number"]};const v=d["Phone Number"].substring(3);this.introducerInternal.details.contactNumber=v,this.introducerInternal.details.website=d["Website Address"];let u="";if(u+=`${d["Address Line 1"]?d["Address Line 1"]:""}`,u+=`${d["Address Line 2"]?`, ${d["Address Line 2"]}`:""}`,u+=`${r.town?`, ${r.town}`:""}`,u+=`${r.country?`, ${r.country}`:""}`,u+=`${r.postcode?`, ${r.postcode}`:""}`,this.introducerInternal.details.tradingAddress=u,r.country&&r.postcode&&r.town){if((t=this.introducerInternal.details.registeredAddress)!=null&&t.toUpperCase().includes(r==null?void 0:r.country)&&((a=this.introducerInternal.details.registeredAddress)!=null&&a.includes(r==null?void 0:r.postcode))&&((l=this.introducerInternal.details.registeredAddress)!=null&&l.includes(r==null?void 0:r.town))){this.introducerInternal.details.isTradingSameAsRegisteredAddress=!0,this.isIntroducerAddressesTheSame=!0;return}this.introducerInternal.details.isTradingSameAsRegisteredAddress=!1,this.isIntroducerAddressesTheSame=!1}}},onToggleTradingAddress(){this.isIntroducerAddressesTheSame=!this.isIntroducerAddressesTheSame,this.isIntroducerAddressesTheSame?this.introducer.details.tradingAddress=this.introducer.details.registeredAddress??"":this.introducer.details.tradingAddress=""},onFullNameValueChanged(e){this.introducerInternal.details.foreName=e[0],this.introducerInternal.details.lastName=e[1],this.introducerInternal.details.isCompany=!1},onSearchSoleTraderResult(e){this.firmReferenceNumber=e.firmReferenceNo,this.introducerInternal.details.fcaFirmRefNo=e.firmReferenceNo}}}),Yt={key:0},Qt={key:1,class:"row"},Zt={class:"col-sm-8"},xt={class:"col-sm-4"},ei={key:2},ti={key:3},ii={key:4},ri={key:0},si={key:0},ni={class:"text-right"};function oi(e,t,a,l,r,d){const v=Q,u=De,w=q("KendoFirmFinderComponentAsync"),h=Ve,b=ze,y=fe,F=Ee,E=Oe,T=Be,p=Ue,I=qe,s=Ie,S=Me,N=Y,A=Ke,ye=Ge,ge=Z;return f(),M(ge,{ref:"modalElement",title:`${e.isAdd?"Add New Introducer":"Edit"}`,isTitleCentered:!e.isAdd},{default:n(()=>[i(ye,{initialValues:e.introducer,onSubmit:e.handleSubmit},{default:n(()=>[i(A,null,{default:n(()=>[i(s,null,{default:n(()=>[i(v,{class:"flex-grow-1 section-title k-color-primary"},{default:n(()=>[m(c(e.$t("introducersPage-formHeader")),1)]),_:1}),i(y,{class:"my-3",orientation:"vertical",gap:20,align:{vertical:"top"}},{default:n(()=>{var $,R,k,L,P,D,C,x,ee,te,ie,re;return[i(u,{id:e.setUniqueIdentifier("-introducerFormModal.chooseOneCompanyOrSoleTrader"),name:"introducerFormModal.chooseOneCompanyOrSoleTrader",isRequired:!0,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing,value:e.isCompanySelected,onOnValueChange:t[0]||(t[0]=V=>{e.isCompanySelected=V,e.introducer.details.isCompany=V}),questionText:"Is Introducer a Company or Sole Trader? ",firstOptionText:"Company",secondOptionText:"Sole Trader"},null,8,["id","isDataLoadedCompletely","value"]),e.isCompanySelected?(f(),g("div",Yt,[i(w,{id:e.setUniqueIdentifier("-introducerInputFirm"),companyNameLabel:"Introducer Name",company:e.introducerInputFirm,companyName:(R=($=e.introducerInternal)==null?void 0:$.details)==null?void 0:R.name,companyNumber:(L=(k=e.introducerInternal)==null?void 0:k.details)==null?void 0:L.companyNumber,firmReferenceNumber:(D=(P=e.introducerInternal)==null?void 0:P.details)==null?void 0:D.fcaFirmRefNo,isInitializing:e.isInitializing,onOnCompanyDetailUpdated:e.onIntroducerDetailUpdated,onboardingType:e.OnboardingType.Ar.toString()},null,8,["id","company","companyName","companyNumber","firmReferenceNumber","isInitializing","onOnCompanyDetailUpdated","onboardingType"])])):z("",!0),e.isCompanySelected===!1&&e.isCompanySelected!==void 0?(f(),g("div",Qt,[i(y,{orientation:"horizontal",gap:20,align:{horizontal:"start"}},{default:n(()=>{var V,se,ne,oe,ae,de;return[o("div",Zt,[i(h,{gap:20,id:e.setUniqueIdentifier("-introducer-soleTraderName"),isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing,firstName:(se=(V=e.introducer)==null?void 0:V.details)==null?void 0:se.foreName,lastName:(oe=(ne=e.introducer)==null?void 0:ne.details)==null?void 0:oe.lastName,onOnFullNameChange:e.onFullNameValueChanged,onOnFinishedSearch:e.onSearchSoleTraderResult},null,8,["id","isDataLoadedCompletely","firstName","lastName","onOnFullNameChange","onOnFinishedSearch"])]),o("div",xt,[i(b,{id:e.setUniqueIdentifier("-firmReferenceNumber"),name:"firmReferenceNumber",label:"Firm Reference Number",placeholder:e.$t("common-firmref-text"),isEditable:!1,value:(de=(ae=e.introducerInternal)==null?void 0:ae.details)==null?void 0:de.fcaFirmRefNo,maxLength:7,isValueReactive:!0},null,8,["id","placeholder","value"])])]}),_:1})])):z("",!0),e.isCompanySelected?(f(),g("div",ei,[i(F,{id:e.setUniqueIdentifier("-introducer.details.registeredAddress"),name:"introducer.details.registeredAddress",class:"mt-2",label:"Registered Address",onOnValueChange:t[1]||(t[1]=V=>e.introducerInternal.details.registeredAddress=V),value:(x=(C=e.introducerInternal)==null?void 0:C.details)==null?void 0:x.registeredAddress,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"])])):z("",!0),!e.isCompanySelected&&e.isCompanySelected!==void 0?(f(),g("div",ti,[i(F,{id:e.setUniqueIdentifier("-introducer.details.homeAddress"),name:"introducer.details.homeAddress",class:"mt-2",label:"Home Address",onOnValueChange:t[2]||(t[2]=V=>e.introducerInternal.details.homeAddress=V),value:(te=(ee=e.introducerInternal)==null?void 0:ee.details)==null?void 0:te.homeAddress,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"])])):z("",!0),e.isCompanySelected!==void 0?(f(),g("div",ii,[i(E,{id:e.setUniqueIdentifier("-introducer.details.tradingAddress"),name:"introducer.details.tradingAddress",class:"mt-2",label:"Trading Address",value:(re=(ie=e.introducerInternal)==null?void 0:ie.details)==null?void 0:re.tradingAddress,isChecked:e.isIntroducerAddressesTheSame,sameAsLabel:e.$t("same-as-home-address"),onOnValueChange:t[3]||(t[3]=V=>e.introducerInternal.details.tradingAddress=V),onOnToggle:e.onToggleTradingAddress,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isChecked","sameAsLabel","onOnToggle","isDataLoadedCompletely"])])):z("",!0)]}),_:1}),e.isCompanySelected!==void 0?(f(),g("div",ri,[i(y,{class:"my-3",orientation:"horizontal",gap:20,align:{horizontal:"start"}},{default:n(()=>{var $,R,k,L,P,D;return[i(T,{id:e.setUniqueIdentifier("-introducer.details.emailAddress"),name:"introducer.details.emailAddress",class:"col",onOnValueChange:t[4]||(t[4]=C=>e.introducerInternal.details.emailAddress=C),value:(R=($=e.introducerInternal)==null?void 0:$.details)==null?void 0:R.emailAddress,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"]),i(p,{id:e.setUniqueIdentifier("-introducer.details.contactNumber"),name:"introducer.details.contactNumber",label:"Contact Number",class:"col",value:(L=(k=e.introducerInternal)==null?void 0:k.details)==null?void 0:L.contactNumber,onOnValueChange:t[5]||(t[5]=C=>e.introducerInternal.details.contactNumber=C),isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"]),i(I,{id:e.setUniqueIdentifier("-introducer.details.website"),name:"introducer.details.website",class:"col",label:"Website",isRequired:!1,onOnValueChange:t[6]||(t[6]=C=>e.introducer.details.website=C),value:(D=(P=e.introducerInternal)==null?void 0:P.details)==null?void 0:D.website,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"])]}),_:1})])):z("",!0)]),_:1}),e.isCompanySelected?(f(),g("div",si,[i(s,null,{default:n(()=>[i(v,{class:"flex-grow-1 section-title k-color-primary"},{default:n(()=>[m(c(e.$t("introducersPage-introducerRepresentativeText")),1)]),_:1}),i(y,{class:"my-3",orientation:"horizontal",gap:20,align:{horizontal:"start"}},{default:n(()=>{var $,R,k,L,P,D;return[i(S,{name:"introducer.representative.title",class:"col",label:"Title",id:e.setUniqueIdentifier("-introducer.representative.title"),"is-required":!1,value:(R=($=e.introducer)==null?void 0:$.representative)==null?void 0:R.title,onOnValueChange:t[7]||(t[7]=C=>e.introducerInternal.representative.title=C),isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["name","id","value","isDataLoadedCompletely"]),i(I,{id:e.setUniqueIdentifier("-introducer.representative.forename"),name:"introducer.representative.forename",class:"col",label:"Forename(s)",onOnValueChange:t[8]||(t[8]=C=>e.introducerInternal.representative.forename=C),isCapitalizeFirstLetter:!0,value:(L=(k=e.introducerInternal)==null?void 0:k.representative)==null?void 0:L.forename,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"]),i(I,{id:e.setUniqueIdentifier("-introducer.representative.surname"),name:"introducer.representative.surname",class:"col",label:"Surname",onOnValueChange:t[9]||(t[9]=C=>e.introducerInternal.representative.surname=C),isCapitalizeFirstLetter:!0,value:(D=(P=e.introducerInternal)==null?void 0:P.representative)==null?void 0:D.surname,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"])]}),_:1}),i(y,{class:"my-3",orientation:"horizontal",gap:20,align:{horizontal:"start"}},{default:n(()=>{var $,R,k,L,P,D;return[i(T,{id:e.setUniqueIdentifier("-introducer.representative.emailAddress"),name:"introducer.representative.emailAddress",class:"col",onOnValueChange:t[10]||(t[10]=C=>e.introducerInternal.representative.emailAddress=C),value:(R=($=e.introducerInternal)==null?void 0:$.representative)==null?void 0:R.emailAddress,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"]),i(p,{id:e.setUniqueIdentifier("-introducer.representative.contactNumber"),name:"introducer.representative.contactNumber",label:"Contact Number",class:"col",value:(L=(k=e.introducerInternal)==null?void 0:k.representative)==null?void 0:L.contactNumber,onOnValueChange:t[11]||(t[11]=C=>e.introducerInternal.representative.contactNumber=C),isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"]),i(I,{id:e.setUniqueIdentifier("-introducer.representative.jobTitle"),name:"introducer.representative.jobTitle",class:"col",label:"Job Title",onOnValueChange:t[12]||(t[12]=C=>e.introducerInternal.representative.jobTitle=C),value:(D=(P=e.introducerInternal)==null?void 0:P.representative)==null?void 0:D.jobTitle,isValueReactive:!0,isDataLoadedCompletely:!e.isInitializing},null,8,["id","name","value","isDataLoadedCompletely"])]}),_:1})]),_:1})])):z("",!0),o("div",ni,[i(N,{style:{"margin-right":"10px","font-weight":"600"},type:"button","theme-color":"primary","fill-mode":"outline",disabled:e.isCompanySelected?!e.allRequiredFieldsAreNotEmptyForCompany:!e.allRequiredFieldsAreNotEmptyForSoleTrader},{default:n(()=>[m(" Request Introducer to Complete Details ")]),_:1},8,["disabled"]),i(N,{type:"submit","theme-color":"primary",disabled:(e.isCompanySelected?!e.minimumRequiredFieldsAreNotEmptyForCompany:!e.minimumRequiredFieldsAreNotEmptyForSoleTrader)||e.saving||!e.isEmailValid,onClick:e.handleSubmit},{default:n(()=>[m(c(e.isAdd?"Save & Add Introducer":"Save Changes"),1)]),_:1},8,["disabled","onClick"])])]),_:1})]),_:1},8,["initialValues","onSubmit"])]),_:1},8,["title","isTitleCentered"])}const ai=G(Xt,[["render",oi]]),di=K({name:"ARViewIntroducerPermissions",props:{items:{type:Array,default:()=>[]}}});const li={class:"types-content-wrapper k-d-flex k-flex-col"},ui={class:"k-list-none k-m-0 k-p-0"},ci={class:"k-mb-1"},mi={key:1},pi={class:"k-list-none k-m-0 k-p-0"},hi={key:1};function fi(e,t,a,l,r,d){const v=Q,u=je,w=Z;return f(),M(w,{title:"Permissions",modalClass:{"ap-modal":!0},ref:"modalElement"},{default:n(()=>[(f(!0),g(U,null,j(e.items,(h,b)=>(f(),g("div",{key:b},[i(u,{title:h.categoryName,items:h.permissions},{itemTitle:n(({item:y})=>[m(c(y.permissionName),1)]),item:n(({item:y})=>{var F,E;return[o("div",li,[o("div",null,[i(v,{class:"k-font-semibold font-size-xs k-text-black k-mb-1"},{default:n(()=>[m("Customer Type")]),_:1}),(F=y==null?void 0:y.customerTypes)!=null&&F.length?(f(!0),g(U,{key:0},j(y.customerTypes,(T,p)=>(f(),g("div",{key:p},[o("ul",ui,[o("li",ci,c(T),1)])]))),128)):(f(),g("div",mi,"--"))]),o("div",null,[i(v,{class:"k-font-semibold font-size-xs k-text-black"},{default:n(()=>[m("Investment Type")]),_:1}),(E=y.investmentTypes)!=null&&E.length?(f(!0),g(U,{key:0},j(y.investmentTypes,(T,p)=>(f(),g("div",{key:p},[o("ul",pi,[o("li",null,c(T),1)])]))),128)):(f(),g("div",hi,"--"))])])]}),_:2},1032,["title","items"])]))),128))]),_:1},512)}const Ii=G(di,[["render",fi],["__scopeId","data-v-c479ad9c"]]),vi=K({name:"ARIntroducers",components:{IntroducerList:ht,ViewIntroducerModal:Ht,IntroducerFormModal:ai,ViewIntroducerPermissions:Ii},data(){return{isShowIntroducerAsList:!0,isShowIntroducerViewer:!1,isShowIntroducerForm:!1,isShowTasksViewer:!1,isShowIntroducerPermissions:!1,currentTab:0,tabs:[{title:"Current",content:"current"},{title:"All",content:"all"}],firmName:"<Firm Name>",isLoading:!0,isShowSavingText:!1,pageDescription:"",isGrid:!0,isAdd:!0,customerArService:O.resolve(Je.name),customerService:O.resolve(We.name),helperService:O.resolve(J.name),appService:O.resolve(He.name),fcaService:O.resolve(ve.name),arCustomer:new W,eventBus:ce("$eventBusService"),eventBusFormSaved:ce("$eventBusService"),kendoSaveIntroducersDialogInstance:null,isInitializing:!0,introducersList:[],introducer:new B,isIntroducerAddressesTheSame:!1,isCompany:void 0,introducerInputFirm:new H,introducerContactNumber:new X,permissions:[],permissionsCategorized:[],columnMenu:!0,selectedField:"selected",gridPageable:{buttonCount:5,info:!0,type:"numeric",pageSizes:!0,previousNext:!0},menuItems:[{text:"View Details"},{text:"Edit Details"},{text:"Archive"}],offsetX:0,offsetY:0}},computed:{AppConstants(){return _},columns(){return[{children:[{field:"details.name",title:"INTRODUCER NAME",width:"200px",resizable:!0},{field:"fcaAuthorisationStatus",title:"FCA AUTHORISATION STATUS",width:"250px",resizable:!0},{field:"introducerName",title:"INTRODUCER REPRESENTATIVE",width:"300px",resizable:!0},{field:"startDateStr",title:"START DATE",width:"200px",resizable:!0},{field:"status",title:"STATUS",width:"200px",resizable:!0},{field:"products",title:"PRODUCTS",width:"200px",resizable:!0,cell:"referralProductsTemplate"},{field:"ddStatus",title:"DD STATUS",width:"200px",resizable:!0,cell:"ddStatusTemplate"}]}]},introducerName(){var e,t;return(t=(e=this.introducer)==null?void 0:e.details)!=null&&t.name?this.introducer.details.name:"<Introducer Name>"}},async created(){var e,t;this.arCustomer=this.appService.getCachedCustomerAppointedRepresentative()??new W,this.introducersList=this.arCustomer.introducers??[];for(const a of this.introducersList){a.introducerName=`${(e=a.representative)==null?void 0:e.forename} ${(t=a.representative)==null?void 0:t.surname}`;const l={year:"numeric",month:"2-digit",day:"2-digit"},r=this.helperService.convertEpochToDateTime(a.startDate??0);a.startDateStr=(r==null?void 0:r.toLocaleDateString(void 0,l))??""}this.isInitializing=!1,this.changeLifeCycleName(_.pageLifeCycleNameCreated)},mounted(){this.isLoading=!1,this.eventBus.emit(_.bottomBarEnableEvent,!0),this.eventBusFormSaved.on(_.formSavedEvent,e=>{this.saveChanges(e)}),this.$refs.kendoAddIntroducersDialog&&(this.kendoSaveIntroducersDialogInstance=this.$refs.kendoAddIntroducersDialog),this.arCustomer=this.appService.getCachedCustomerAppointedRepresentative()??new W,this.changeLifeCycleName(_.pageLifeCycleNameMounted)},unmounted(){this.eventBus.emit(_.bottomBarEnableEvent,!1),this.eventBusFormSaved.off(_.formSavedEvent),this.isLoading=!1},setup(){const e=Xe(),{changeLifeCycleName:t}=e;return{changeLifeCycleName:t}},methods:{async saveChanges(e=!1){var l,r,d,v;const t=await this.customerArService.getAppointedRepresentativesByEmailAsync(this.arCustomer.email??"");t.introducers=this.introducersList,this.isShowSavingText=!0,this.isLoading=!0;for(let u of this.introducersList)u.id=Ye(),u.details.contactNumber=await this.helperService.convertToContactNoAsync(((l=u.details.contactNumber)==null?void 0:l.number)??"",((r=u.details.contactNumber)==null?void 0:r.country)??""),u.representative.contactNumber=await this.helperService.convertToContactNoAsync(((d=u.representative.contactNumber)==null?void 0:d.number)??"",((v=u.representative.contactNumber)==null?void 0:v.country)??"");const a=this.isAdd?"<div class='text-center'>Introducer Details Saved.</div> <br /> Please complete the Introducer Profile <a style='color: var(--color-primary)' href=''>here</a>.":"Changes Saved.";this.closeForm(),await this.customerArService.saveOrUpdateAppointedRepresentativeAsync(t).then(()=>{this.isShowSavingText=!1,this.isLoading=!1,this.showModal(a)})},showModal(e){Qe({type:Ze.SUCCESS,interval:4e3,content:e})},toggleViewType(){this.isGrid=!this.isGrid},viewAllIntroducers(){alert("TODO. view all introducers")},addIntroducer(){this.isAdd=!0,this.introducerInputFirm=new H,this.introducer=new B,this.isCompany=void 0,this.showIntroducerForm()},editIntroducer(e){this.isAdd=!1,this.introducer=this.introducersList.find(t=>t.id===e)??new B,this.isCompany=this.introducer.details.isCompany,this.showIntroducerForm(),this.isShowIntroducerViewer=!1},showIntroducerForm(){this.isShowIntroducerForm=!0},closeForm(){this.isShowIntroducerForm=!1,this.isShowIntroducerViewer=!1,this.isShowIntroducerPermissions=!1},isCompanyExisting(e,t){return e.some(a=>{const l=a.details;return l.name===t.name&&l.companyNumber===t.companyNumber&&l.fcaFirmRefNo===t.fcaFirmRefNo})},updateObject(e,t){return{...e,...t}},async viewIntroducerPermissions(e){this.isLoading=!0,this.isShowIntroducerPermissions=!1,await this.getCompanyPermissions(e);const t={};for(const r of this.permissions)t[r.categoryName]||(t[r.categoryName]={categoryName:r.categoryName,permissions:[]}),t[r.categoryName].permissions.push(r);let a=Object.keys(t).map(r=>t[r]);const l=(r,d)=>{const v="Other Activities";return r.categoryName===v?1:d.categoryName===v?-1:r.categoryName.localeCompare(d.categoryName)};a.sort(l),this.permissionsCategorized=a,this.isShowIntroducerPermissions=!0,this.isLoading=!1},async getCompanyPermissions(e){await this.customerService.getCompanyPermissionsAsync(e).then(t=>{this.permissions=t})},async saveIntroducersDetailsAsync(e){var l,r,d;const t={year:"numeric",month:"2-digit",day:"2-digit"},a=this.helperService.convertEpochToDateTime(e.startDate??0);e.startDateStr=(a==null?void 0:a.toLocaleDateString(void 0,t))??"",e.introducerName=`${e.representative.forename} ${e.representative.surname}`,e.ddStatus="Complete",e.statusImg="/bookmark_green.svg",e.providerImg="/add_profile_photo.png",e.status="Onboarding",e.referral=new xe,e.fcaAuthorisationStatus="Authorised",e.details.isCompany||(e.details.name=`${e.details.foreName} ${e.details.lastName}`,e.representative.notApplicable=!0),this.introducer.details.contactNumber=await this.helperService.convertToContactNoAsync((l=e.details.contactNumber)==null?void 0:l.number,(r=e.details.contactNumber)==null?void 0:r.country),et({title:this.$t("common-alert-title"),content:"Introducer is incomplete. Are you sure you wish to proceed?",type:tt.SAVEDETAILS,confirmButtonText:"Proceed",saveDetailsText:"Complete Now",width:440,onConfirm:async()=>{this.isCompanyExisting(this.introducersList,e.details)||this.introducersList.push(e),await this.saveChanges()},onSaveDetails:()=>{this.$refs.introducerFormModal.triggerSubmit()}}),(d=this.kendoSaveIntroducersDialogInstance)==null||d.closeActionDialog(),this.introducer=new B,this.eventBus.emit(_.formFieldChangedEvent),this.eventBus.emit(_.formFieldPageLevelChangedEvent)},onToggleTradingAddress(){this.isIntroducerAddressesTheSame=!this.isIntroducerAddressesTheSame,this.isIntroducerAddressesTheSame?this.introducer.details.tradingAddress=this.introducer.details.registeredAddress??"":this.introducer.details.tradingAddress=""},onViewOptions(){alert("To do later.")},displayFormattedContactNumber(e){return e?`+44 ${this.helperService.cleanContactNumber(e)}`:""},open(e,t){e.isContextMenuOpen||this.introducersList.forEach(a=>a.isContextMenuOpen=!1),this.offsetX=t.clientX+10,this.offsetY=t.clientY+10,e.isContextMenuOpen=!e.isContextMenuOpen},onMenuSelect(e,t){var a;try{const l=e.item,r=(a=t.details)==null?void 0:a.name;if(l.text==="Archive"){alert(`${r} is archived!`);return}localStorage.setItem(_.contextMenuSelectionIntroducerKey,JSON.stringify(this.cleanIntroducersBeforeSavingLocally(t))),this.$router.push("/introducer-details")}finally{this.introducersList.forEach(l=>l.isContextMenuOpen=!1)}},async onIntroducerDetailUpdated(e){this.introducer&&(this.introducer.details.name=e.firmName,this.introducer.details.companyNumber=e.companyNumber,this.introducer.details.fcaFirmRefNo=e.firmReferenceNumber,this.introducerInputFirm=e,this.introducer.details.registeredAddress=e.address,await this.getFCADetails())},async getFCADetails(){var t,a,l;const e=await this.fcaService.getFirmAddressesDetailsAsync(this.introducer.details.fcaFirmRefNo,"PPOB");if((e==null?void 0:e.length)>0){const r=e[0],d=JSON.parse(JSON.stringify(r));this.introducerContactNumber={dialCode:d.dialCode,country:d.country,countryCode:d.countryCode,number:d["Phone Number"]};const v=d["Phone Number"].substring(3);this.introducer.details.contactNumber=v,this.introducer.details.website=d["Website Address"];let u="";if(u+=`${d["Address Line 1"]?d["Address Line 1"]:""}`,u+=`${d["Address Line 2"]?`, ${d["Address Line 2"]}`:""}`,u+=`${r.town?`, ${r.town}`:""}`,u+=`${r.country?`, ${r.country}`:""}`,u+=`${r.postcode?`, ${r.postcode}`:""}`,this.introducer.details.tradingAddress=u,r.country&&r.postcode&&r.town){if((t=this.introducer.details.registeredAddress)!=null&&t.toUpperCase().includes(r==null?void 0:r.country)&&((a=this.introducer.details.registeredAddress)!=null&&a.includes(r==null?void 0:r.postcode))&&((l=this.introducer.details.registeredAddress)!=null&&l.includes(r==null?void 0:r.town))){this.introducer.details.isTradingSameAsRegisteredAddress=!0,this.isIntroducerAddressesTheSame=!0;return}this.introducer.details.isTradingSameAsRegisteredAddress=!1,this.isIntroducerAddressesTheSame=!1}}},async viewIntroducer(e){var t,a,l,r;this.isShowIntroducerViewer=!0,this.introducer=this.introducersList.find(d=>d.id===e)??new B,this.introducer.details!==void 0&&(this.introducer.details.contactNumberDisplay=`${((t=this.introducer.details.contactNumber)==null?void 0:t.dialCode)??""} ${((a=this.introducer.details.contactNumber)==null?void 0:a.number)??""}`),this.introducer.representative!==void 0&&(this.introducer.representative.contactNumberDisplay=`${((l=this.introducer.representative.contactNumber)==null?void 0:l.dialCode)??""} ${((r=this.introducer.representative.contactNumber)==null?void 0:r.number)??""}`)},cleanIntroducersBeforeSavingLocally(e){return e}}}),yi={key:1};function gi(e,t,a,l,r,d){const v=it,u=rt,w=st,h=q("IntroducerFormModal"),b=q("IntroducerList"),y=q("ViewIntroducerModal"),F=q("ViewIntroducerPermissions");return f(),g(U,null,[i(v,{isLoading:e.isLoading,isShowSavingText:e.isShowSavingText},null,8,["isLoading","isShowSavingText"]),i(u),i(w,{title:"Appointed Representative Introducers"},{description:n(()=>[o("p",null,c(e.$t("ar-introducers-description",{currentFirmName:e.firmName})),1)]),_:1}),e.isShowIntroducerForm?(f(),M(h,{key:0,ref:"introducerFormModal",introducer:e.introducer,isAdd:e.isAdd,isCompany:e.isCompany,onClose:e.closeForm,onSubmit:e.saveIntroducersDetailsAsync},null,8,["introducer","isAdd","isCompany","onClose","onSubmit"])):z("",!0),e.isShowIntroducerAsList?(f(),g("div",yi,[i(b,{introducers:e.introducersList,onAddIntroducer:e.addIntroducer,onViewIntroducerList:e.viewIntroducer,onEditIntroducerList:e.editIntroducer,onViewIntroducerCard:e.viewIntroducer,onEditIntroducerCard:e.editIntroducer},null,8,["introducers","onAddIntroducer","onViewIntroducerList","onEditIntroducerList","onViewIntroducerCard","onEditIntroducerCard"])])):z("",!0),i(y,{modelValue:e.isShowIntroducerViewer,"onUpdate:modelValue":t[0]||(t[0]=E=>e.isShowIntroducerViewer=E),introducer:e.introducer,onClose:e.closeForm,onEditIntroducer:e.editIntroducer,onViewIntroducerPermissions:e.viewIntroducerPermissions},null,8,["modelValue","introducer","onClose","onEditIntroducer","onViewIntroducerPermissions"]),e.isShowIntroducerPermissions?(f(),M(F,{key:2,items:e.permissionsCategorized,onClose:e.closeForm},null,8,["items","onClose"])):z("",!0)],64)}const bi=G(vi,[["render",gi],["__scopeId","data-v-f60d23aa"]]);export{bi as default};
