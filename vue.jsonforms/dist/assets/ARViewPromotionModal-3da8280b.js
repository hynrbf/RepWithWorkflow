import{_ as yt}from"./ModalComponent.vue_vue_type_script_setup_true_lang-fe9b98ed.js";import{_ as zt}from"./OverlayLoader-e5a9021a.js";import{D as at,af as Lt,b1 as Q,aV as dt,bb as Ft,j as L,I as mt,C as q,dh as jt,Z as D,o as r,m as _,bg as ht,bm as gt,P as t,n as o,H as s,bO as st,b5 as it,_ as J,G as z,aX as Bt,J as W,K as tt,$ as k,aB as bt,a0 as ut,N as K,bS as Ot,x as I,bc as Z,w as l,r as T,q as B,bo as Ht,W as pt,bd as Ut,A as V,a5 as Ct,a6 as xt,bN as Vt,O as _t,b7 as Wt,bR as qt,bY as kt,b0 as Jt,M as Kt,y as lt,b6 as Yt,as as ct,au as Gt,av as Xt,c8 as Zt}from"./index-9d6d511f.js";import{F as nt,_ as Qt,c as te,b as ee}from"./MediaLabelComponent-feae136c.js";import{u as oe}from"./ARMarketingAndFinancialPromotions-9f95979b.js";import{u as ne}from"./useFinancialPromotionStore-bdfe7e68.js";import{u as se,l as ae,a as ie,b as At,C as S,_ as le,c as ce}from"./file-xls-fcdae677.js";import"./StatusLabelComponent.vue_vue_type_script_setup_true_lang-90f1f182.js";import"./GridCardTable-248623f7.js";import"./DateTimeComponent-2c5db54c.js";const re=at.resolve(Lt.name),{currentArCustomer:rt,currentArCustomerName:de}=Q(dt()),me=Ft("arStaffStore",{state:()=>({staffs:[],isFetchingStaffs:!1}),actions:{getStaff(c){return this.staffs.find(h=>h.id===c)},async fetchStaffsAsync(){try{this.isFetchingStaffs=!0;let c=[];rt.value&&(c=[...c,{name:de.value,id:`${rt.value.id}`}]);const h=rt.value.firmReferenceNumber,f=await re.getFirmIndividualsAsync(h)||[];return c=[...c,...f.map(({IRN:e,name:m})=>({id:`${e}`,name:`${m}`}))],this.staffs=c,Promise.resolve(c)}catch(c){return Promise.reject(c)}finally{this.isFetchingStaffs=!1}}}}),ue={class:"PromotionContent"},pe={class:"PromotionContent-editor"},_e={class:"PromotionContent-content is-scrollable-y"},fe=["innerHTML"],ve=L({__name:"ARPromotionContent",props:{userId:{default:""},users:{default:()=>[]},content:{default:""},rawContent:{default:""},suggestions:{default:()=>[]},commentThreads:{default:()=>[]},editting:{type:Boolean,default:!1}},emits:["update"],setup(c,{expose:h,emit:f}){const e=c,m=at.resolve(mt.name),{content:b,rawContent:C,suggestions:v,commentThreads:$,userId:A,users:i}=q(e),a=jt(),x=D(()=>({classicWithTrackChanges:{currentUser:A.value,users:it(i.value),suggestions:j(it(v.value),!0),commentThreads:it($.value)},toolbar:["heading","|","fontsize","fontfamily","|","bold","italic","underline","strikethrough","removeFormat","|","numberedList","bulletedList","|","undo","redo","|","link"]})),{Editor:M,onInit:F}=se("ClassicWithTrackChangesEditor");F(u=>{var g,R;u.execute("trackChanges"),(R=(g=u.commands.get("trackChanges"))==null?void 0:g.forceDisabled)==null||R.call(g,"suggestionsMode"),a.value=u});const w=()=>{if(!a.value)return;const u=a.value,g=u.plugins.get("TrackChanges"),R=u.plugins.get("CommentsRepository"),Y=u.data.get({showSuggestionHighlights:!0}),O=u.data.get(),H=g.getSuggestions({skipNotAttached:!0,skipEmpty:!0,toJSON:!0}),G=R.getCommentThreads({skipNotAttached:!0,skipEmpty:!0,toJSON:!0});f("update",{content:Y,rawContent:O,suggestions:j(H),commentThreads:G})},P=async u=>{if(!a.value)return;const g=a.value;u?g.execute("acceptAllSuggestions"):g.execute("discardAllSuggestions");const R=g.plugins.get("TrackChanges"),Y=g.plugins.get("CommentsRepository"),O=g.data.get(),H=R.getSuggestions({skipNotAttached:!0,skipEmpty:!0,toJSON:!0}),G=Y.getCommentThreads({skipNotAttached:!0,skipEmpty:!0,toJSON:!0});f("update",{content:O,rawContent:O,suggestions:j(H),commentThreads:G})},j=(u,g=!1)=>Array.isArray(u)?u.map(R=>({...R,createdAt:g?m.convertEpochToDateTime(R.createdAt):m.dateToEpoch(R.createdAt)})):u;return h({apply:w,acceptChanges(){P(!0)},discardChanges(){P(!1)}}),(u,g)=>(r(),_("div",ue,[ht(t("div",pe,[o(s(M),{"initial-data":s(C)||s(b),config:x.value},null,8,["initial-data","config"])],512),[[gt,u.editting]]),ht(t("div",_e,[st(u.$slots,"content",{content:s(b)},()=>[t("div",{innerHTML:s(b)},null,8,fe)],!0)],512),[[gt,!u.editting]])]))}});const he=J(ve,[["__scopeId","data-v-8a7940ee"]]),ge=["onClick"],ye=["alt"],be=L({__name:"ARPromotionMedia",props:{items:{default:()=>[]}},setup(c){const h=c,{items:f}=q(h),e=D(()=>f.value.map(C=>({src:C.uploadedUrl||C.url,thumb:C.uploadedUrl||C.url}))),m=z(),b=z();return Bt(()=>{b.value=ae(m.value,{plugins:[ie],dynamic:!0,dynamicEl:e.value})}),(C,v)=>{const $=K;return r(),_("div",{ref_key:"mediaElement",ref:m,class:ut(["Media"])},[(r(!0),_(W,null,tt(s(f),(A,i)=>(r(),_("div",{key:`media-item-${i}`,class:"Media-item",onClick:k(a=>b.value.openGallery(i),["prevent"])},[t("div",{class:"Media-thumb",style:bt({backgroundImage:`url(${A.uploadedUrl||A.url})`}),alt:A.name},null,12,ye),t("button",{type:"button",class:"Media-button",onClick:v[0]||(v[0]=k(()=>{},["stop"]))},[o($,{symbol:"trash",class:"text-error"})])],8,ge))),128))],512)}}});const Ce=c=>(Ct("data-v-8de67f64"),c=c(),xt(),c),xe={class:"Timeline"},ke={key:0,class:"p-4 text-center"},Ae=Ce(()=>t("em",null,"No logs yet.",-1)),$e=[Ae],we={key:1,class:"Timeline-body"},Te={key:0},Pe={class:"Timeline-icon"},Se={class:"Timeline-contentTop"},De={class:"Timeline-title"},Re={class:"font-weight-semi-bold"},Ie={class:"Timeline-time"},Me={class:"Timeline-switchMode"},Ee={class:"Timeline-contentBody"},Ne=["innerHTML"],ze=L({__name:"ARPromotionLogs",props:{promotion:{}},setup(c){const h=c,{promotion:f}=q(h),{currentArCustomerName:e}=Q(dt()),m=At(),{comments:b}=Q(m),{fetchCommentsAsync:C}=m,v=D(()=>{const i=[];return b.value.sort((a,x)=>Number(a.createdAt)<Number(x.createdAt)?1:-1).forEach(a=>{const x=i[i.length-1];(!x||Z(Number(a.createdAt)*1e3).format("L")!==Z(Number(x.createdAt)*1e3).format("L"))&&i.push({...a,id:Ut(),isForDate:!0,isPublic:!0}),i.push(a)}),i}),$=i=>{switch(i){case S.Comment:return"comment-bubble";case S.Approve:return"check-big";case S.Reject:return"clear";case S.Create:case S.Modify:default:return"edit-pdf-50"}},A=i=>{switch(i.commentType){case S.Comment:return"left a comment.";case S.Approve:return"approved this post.";case S.RevokeApprove:return"revoke the approval.";case S.RevokeReject:return"revoke the rejection.";case S.Reject:return"rejected this post.";case S.Modify:return"modified the text.";case S.Create:return"created this post."}};return Ot(f,i=>{i.id&&C(f.value.id,V.CommentFinancialPromotion)},{immediate:!0}),(i,a)=>{const x=K,M=Ht,F=pt;return r(),_("div",xe,[v.value.length?(r(),_("div",we,[(r(!0),_(W,null,tt(v.value,w=>(r(),_("div",{key:`timeline-log-${w.id}`,class:ut([`Timeline-${w.isForDate?"heading":"item"}`])},[w.isForDate?(r(),_("strong",Te,I(s(Z)(Number(w.createdAt)*1e3).calendar({sameDay:"[Today]",lastDay:"[Yesterday]",sameElse:"MMMM D, YYYY"})),1)):(r(),_(W,{key:1},[t("div",Pe,[o(x,{size:"18",symbol:$(w.commentType)},null,8,["symbol"])]),o(F,{class:"Timeline-content"},{default:l(()=>[t("div",Se,[t("div",De,[o(M,{text:s(e),rounded:"full",size:"small"},{text:l(()=>[t("span",Re,I(s(e)),1),T(" "+I(A(w)),1)]),_:2},1032,["text"])]),t("div",Ie,I(s(Z)(Number(w.createdAt)*1e3).fromNow()),1),t("button",Me,[w.isPublic?(r(),B(x,{key:0,size:"20",symbol:"earth-1-33",class:"text-tertiary"})):(r(),B(x,{key:1,size:"20",symbol:"user-multiple-circle-28",class:"text-primary"})),o(x,{size:"12",symbol:"arrow-down-3-79"})])]),t("div",Ee,[t("div",{innerHTML:w.commentText,class:"is-text-tight"},null,8,Ne)])]),_:2},1024)],64))],2))),128))])):(r(),_("div",ke,$e))])}}});const Le=J(ze,[["__scopeId","data-v-8de67f64"]]),Fe={class:"PromotionCommentInput"},je={class:"PromotionCommentInput-buttons"},Be=L({__name:"ARPromotionCommentInput",emits:["submit"],setup(c,{emit:h}){const f=at.resolve(mt.name),e=z(""),m=D(()=>!f.stripHTMLTags(e.value).trim()),b=C=>{h("submit",e.value,C),e.value=""};return(C,v)=>{const $=Vt,A=K,i=_t;return r(),_("div",Fe,[o($,{value:e.value,class:"PromotionCommentInput-editor",tools:[],"content-style":{height:"30px"},placeholder:"Add Comment",onChange:v[0]||(v[0]=a=>e.value=a.html)},null,8,["value"]),t("div",je,[o(i,{disabled:m.value,"theme-color":"tertiary",class:"text-primary font-weight-semi-bold",onClick:v[1]||(v[1]=k(a=>b(!0),["prevent"]))},{default:l(()=>[o(A,{size:"15",symbol:"earth-1-33"}),T(" Public ")]),_:1},8,["disabled"]),o(i,{disabled:m.value,"theme-color":"primary",onClick:v[2]||(v[2]=k(a=>b(!1),["prevent"]))},{default:l(()=>[o(A,{size:"15",symbol:"user-multiple-circle-28"}),T(" Internal ")]),_:1},8,["disabled"])])])}}});const Oe=J(Be,[["__scopeId","data-v-a8dec361"]]),et=c=>(Ct("data-v-b5ce1240"),c=c(),xt(),c),He={class:"PromotionDisclosure"},Ue=et(()=>t("img",{src:le,alt:"PDF",width:"23",height:"24"},null,-1)),Ve=et(()=>t("a",{href:"javascript:;",class:"PromotionDisclosure-link"}," View Disclosure ",-1)),We={class:"row align-items-center"},qe=et(()=>t("div",{class:"col-lg-9 gx-3 PromotionDisclosure-text"},[T(" I hereby confirm that all "),t("a",{href:"javascript:;"},"Disclosures"),T(" are included within the content, while maintaining adequate prominence of no less than the prominence afforded to the content itself. ")],-1)),Je={class:"col-lg-3"},Ke={key:1,class:"font-size-sm"},Ye=et(()=>t("br",null,null,-1)),Ge=et(()=>t("br",null,null,-1)),Xe={class:"font-size-lg text-primary mb-3"},Ze=["data-index","innerHTML"],Qe=L({__name:"ARPromotionDisclosures",props:{promotion:{},disclosures:{default:()=>({})}},emits:["confirm"],setup(c,{emit:h}){const f=c,e=at.resolve(mt.name),{promotion:m,disclosures:b}=q(f),C=D(()=>{var i;return((i=m.value.editorContent)==null?void 0:i.content)||""}),v=i=>{const a=e.stripHTMLTags(C.value).trim();return!!(i.id==="timePeriodDisclosure"||i.id==="affiliateDisclosure"&&(e.isWordExist(a,"providers")||e.isWordExist(a,"provider"))||i.id==="taxDisclosure"&&(e.isWordExist(a,"taxes")||e.isWordExist(a,"tax")))},$=D(()=>V.disclosureTypes.map(i=>({...i,content:b.value[`${i.id}ConfirmedText`]||[]})).filter(i=>Wt.isEmpty(i.content)?!1:v(i))),A=z(!1);return(i,a)=>{const x=K,M=_t,F=pt,w=yt;return r(),_("div",He,[o(F,{class:"PromotionDisclosure-button",onClick:a[1]||(a[1]=k(P=>A.value=!0,["prevent"]))},{default:l(()=>[Ue,Ve,o(M,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"Download",class:"PromotionDisclosure-download",onClick:a[0]||(a[0]=k(()=>{},["stop"]))},{default:l(()=>[o(x,{symbol:"download-box-2-19",size:"18",class:"text-primary"})]),_:1})]),_:1}),t("div",We,[qe,t("div",Je,[s(m).isDisclosureConfirmed?(r(),_("span",Ke,[T(" Jenny Berns"),Ye,T(" 17 November 2023"),Ge,T(" 08:09 AM ")])):(r(),B(M,{key:0,"theme-color":"primary",class:"w-100",onClick:a[2]||(a[2]=k(P=>h("confirm"),["prevent"]))},{default:l(()=>[T(" Confirm ")]),_:1}))])]),o(w,{modelValue:A.value,"onUpdate:modelValue":a[4]||(a[4]=P=>A.value=P),"fixed-height":"",width:"1300"},{"before-close":l(()=>[o(M,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"Download",onClick:a[3]||(a[3]=k(()=>{},["stop"]))},{default:l(()=>[o(x,{symbol:"download-box-2-19",size:"18",class:"text-primary"})]),_:1})]),default:l(()=>[(r(!0),_(W,null,tt($.value,P=>(r(),_("div",{key:`disclosure-${P.id}`,class:"mb-5"},[t("h4",Xe,I(P.title),1),(r(!0),_(W,null,tt(P.content,(j,u)=>(r(),_("div",{key:`disclosure-${P.id}-${u}`,"data-index":u,innerHTML:j},null,8,Ze))),128))]))),128))]),_:1},8,["modelValue"])])}}});const to=J(Qe,[["__scopeId","data-v-b5ce1240"]]),eo=L({__name:"ARPromotionDetails",setup(c){const h=qt();return(f,e)=>{const m=Jt;return r(),B(m,{class:"PromotionDetails",items:[{id:"details-text",title:"Text",content:"",active:!0},{id:"details-media",title:"Photos & Videos",content:""},{id:"details-attachments",title:"Attachments",content:""}]},kt({_:2},[s(h)["text-content"]?{name:"content-details-text",fn:l(()=>[st(f.$slots,"text-content",{},void 0,!0)]),key:"0"}:void 0,s(h)["media-content"]?{name:"content-details-media",fn:l(()=>[st(f.$slots,"media-content",{},void 0,!0)]),key:"1"}:void 0,s(h)["attachments-content"]?{name:"content-details-attachments",fn:l(()=>[st(f.$slots,"attachments-content",{},void 0,!0)]),key:"2"}:void 0]),1024)}}});const oo=J(eo,[["__scopeId","data-v-9578d6ca"]]),no={class:"Attachment-block"},so=["alt"],ao=Kt('<div class="Attachment-info" data-v-c3b211bf><span class="Attachment-name" data-v-c3b211bf><img src="'+ce+'" width="24" height="24" data-v-c3b211bf><a href="#" class="is-truncated" title="filenamesdfdfsdfsdf.pdf" data-v-c3b211bf> filenamesdfdfsdfsdf.pdf </a></span><span class="Attachment-date is-truncated" data-v-c3b211bf> Sep 19, 2020 | 10:52 AM </span></div>',1),io={class:"Attachment-buttons"},lo=L({__name:"ARPromotionAttachments",props:{items:{default:()=>[]}},setup(c){const h=c,{items:f}=q(h),e=z();return(m,b)=>{const C=K;return r(),_("div",{ref_key:"mediaElement",ref:e,class:ut(["Attachment"])},[(r(!0),_(W,null,tt(s(f),(v,$)=>(r(),_("div",{key:`attachment-item-${$}`,class:"Attachment-item"},[t("div",no,[t("div",{class:"Attachment-thumb",style:bt({backgroundImage:`url(${v.uploadedUrl||v.url})`}),alt:v.name},null,12,so),ao,t("div",io,[t("button",{type:"button",class:"Attachment-button",onClick:b[0]||(b[0]=k(()=>{},["stop"]))},[o(C,{symbol:"eye",class:"text-primary"})]),t("button",{type:"button",class:"Attachment-button",onClick:b[1]||(b[1]=k(()=>{},["stop"]))},[o(C,{symbol:"trash",class:"text-error"})])])])]))),128))],512)}}});const co=J(lo,[["__scopeId","data-v-c3b211bf"]]),ro={class:"row"},mo={class:"col-lg-2"},uo=t("label",null,"Source",-1),po={class:"col-lg-2"},_o=t("label",null,"Content Status",-1),fo={class:"col-lg-2"},vo=t("label",null,"Content Owner",-1),ho={class:"col-lg-2"},go=t("label",null,"Moderator",-1),yo=t("div",{class:"col-lg-2"},[t("label",null,"Approval Type"),t("span",null,"Existing Post")],-1),bo={class:"col-lg-2"},Co=t("label",null,"Approval Required Date",-1),xo={class:"col-lg-2"},ko=t("label",null,"Financial Promotion Type",-1),Ao={class:"col-lg-2"},$o=t("label",null,"Provider Name",-1),wo={class:"col-lg-2"},To=t("label",null,"Product Type",-1),Po={class:"is-truncated d-inline-block w-100"},So={class:"col-lg-2"},Do=t("label",null,"Remuneration Method",-1),Ro={class:"col-lg-2"},Io={class:"d-flex align-items-center gap-2"},Mo={class:"col-lg-2"},Eo={class:"d-flex align-items-center gap-2"},No={key:1,class:"row is-stretched-content"},zo={class:"col-lg-6"},Lo={class:"row"},Fo={class:"col-md-6"},jo=["href"],Bo={class:"col-md-6 text-right"},Oo={key:0,class:"d-inline-flex gap-2"},Ho=t("strong",{class:"font-weight-semi-bold"},"Cancel",-1),Uo=t("strong",null,"Done",-1),Vo={class:"d-flex align-items-center gap-2 px-1"},Wo=t("strong",null,"Edit to Approve",-1),qo=["innerHTML"],Jo={key:0,class:"RejectApproveButtons"},Ko={class:"col-lg-6 is-vertical-content gap-4"},an=L({__name:"ARViewPromotionModal",props:{promotion:{default:()=>({})},loading:{type:Boolean}},emits:["edit"],setup(c,{emit:h}){const f=c,{promotion:e}=q(f),m=z(!1),b=oe(),{getMediaMarketingOutlet:C}=b,v=ne(),{saveOrUpdateFinancialPromotionAsync:$}=v,A=At(),{addOrEditCommentAsync:i}=A,a=D(()=>C(`${e.value.mediaOutlet}`,!1)),{currentArCustomer:x}=Q(dt()),M=me(),{staffs:F}=Q(M),{fetchStaffsAsync:w}=M;w();const P=D(()=>x.value.id===e.value.moderator),j=D(()=>F.value.map(n=>({...n,avatar:`https://api.dicebear.com/7.x/avataaars/svg?backgroundColor=b6e3f4,c0aede,d1d4f9&seed=${n.name}`}))),u=z(),g=z(!1),R=()=>{u.value.apply(),g.value=!1},Y=()=>{ct({content:"Do you wish to reject the text change(s)?",confirmButtonText:"Confirm",onConfirm(){u.value.discardChanges()}})},O=()=>{ct({content:"Do you wish to approve the text change(s)?",confirmButtonText:"Confirm & Approve",onConfirm(){u.value.acceptChanges()}})},H=n=>{ct({title:"Confirm",content:n?"Do you wish to approve this post?":"Do you wish to reject this post?",confirmButtonText:n?"Confirm & Approve":"Confirm & Reject",confirmButtonThemeColor:n?"primary":"error",async onConfirm(){try{m.value=!0,await $({...e.value,approvalStatus:n?nt.Approved:nt.Rejected}),Gt({type:Xt.SUCCESS,content:n?"Post Approved.":"Post Rejected."}),m.value=!1}catch{}}})},G=D(()=>{var y;const{editorContent:n,contentUrl:p,content:d}=e.value;return p&&(d!=null&&d.textContent)&&!(n!=null&&n.content)?((y=d.textContent)==null?void 0:y.text)||"":(n==null?void 0:n.content)||""}),$t=D(()=>{var y;const{editorContent:n,contentUrl:p,content:d}=e.value;return p&&(d!=null&&d.textContent)&&!(n!=null&&n.rawContent)?((y=d.textContent)==null?void 0:y.text)||"":(n==null?void 0:n.rawContent)||""}),ft=D(()=>{const{media:n,contentUrl:p,content:d}=e.value;return p&&(d!=null&&d.images)?d.images:n==null?void 0:n.filter(y=>V.ImageExtensions.includes(y.extension??""))}),wt=D(()=>{const{media:n,contentUrl:p,content:d}=e.value;return p&&(d!=null&&d.documents)?d.documents:n==null?void 0:n.filter(y=>V.DocumentExtensions.includes(y.extension??""))}),Tt=async n=>{n={editorContent:{content:n.content,rawContent:n.rawContent,suggestions:n.suggestions,commentThreads:n.commentThreads}};try{m.value=!0,await $({...e.value,...n,isDisclosureConfirmed:!1}),await i({contentId:e.value.id,contentType:V.CommentFinancialPromotion,commentType:S.Modify,isPublic:!0}),m.value=!1}catch{}},Pt=(n,p)=>{i({contentId:e.value.id,contentType:V.CommentFinancialPromotion,commentType:S.Comment,commentText:n,isPublic:p})},St=async()=>{m.value=!0,await $({...e.value,isDisclosureConfirmed:!0}),m.value=!1},Dt=n=>{const p=["crypto"];let d=n;for(const y of p){const ot=new RegExp(y,"gi");d=d.replace(ot,`<span class="warn">${y}</span>`)}return d};return(n,p)=>{const d=K,y=_t,ot=Qt,Rt=te,vt=ee,It=Zt,X=pt,Mt=zt,Et=yt;return r(),B(Et,{width:"1300","fixed-height":"",class:"ViewPromotionModal"},{title:l(()=>[T(I(n.$t("marketingFinancialPage-previewFinancialPromotion"))+" ",1),o(y,{type:"button","fill-mode":"flat",shape:"square",size:"small",onClick:p[0]||(p[0]=k(N=>h("edit",s(e)),["prevent"]))},{default:l(()=>[o(d,{symbol:"edit-pen",size:"20"})]),_:1})]),default:l(()=>[o(Mt,{loading:n.loading||m.value,class:"is-vertical-content"},{default:l(()=>[s(e)?(r(),B(X,{key:0,class:"PromotionInfo"},{default:l(()=>{var N,E;return[t("div",ro,[t("div",mo,[uo,o(ot,{id:(N=a.value)==null?void 0:N.platform,"icon-size":25,text:(E=a.value)==null?void 0:E.name,class:"gap-1"},null,8,["id","text"])]),t("div",po,[_o,o(Rt,{live:s(e).isLive},null,8,["live"])]),t("div",fo,[vo,o(vt,{id:s(e).owner,size:"small","text-only":"","text-truncated":""},null,8,["id"])]),t("div",ho,[go,o(vt,{id:s(e).moderator,size:"small",rounded:"full","text-truncated":""},null,8,["id"])]),yo,t("div",bo,[Co,t("span",null,I(s(Z)((s(e).createdAt||0)*1e3).add(s(e).approvalDays||0,"days").format("LL")),1)]),t("div",xo,[ko,t("span",null,I(s(e).type),1)]),t("div",Ao,[$o,t("span",null,I(s(e).provider),1)]),t("div",wo,[To,o(It,{items:s(e).productType,"popup-title":"Product Type"},{"visible-items":l(({items:U})=>[t("span",Po,I((U||[]).join(",")),1)]),_:1},8,["items"])]),t("div",So,[Do,t("span",null,I(s(e).remunerationMethod),1)]),t("div",Ro,[o(y,{"theme-color":"error",class:"w-100",disabled:!P.value||s(e).approvalStatus!==s(nt).Pending,onClick:p[1]||(p[1]=k(U=>H(!1),["prevent"]))},{default:l(()=>[t("div",Io,[o(d,{symbol:"clear",size:"12"}),T(" Reject ")])]),_:1},8,["disabled"])]),t("div",Mo,[o(y,{"theme-color":"success",class:"w-100",disabled:!P.value||s(e).approvalStatus!==s(nt).Pending,onClick:p[2]||(p[2]=k(U=>H(!0),["prevent"]))},{default:l(()=>[t("div",Eo,[o(d,{symbol:"check-big",size:"12"}),T(" Approve ")])]),_:1},8,["disabled"])])])]}),_:1})):lt("",!0),s(e)?(r(),_("div",No,[t("div",zo,[o(X,{class:"mb-0 h-100"},{head:l(()=>{var N;return[t("div",Lo,[t("div",Fo,[t("a",{href:s(e).contentUrl??"#",target:"_blank"},[o(ot,{id:(N=a.value)==null?void 0:N.platform,"icon-size":30,class:"gap-1"},{text:l(()=>{var E;return[t("b",null,I((E=a.value)==null?void 0:E.name),1),T(" (Source) ")]}),_:1},8,["id"])],8,jo)]),t("div",Bo,[g.value?(r(),_("div",Oo,[o(y,{"theme-color":"primary",size:"small","fill-mode":"flat",onClick:p[3]||(p[3]=k(E=>g.value=!1,["prevent"]))},{default:l(()=>[Ho]),_:1}),o(y,{"theme-color":"primary",size:"small",onClick:k(R,["prevent"])},{default:l(()=>[Uo]),_:1},8,["onClick"])])):(r(),B(y,{key:1,"theme-color":"warning",size:"small",onClick:p[4]||(p[4]=k(E=>g.value=!0,["prevent"]))},{default:l(()=>[t("div",Vo,[o(d,{symbol:"pencil-7",size:"12"}),Wo])]),_:1}))])])]}),default:l(()=>[o(oo,null,kt({"attachments-content":l(()=>[o(co,{items:wt.value},null,8,["items"])]),_:2},[s(e).editorContent?{name:"text-content",fn:l(()=>{var N,E,U;return[o(he,{ref_key:"contentElement",ref:u,editting:g.value,"user-id":s(x).id,users:j.value,content:String(G.value),"raw-content":String($t.value),suggestions:(N=s(e).editorContent)==null?void 0:N.suggestions,"comment-threads":(E=s(e).editorContent)==null?void 0:E.commentThreads,onUpdate:Tt},{content:l(({content:Nt})=>[t("div",{innerHTML:Dt(Nt)},null,8,qo)]),_:1},8,["editting","user-id","users","content","raw-content","suggestions","comment-threads"]),s(Yt)((U=s(e).editorContent)==null?void 0:U.suggestions)?lt("",!0):(r(),_("div",Jo,[o(y,{size:"small","fill-mode":"outline","theme-color":"error",onClick:k(Y,["prevent"])},{default:l(()=>[T(" Reject All Text Changes ")]),_:1},8,["onClick"]),o(y,{size:"small","theme-color":"success",onClick:k(O,["prevent"])},{default:l(()=>[T(" Approve All Text Changes ")]),_:1},8,["onClick"])]))]}),key:"0"}:void 0,ft.value?{name:"media-content",fn:l(()=>[o(be,{items:ft.value},null,8,["items"])]),key:"1"}:void 0]),1024)]),_:1})]),t("div",Ko,[o(X,{title:"Disclosures",class:"mb-0"},{default:l(()=>[o(to,{promotion:s(e),disclosures:s(x).disclosure,onConfirm:St},null,8,["promotion","disclosures"])]),_:1}),o(X,{title:"Log History",class:"mb-0 is-stretched-content LogHistory","body-class":"is-scrollable-y"},{default:l(()=>[o(Le,{promotion:s(e)},null,8,["promotion"])]),_:1}),o(X,{class:"mb-0"},{default:l(()=>[o(Oe,{onSubmit:Pt})]),_:1})])])):lt("",!0)]),_:1},8,["loading"])]),_:1})}}});export{an as default};
