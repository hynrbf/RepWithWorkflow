import{s as y}from"./organizationchart.esm-8c183601.js";import{j as g,_ as C,aA as S,o as v,q as b,w as _,P as d,a0 as z,x as f}from"./index-9d6d511f.js";const R=g({name:"AROrganizationalStructureChart",props:{employeesValues:{type:Object,default:[]}},data(){return{employees:this.employeesValues,selection:{}}},components:{OrganizationChart:y},computed:{transformedData(){const t=["Director (SMF3)".toLowerCase(),"Director (SMF16)".toLowerCase()];this.employees.forEach(o=>{var a,r;return o.isRoot=t==null?void 0:t.includes(((r=(a=o.primaryRole)==null?void 0:a.name)==null?void 0:r.toLowerCase())??"")});const e=this.employees.filter(o=>o.isRoot),n=[];for(const o of e)n.push(this.mapEmployeeToOrganizationChartNode(o));return{key:"absolute-root",styleClass:"absolute-root",type:"",data:{},children:n}}},mounted(){this.setupChartLineStylesForMultipleRoot()},updated(){document.querySelectorAll("tr.p-organizationchart-lines").forEach(function(e){const n=e;if(!n)return;window.getComputedStyle(n).visibility==="hidden"?n.classList.add("hide-all-child"):n.classList.remove("hide-all-child")})},methods:{mapEmployeeToOrganizationChartNode(t){var n;let e="";return t.title&&(e+=`${t.title} `),t.firstName&&(e+=`${t.firstName} `),t.lastName&&(e+=t.lastName),{key:t.id,type:"person",data:{image:"https://primefaces.org/cdn/primevue/images/avatar/amyelsner.png",name:e,role:(n=t.primaryRole)==null?void 0:n.name,status:t.employmentStatus},styleClass:t.employmentStatus,children:this.employees.filter(o=>{var a;return((a=o.lineManager)==null?void 0:a.id)===t.id}).map(o=>this.mapEmployeeToOrganizationChartNode(o))}},setupChartLineStylesForMultipleRoot(){var o,a;let t=document.querySelector(".p-organizationchart-table:has(.absolute-root)");if(!t)return;const e=(a=(o=t.children[0])==null?void 0:o.children[3])==null?void 0:a.children;if(!e)return;const n=Array.from(e);for(const r of n)r&&this.setLinesStyleRecursive(r)},setLinesStyleRecursive(t){var i,s,u,h;const e=t.querySelector(".p-organizationchart-table");if(!e)return;const n=(s=(i=e.children[0])==null?void 0:i.children[3])==null?void 0:s.children;if(!(n!=null&&n.length))return;const o=Array.from(n);if(!o)return;const a=(h=(u=e.children[0])==null?void 0:u.children[2])==null?void 0:h.children;if(!(a!=null&&a.length))return;let r=0;for(const l of o){const m=l.querySelector(".p-organizationchart-table .node-content");if(!m)continue;const p=Array.from(m.classList).filter(c=>c!=="node-content")[0];if(a.length<2){const c=a[r].children[0];c.style.background=this.getStatusColor(p),c.style.width="1px";continue}this.setLineStyle(r,a[r],a[r+1],p,a.length),r+=2}for(const l of o)l&&this.setLinesStyleRecursive(l)},setLineStyle(t,e,n,o,a){const r=this.getStatusColor(o);e.style.borderRightColor=r,t>0&&(e.style.borderTopColor=r),t<a-2&&(n.style.borderColor=`${r} transparent transparent transparent`)},getStatusColor(t){return t==="Active"?"var(--color-success-600)":t==="Onboarding"?"var(--color-warning-600)":"var(--color-error-600)"}}});const L=["alt","src"],O={class:"node-name"},w={class:"node-role"};function N(t,e,n,o,a,r){const i=S("OrganizationChart");return v(),b(i,{selectionKeys:t.selection,"onUpdate:selectionKeys":e[0]||(e[0]=s=>t.selection=s),value:t.transformedData,collapsible:"",selectionMode:"multiple"},{person:_(s=>[d("div",{class:z(["node-content",`${s.node.data.status}`])},[d("img",{alt:s.node.data.name,src:s.node.data.image,class:"node-avatar"},null,8,L),d("span",O,f(s.node.data.name),1),d("span",w,f(s.node.data.role),1)],2)]),_:1},8,["selectionKeys","value"])}const D=C(R,[["render",N]]);export{D as default};
