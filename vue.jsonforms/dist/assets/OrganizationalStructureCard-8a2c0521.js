import{j as K,aa as T,az as A,bo as z,D as R,I as q,cE as b,_ as x,aA as y,o as d,m as _,P as n,J as E,K as j,n as s,w as a,r as c,x as i,a0 as V,q as B,y as I,L as F,O as H,N as G,cz as J,cy as Q,S as X,a5 as Y,a6 as Z}from"./index-9d6d511f.js";import{_ as $}from"./KendoDetailPopupComponent-201e8196.js";import"./ModalComponent.vue_vue_type_script_setup_true_lang-fe9b98ed.js";const ee=K({name:"OrganizationalStructureCard",components:{UserDetailAsync:T(()=>A(()=>import("./UserDetail-648db1b0.js"),["assets/UserDetail-648db1b0.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/RoleDetails-20b7bca2.js","assets/RoleDetails-9e14d695.css"])),TaskDetailsAsync:T(()=>A(()=>import("./TaskDetails-f39e5872.js"),["assets/TaskDetails-f39e5872.js","assets/index-9d6d511f.js","assets/index-982d5504.css","assets/TaskDetails-e9dd94f4.css"])),DynamicAvatar:z,KendoDetailPopupComponent:$},props:{employeesValues:{type:Object,default:()=>[]}},data(){return{helperService:R.resolve(q.name),isShowViewUserModal:!1,isShowTasksDetailDialog:!1,employee:new b,detailDialogWidth:380,employeeDetailDialogWidth:750,customStyle:{flexBasis:"90px",height:"90px",margin:"0"}}},methods:{viewUser(e){e&&(this.isShowViewUserModal=!0,this.employee=this.findEmployeeById(e))},emitEditEvent(e){e&&(this.employee=this.findEmployeeById(e),this.$emit("editUser",this.employee))},findEmployeeById(e){return this.employeesValues.find(o=>o.id===e)??new b},onViewTasks(e){var o;e&&(this.employee=e,(o=this.employee.tasks)!=null&&o.length&&(this.isShowTasksDetailDialog=!0))},isTaskOverdue(e){return this.helperService.getCurrentDateTimeInEpoch()>e.dueDate},formatDate(e){var o;return((o=this.helperService.convertEpochToDateTime(e))==null?void 0:o.toLocaleDateString("en-GB"))??""},getOverdueDays(e){var p;const o=new Date;o.setMilliseconds(0),o.setSeconds(0),o.setMinutes(0),o.setHours(0);const g=o.getTime(),v=((p=this.helperService.convertEpochToDateTime(e))==null?void 0:p.getTime())??0;return(g-v)/(1e3*60*60*24)}}});const h=e=>(Y("data-v-49eaa317"),e=e(),Z(),e),te={class:"cardview-grid"},oe={class:"email-contact-section"},se={class:"email-section"},ae=h(()=>n("div",{class:"font-styling"},"Email Address",-1)),ne={class:"item-font-styling",id:"cardview-email"},ie=h(()=>n("div",{class:"divider"},null,-1)),le={class:"contact-section"},re=h(()=>n("div",{class:"font-styling"},"Contact Number",-1)),de={class:"item-font-styling",style:{"text-align":"center"},id:"cardview-contact"},ce={class:"view-task-section"};function pe(e,o,g,v,p,ue){const u=F,N=z,m=H,f=G,O=J,U=Q,W=y("UserDetailAsync"),D=$,L=y("DynamicAvatar"),M=X,P=y("TaskDetailsAsync");return d(),_(E,null,[n("div",te,[(d(!0),_(E,null,j(e.employeesValues,t=>(d(),_("div",{key:`card-${t.id}`},[s(U,{class:"cardview-style"},{default:a(()=>[s(O,null,{default:a(()=>{var r,S,w;return[s(N,{rounded:"full",type:"image",size:"large",imageSrc:t.img_id,imageAlt:t.img_id,text:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`,subText:(r=t==null?void 0:t.primaryRole)==null?void 0:r.name,customStyle:e.customStyle},{text:a(({text:l})=>[s(u,{class:"employee-name-text"},{default:a(()=>[c(i(l),1)]),_:2},1024)]),subtext:a(({subText:l})=>{var k,C;return[s(u,{class:V(["employee-role-text",(k=t.primaryRole)!=null&&k.isFcaAuthorised?"authorised":(C=t.primaryRole)!=null&&C.isModified?"modified":""])},{default:a(()=>[c(i(l),1)]),_:2},1032,["class"])]}),_:2},1032,["imageSrc","imageAlt","text","subText","customStyle"]),n("div",oe,[n("div",se,[ae,n("div",ne,i(t==null?void 0:t.email),1)]),ie,n("div",le,[re,n("div",de,i((S=t.contactNumber)==null?void 0:S.dialCode)+" "+i((w=t.contactNumber)==null?void 0:w.number),1)])]),n("div",ce,[s(m,{class:V(["button-styling",(t==null?void 0:t.employmentStatus)==="Active"?"good-status-btn":(t==null?void 0:t.employmentStatus)==="Onboarding"?"warning-status-btn":"bad-status-btn"]),type:"button","fill-mode":"outline","theme-color":"primary",onClick:l=>e.onViewTasks(t)},{default:a(()=>[c(" View Tasks ")]),_:2},1032,["class","onClick"]),s(m,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"View",class:"ActionButton",onClick:l=>e.viewUser(t.id)},{default:a(()=>[s(f,{symbol:"eye",size:"20"})]),_:2},1032,["onClick"]),s(m,{type:"button",size:"small",rounded:"full",shape:"square","theme-color":"light",title:"Pen",class:"ActionButton",onClick:l=>e.emitEditEvent(t.id)},{default:a(()=>[s(f,{symbol:"edit-pen",size:"20"})]),_:2},1032,["onClick"])])]}),_:2},1024)]),_:2},1024)]))),128))]),e.isShowViewUserModal?(d(),B(D,{key:0,width:e.employeeDetailDialogWidth,onClose:o[0]||(o[0]=t=>e.isShowViewUserModal=!1)},{content:a(()=>[s(W,{employee:e.employee,dialogWidth:e.employeeDetailDialogWidth},null,8,["employee","dialogWidth"])]),_:1},8,["width"])):I("",!0),e.isShowTasksDetailDialog?(d(),B(D,{key:1,width:e.detailDialogWidth,title:"Tasks",onClose:o[1]||(o[1]=t=>e.isShowTasksDetailDialog=!1)},{content:a(()=>[s(M,{orientation:"vertical",gap:10,align:{horizontal:"center",vertical:"top"}},{default:a(()=>{var t,r;return[n("div",null,[s(L,{size:"large",type:"image",rounded:"full",customStyle:{flexBasis:"60px",height:"60px"},imageSrc:(t=e.employee)==null?void 0:t.img_id,imageAlt:(r=e.employee)==null?void 0:r.img_id},null,8,["imageSrc","imageAlt"])]),s(u,{class:"detail-dialog-employee-name"},{default:a(()=>[c(i(e.employee.firstName)+" "+i(e.employee.lastName),1)]),_:1})]}),_:1}),s(P,{employee:e.employee,dialogWidth:e.detailDialogWidth},null,8,["employee","dialogWidth"])]),_:1},8,["width"])):I("",!0)],64)}const he=x(ee,[["render",pe],["__scopeId","data-v-49eaa317"]]);export{he as default};
