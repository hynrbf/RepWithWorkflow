import{D as l,bC as P,bb as f,bI as c,b1 as m}from"./index-9d6d511f.js";const e=l.resolve(P.name),h=f("financialPromotionStore",{state:()=>({financialPromotion:void 0,financialPromotions:[],financialPromotionTotal:0}),actions:{setFinancialPromotion(o){this.financialPromotion=o},getFinancialPromotion(o,i=!0){const n=this.financialPromotions.find(t=>t.id===o);return i&&(this.financialPromotion=n),n},appendFinancialPromotion(o){return this.financialPromotions=[...this.financialPromotions,o],o},amendFinancialPromotion(o,i,n=!0){let t;return this.financialPromotions=this.financialPromotions.map(r=>r.id===o?(t={...r,...i},t):r),n&&(this.financialPromotion=t),t},removeFinancialPromotion(o){this.financialPromotions=this.financialPromotions.filter(i=>i.id!==o)},async fetchFinancialPromotionsAsync(o){const i=c(),{currentCustomer:n}=m(i);try{const t=await e.getFinancialPromotionsAsync(n.value.id,o),{data:r,total:a}=t;this.financialPromotions=r,this.financialPromotionTotal=a}catch(t){return Promise.reject(t)}},async fetchFinancialPromotionAsync(o,i=!0){try{const n=await e.getFinancialPromotionAsync(o);return i&&this.setFinancialPromotion(n),Promise.resolve(n)}catch(n){return Promise.reject(n)}},async saveOrUpdateFinancialPromotionAsync(o,i=!0){try{const n=c(),{currentCustomer:t}=m(n),r=await e.saveOrUpdateFinancialPromotionAsync({...o,customerId:t.value.id});if(i){let a=!1;this.financialPromotions=this.financialPromotions.map(s=>s.id===o.id?(a=!0,{...s,...r}):s),a||(this.financialPromotions=[r,...this.financialPromotions]),this.setFinancialPromotion(r)}return Promise.resolve(r)}catch(n){return Promise.reject(n)}},async deleteFinancialPromotionAsync(o,i=!0){try{return await e.deleteFinancialPromotionAsync(o),i&&this.removeFinancialPromotion(o),Promise.resolve(!0)}catch(n){return Promise.reject(n)}}}});export{h as u};
