import{defineComponent as t,computed as r,h as e}from"vue";function i(){return(i=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}const n={class:"icon",url:"/assets/svg/sprite.svg"},s=(t,r)=>""===r.url?`#${t}`:`${r.url}#${t}`,o=t=>{const r={height:null,width:null,viewBox:null};if(!t)return r;const e=t.toString().replace(/( |, |,)/g," ").split(" "),i=e.length;if(3===i||i>4)return console.warn(`[vue-svg-sprite] size: "${t}" is not valid`),r;const n=[];return n[0]=i<4?0:e[0],n[1]=i<4?0:e[1],r.width=n[2]=i<4?e[0]:e[2],r.height=n[3]=e[i-1],r.viewBox=n.join(" "),r},l=i({},n),u=t({name:"SvgSprite",props:{symbol:{type:String,required:!0},size:{type:String,validator:t=>/^\d+( \d+( \d+ \d+)?)?$/.test(t)},url:String},setup(t,{attrs:n}){n.class&&n.class.includes(l.class)&&(l.class=null);const u=r(()=>s(t.symbol,i({},l,{url:void 0===t.url?l.url:t.url}))),v=r(()=>o(t.size));return()=>e("svg",{role:"presentation",class:l.class,width:v.value.width,height:v.value.height,viewBox:v.value.viewBox},e("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink",href:u.value,"xlink-href":u.value}))}}),v={install(t,r={}){l.class=void 0===r.class?n.class:r.class,l.url=void 0===r.url?n.url:r.url,t.component("SvgSprite",u)}},c=i({},n),d={beforeMount(t,r,e){const n=r.value||e.props.symbol,{size:l,url:u}=e.props||{},v=o(l);v.viewBox&&t.setAttribute("viewBox",v.viewBox),v.width&&t.setAttribute("width",v.width),v.height&&t.setAttribute("height",v.height),n&&t.removeAttribute("symbol"),l&&t.removeAttribute("size");const d=t.getAttribute("class");if(((t,r)=>{const e=r.class;return!!t&&t.split(" ").some(t=>{const[r]=t.split(/(-|_)/);return-1!==r.indexOf(e)&&r.length===e.length})})(d,c)||t.setAttribute("class",d?`${d} ${c.class}`:c.class),!t||null===t.querySelector("use")){const r=s(n,i({},c,{url:void 0===u?c.url:u})),e=document.createElementNS("http://www.w3.org/2000/svg","use");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),e.setAttribute("href",r),t.appendChild(e)}},updated(t,r,e){const n=r.value||e.props.symbol,{url:o}=e.props||{},l=s(n,i({},c,{url:void 0===o?c.url:o})),u=t&&t.querySelector("use");if(u){if(u.getAttribute("href")===l)return;u.setAttribute("href",l),u.setAttribute("xlink-href",l)}}},h={install(t,r={}){c.class=void 0===r.class?n.class:r.class,c.url=void 0===r.url?n.url:r.url,t.directive("svg",d)}};export{u as SvgSprite,d as svgSpriteDirective,h as svgSpriteDirectivePlugin,v as svgSpritePlugin};
