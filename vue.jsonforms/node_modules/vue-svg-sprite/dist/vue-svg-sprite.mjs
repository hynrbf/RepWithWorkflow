import{defineComponent as r,computed as n,h as t}from"vue";function i(){return(i=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}).apply(this,arguments)}var e={class:"icon",url:"/assets/svg/sprite.svg"},u=function(r,n){return""===n.url?"#"+r:n.url+"#"+r},o=function(r){var n={height:null,width:null,viewBox:null};if(!r)return n;var t=r.toString().replace(/( |, |,)/g," ").split(" "),i=t.length;if(3===i||i>4)return console.warn('[vue-svg-sprite] size: "'+r+'" is not valid'),n;var e=[];return e[0]=i<4?0:t[0],e[1]=i<4?0:t[1],n.width=e[2]=i<4?t[0]:t[2],n.height=e[3]=t[i-1],n.viewBox=e.join(" "),n},v=i({},e),s=r({name:"SvgSprite",props:{symbol:{type:String,required:!0},size:{type:String,validator:function(r){return/^\d+( \d+( \d+ \d+)?)?$/.test(r)}},url:String},setup:function(r,e){var s=e.attrs;s.class&&s.class.includes(v.class)&&(v.class=null);var l=n(function(){return u(r.symbol,i({},v,{url:void 0===r.url?v.url:r.url}))}),f=n(function(){return o(r.size)});return function(){return t("svg",{role:"presentation",class:v.class,width:f.value.width,height:f.value.height,viewBox:f.value.viewBox},t("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink",href:l.value,"xlink-href":l.value}))}}}),l={install:function(r,n){void 0===n&&(n={}),v.class=void 0===n.class?e.class:n.class,v.url=void 0===n.url?e.url:n.url,r.component("SvgSprite",s)}},f=i({},e),a={beforeMount:function(r,n,t){var e=n.value||t.props.symbol,v=t.props||{},s=v.size,l=v.url,a=o(s);a.viewBox&&r.setAttribute("viewBox",a.viewBox),a.width&&r.setAttribute("width",a.width),a.height&&r.setAttribute("height",a.height),e&&r.removeAttribute("symbol"),s&&r.removeAttribute("size");var c=r.getAttribute("class");if(function(r,n){var t=n.class;return!!r&&r.split(" ").some(function(r){var n=r.split(/(-|_)/)[0];return-1!==n.indexOf(t)&&n.length===t.length})}(c,f)||r.setAttribute("class",c?c+" "+f.class:f.class),!r||null===r.querySelector("use")){var d=u(e,i({},f,{url:void 0===l?f.url:l})),h=document.createElementNS("http://www.w3.org/2000/svg","use");h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d),h.setAttribute("href",d),r.appendChild(h)}},updated:function(r,n,t){var e=(t.props||{}).url,o=u(n.value||t.props.symbol,i({},f,{url:void 0===e?f.url:e})),v=r&&r.querySelector("use");if(v){if(v.getAttribute("href")===o)return;v.setAttribute("href",o),v.setAttribute("xlink-href",o)}}},c={install:function(r,n){void 0===n&&(n={}),f.class=void 0===n.class?e.class:n.class,f.url=void 0===n.url?e.url:n.url,r.directive("svg",a)}};export{s as SvgSprite,a as svgSpriteDirective,c as svgSpriteDirectivePlugin,l as svgSpritePlugin};
