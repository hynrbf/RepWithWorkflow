{
  "version": 3,
  "sources": ["../../@ckeditor/ckeditor5-image/src/image/utils.js", "../../@ckeditor/ckeditor5-image/src/imageutils.js", "../../@ckeditor/ckeditor5-image/src/autoimage.js", "../../@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativecommand.js", "../../@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeediting.js", "../../@ckeditor/ckeditor5-image/src/imagetextalternative/ui/textalternativeformview.js", "../../@ckeditor/ckeditor5-image/src/image/ui/utils.js", "../../@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js", "../../@ckeditor/ckeditor5-image/src/imagetextalternative.js", "../../@ckeditor/ckeditor5-image/src/image/converters.js", "../../@ckeditor/ckeditor5-image/src/image/imageloadobserver.js", "../../@ckeditor/ckeditor5-image/src/image/insertimagecommand.js", "../../@ckeditor/ckeditor5-image/src/image/replaceimagesourcecommand.js", "../../@ckeditor/ckeditor5-image/src/image/imageediting.js", "../../@ckeditor/ckeditor5-image/src/image/imagetypecommand.js", "../../@ckeditor/ckeditor5-image/src/image/imageblockediting.js", "../../@ckeditor/ckeditor5-image/src/imageblock.js", "../../@ckeditor/ckeditor5-image/src/image/imageinlineediting.js", "../../@ckeditor/ckeditor5-image/src/imageinline.js", "../../@ckeditor/ckeditor5-image/src/image.js", "../../@ckeditor/ckeditor5-image/src/imagecaption/imagecaptionutils.js", "../../@ckeditor/ckeditor5-image/src/imagecaption/toggleimagecaptioncommand.js", "../../@ckeditor/ckeditor5-image/src/imagecaption/imagecaptionediting.js", "../../@ckeditor/ckeditor5-image/src/imagecaption/imagecaptionui.js", "../../@ckeditor/ckeditor5-image/src/imagecaption.js", "../../@ckeditor/ckeditor5-image/src/imageupload/utils.js", "../../@ckeditor/ckeditor5-image/src/imageupload/imageuploadui.js", "../../@ckeditor/ckeditor5-image/src/imageupload/imageuploadprogress.js", "../../@ckeditor/ckeditor5-image/src/imageupload/uploadimagecommand.js", "../../@ckeditor/ckeditor5-image/src/imageupload/imageuploadediting.js", "../../@ckeditor/ckeditor5-image/src/imageupload.js", "../../@ckeditor/ckeditor5-image/src/imageinsert/ui/imageinsertformrowview.js", "../../@ckeditor/ckeditor5-image/src/imageinsert/ui/imageinsertpanelview.js", "../../@ckeditor/ckeditor5-image/src/imageinsert/utils.js", "../../@ckeditor/ckeditor5-image/src/imageinsert/imageinsertui.js", "../../@ckeditor/ckeditor5-image/src/imageinsertviaurl.js", "../../@ckeditor/ckeditor5-image/src/imageinsert.js", "../../@ckeditor/ckeditor5-image/src/imageresize/resizeimagecommand.js", "../../@ckeditor/ckeditor5-image/src/imageresize/imageresizeediting.js", "../../@ckeditor/ckeditor5-image/src/imageresize/imageresizebuttons.js", "../../@ckeditor/ckeditor5-image/src/imageresize/imageresizehandles.js", "../../@ckeditor/ckeditor5-image/src/imageresize.js", "../../@ckeditor/ckeditor5-image/src/imagestyle/imagestylecommand.js", "../../@ckeditor/ckeditor5-image/src/imagestyle/utils.js", "../../@ckeditor/ckeditor5-image/src/imagestyle/converters.js", "../../@ckeditor/ckeditor5-image/src/imagestyle/imagestyleediting.js", "../../@ckeditor/ckeditor5-image/src/imagestyle/imagestyleui.js", "../../@ckeditor/ckeditor5-image/src/imagestyle.js", "../../@ckeditor/ckeditor5-image/src/imagetoolbar.js", "../../@ckeditor/ckeditor5-image/src/pictureediting.js"],
  "sourcesContent": ["/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { first } from 'ckeditor5/src/utils';\n/**\n * Creates a view element representing the inline image.\n *\n * ```html\n * <span class=\"image-inline\"><img></img></span>\n * ```\n *\n * Note that `alt` and `src` attributes are converted separately, so they are not included.\n *\n * @internal\n */\nexport function createInlineImageViewElement(writer) {\n    return writer.createContainerElement('span', { class: 'image-inline' }, writer.createEmptyElement('img'));\n}\n/**\n * Creates a view element representing the block image.\n *\n * ```html\n * <figure class=\"image\"><img></img></figure>\n * ```\n *\n * Note that `alt` and `src` attributes are converted separately, so they are not included.\n *\n * @internal\n */\nexport function createBlockImageViewElement(writer) {\n    return writer.createContainerElement('figure', { class: 'image' }, [\n        writer.createEmptyElement('img'),\n        writer.createSlot('children')\n    ]);\n}\n/**\n * A function returning a `MatcherPattern` for a particular type of View images.\n *\n * @internal\n * @param matchImageType The type of created image.\n */\nexport function getImgViewElementMatcher(editor, matchImageType) {\n    const imageUtils = editor.plugins.get('ImageUtils');\n    const areBothImagePluginsLoaded = editor.plugins.has('ImageInlineEditing') && editor.plugins.has('ImageBlockEditing');\n    return element => {\n        // Check if the matched view element is an <img>.\n        if (!imageUtils.isInlineImageView(element)) {\n            return null;\n        }\n        // If just one of the plugins is loaded (block or inline), it will match all kinds of images.\n        if (!areBothImagePluginsLoaded) {\n            return getPositiveMatchPattern(element);\n        }\n        // The <img> can be standalone, wrapped in <figure>...</figure> (ImageBlock plugin) or\n        // wrapped in <figure><a>...</a></figure> (LinkImage plugin).\n        const imageType = element.getStyle('display') == 'block' || element.findAncestor(imageUtils.isBlockImageView) ?\n            'imageBlock' :\n            'imageInline';\n        if (imageType !== matchImageType) {\n            return null;\n        }\n        return getPositiveMatchPattern(element);\n    };\n    function getPositiveMatchPattern(element) {\n        const pattern = {\n            name: true\n        };\n        // This will trigger src consumption (See https://github.com/ckeditor/ckeditor5/issues/11530).\n        if (element.hasAttribute('src')) {\n            pattern.attributes = ['src'];\n        }\n        return pattern;\n    }\n}\n/**\n * Considering the current model selection, it returns the name of the model image element\n * (`'imageBlock'` or `'imageInline'`) that will make most sense from the UX perspective if a new\n * image was inserted (also: uploaded, dropped, pasted) at that selection.\n *\n * The assumption is that inserting images into empty blocks or on other block widgets should\n * produce block images. Inline images should be inserted in other cases, e.g. in paragraphs\n * that already contain some text.\n *\n * @internal\n */\nexport function determineImageTypeForInsertionAtSelection(schema, selection) {\n    const firstBlock = first(selection.getSelectedBlocks());\n    // Insert a block image if the selection is not in/on block elements or it's on a block widget.\n    if (!firstBlock || schema.isObject(firstBlock)) {\n        return 'imageBlock';\n    }\n    // A block image should also be inserted into an empty block element\n    // (that is not an empty list item so the list won't get split).\n    if (firstBlock.isEmpty && firstBlock.name != 'listItem') {\n        return 'imageBlock';\n    }\n    // Otherwise insert an inline image.\n    return 'imageInline';\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { findOptimalInsertionRange, isWidget, toWidget } from 'ckeditor5/src/widget';\nimport { determineImageTypeForInsertionAtSelection } from './image/utils';\n/**\n * A set of helpers related to images.\n */\nexport default class ImageUtils extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageUtils';\n    }\n    /**\n     * Checks if the provided model element is an `image` or `imageInline`.\n     */\n    isImage(modelElement) {\n        return this.isInlineImage(modelElement) || this.isBlockImage(modelElement);\n    }\n    /**\n     * Checks if the provided view element represents an inline image.\n     *\n     * Also, see {@link module:image/imageutils~ImageUtils#isImageWidget}.\n     */\n    isInlineImageView(element) {\n        return !!element && element.is('element', 'img');\n    }\n    /**\n     * Checks if the provided view element represents a block image.\n     *\n     * Also, see {@link module:image/imageutils~ImageUtils#isImageWidget}.\n     */\n    isBlockImageView(element) {\n        return !!element && element.is('element', 'figure') && element.hasClass('image');\n    }\n    /**\n     * Handles inserting single file. This method unifies image insertion using {@link module:widget/utils~findOptimalInsertionRange}\n     * method.\n     *\n     * ```ts\n     * const imageUtils = editor.plugins.get( 'ImageUtils' );\n     *\n     * imageUtils.insertImage( { src: 'path/to/image.jpg' } );\n     * ```\n     *\n     * @param attributes Attributes of the inserted image.\n     * This method filters out the attributes which are disallowed by the {@link module:engine/model/schema~Schema}.\n     * @param selectable Place to insert the image. If not specified,\n     * the {@link module:widget/utils~findOptimalInsertionRange} logic will be applied for the block images\n     * and `model.document.selection` for the inline images.\n     *\n     * **Note**: If `selectable` is passed, this helper will not be able to set selection attributes (such as `linkHref`)\n     * and apply them to the new image. In this case, make sure all selection attributes are passed in `attributes`.\n     *\n     * @param imageType Image type of inserted image. If not specified,\n     * it will be determined automatically depending of editor config or place of the insertion.\n     * @return The inserted model image element.\n     */\n    insertImage(attributes = {}, selectable = null, imageType = null) {\n        const editor = this.editor;\n        const model = editor.model;\n        const selection = model.document.selection;\n        imageType = determineImageTypeForInsertion(editor, selectable || selection, imageType);\n        // Mix declarative attributes with selection attributes because the new image should \"inherit\"\n        // the latter for best UX. For instance, inline images inserted into existing links\n        // should not split them. To do that, they need to have \"linkHref\" inherited from the selection.\n        attributes = {\n            ...Object.fromEntries(selection.getAttributes()),\n            ...attributes\n        };\n        for (const attributeName in attributes) {\n            if (!model.schema.checkAttribute(imageType, attributeName)) {\n                delete attributes[attributeName];\n            }\n        }\n        return model.change(writer => {\n            const imageElement = writer.createElement(imageType, attributes);\n            model.insertObject(imageElement, selectable, null, {\n                setSelection: 'on',\n                // If we want to insert a block image (for whatever reason) then we don't want to split text blocks.\n                // This applies only when we don't have the selectable specified (i.e., we insert multiple block images at once).\n                findOptimalPosition: !selectable && imageType != 'imageInline' ? 'auto' : undefined\n            });\n            // Inserting an image might've failed due to schema regulations.\n            if (imageElement.parent) {\n                return imageElement;\n            }\n            return null;\n        });\n    }\n    /**\n     * Returns an image widget editing view element if one is selected or is among the selection's ancestors.\n     */\n    getClosestSelectedImageWidget(selection) {\n        const selectionPosition = selection.getFirstPosition();\n        if (!selectionPosition) {\n            return null;\n        }\n        const viewElement = selection.getSelectedElement();\n        if (viewElement && this.isImageWidget(viewElement)) {\n            return viewElement;\n        }\n        let parent = selectionPosition.parent;\n        while (parent) {\n            if (parent.is('element') && this.isImageWidget(parent)) {\n                return parent;\n            }\n            parent = parent.parent;\n        }\n        return null;\n    }\n    /**\n     * Returns a image model element if one is selected or is among the selection's ancestors.\n     */\n    getClosestSelectedImageElement(selection) {\n        const selectedElement = selection.getSelectedElement();\n        return this.isImage(selectedElement) ? selectedElement : selection.getFirstPosition().findAncestor('imageBlock');\n    }\n    /**\n     * Checks if image can be inserted at current model selection.\n     *\n     * @internal\n     */\n    isImageAllowed() {\n        const model = this.editor.model;\n        const selection = model.document.selection;\n        return isImageAllowedInParent(this.editor, selection) && isNotInsideImage(selection);\n    }\n    /**\n     * Converts a given {@link module:engine/view/element~Element} to an image widget:\n     * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the image widget\n     * element.\n     * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\n     *\n     * @param writer An instance of the view writer.\n     * @param label The element's label. It will be concatenated with the image `alt` attribute if one is present.\n     */\n    toImageWidget(viewElement, writer, label) {\n        writer.setCustomProperty('image', true, viewElement);\n        const labelCreator = () => {\n            const imgElement = this.findViewImgElement(viewElement);\n            const altText = imgElement.getAttribute('alt');\n            return altText ? `${altText} ${label}` : label;\n        };\n        return toWidget(viewElement, writer, { label: labelCreator });\n    }\n    /**\n     * Checks if a given view element is an image widget.\n     */\n    isImageWidget(viewElement) {\n        return !!viewElement.getCustomProperty('image') && isWidget(viewElement);\n    }\n    /**\n     * Checks if the provided model element is an `image`.\n     */\n    isBlockImage(modelElement) {\n        return !!modelElement && modelElement.is('element', 'imageBlock');\n    }\n    /**\n     * Checks if the provided model element is an `imageInline`.\n     */\n    isInlineImage(modelElement) {\n        return !!modelElement && modelElement.is('element', 'imageInline');\n    }\n    /**\n     * Get the view `<img>` from another view element, e.g. a widget (`<figure class=\"image\">`), a link (`<a>`).\n     *\n     * The `<img>` can be located deep in other elements, so this helper performs a deep tree search.\n     */\n    findViewImgElement(figureView) {\n        if (this.isInlineImageView(figureView)) {\n            return figureView;\n        }\n        const editingView = this.editor.editing.view;\n        for (const { item } of editingView.createRangeIn(figureView)) {\n            if (this.isInlineImageView(item)) {\n                return item;\n            }\n        }\n    }\n}\n/**\n * Checks if image is allowed by schema in optimal insertion parent.\n */\nfunction isImageAllowedInParent(editor, selection) {\n    const imageType = determineImageTypeForInsertion(editor, selection, null);\n    if (imageType == 'imageBlock') {\n        const parent = getInsertImageParent(selection, editor.model);\n        if (editor.model.schema.checkChild(parent, 'imageBlock')) {\n            return true;\n        }\n    }\n    else if (editor.model.schema.checkChild(selection.focus, 'imageInline')) {\n        return true;\n    }\n    return false;\n}\n/**\n * Checks if selection is not placed inside an image (e.g. its caption).\n */\nfunction isNotInsideImage(selection) {\n    return [...selection.focus.getAncestors()].every(ancestor => !ancestor.is('element', 'imageBlock'));\n}\n/**\n * Returns a node that will be used to insert image with `model.insertContent`.\n */\nfunction getInsertImageParent(selection, model) {\n    const insertionRange = findOptimalInsertionRange(selection, model);\n    const parent = insertionRange.start.parent;\n    if (parent.isEmpty && !parent.is('element', '$root')) {\n        return parent.parent;\n    }\n    return parent;\n}\n/**\n * Determine image element type name depending on editor config or place of insertion.\n *\n * @param imageType Image element type name. Used to force return of provided element name,\n * but only if there is proper plugin enabled.\n */\nfunction determineImageTypeForInsertion(editor, selectable, imageType) {\n    const schema = editor.model.schema;\n    const configImageInsertType = editor.config.get('image.insert.type');\n    if (!editor.plugins.has('ImageBlockEditing')) {\n        return 'imageInline';\n    }\n    if (!editor.plugins.has('ImageInlineEditing')) {\n        return 'imageBlock';\n    }\n    if (imageType) {\n        return imageType;\n    }\n    if (configImageInsertType === 'inline') {\n        return 'imageInline';\n    }\n    if (configImageInsertType === 'block') {\n        return 'imageBlock';\n    }\n    // Try to replace the selected widget (e.g. another image).\n    if (selectable.is('selection')) {\n        return determineImageTypeForInsertionAtSelection(schema, selectable);\n    }\n    return schema.checkChild(selectable, 'imageInline') ? 'imageInline' : 'imageBlock';\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/autoimage\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { Clipboard } from 'ckeditor5/src/clipboard';\nimport { LivePosition, LiveRange } from 'ckeditor5/src/engine';\nimport { Undo } from 'ckeditor5/src/undo';\nimport { Delete } from 'ckeditor5/src/typing';\nimport { global } from 'ckeditor5/src/utils';\nimport ImageUtils from './imageutils';\n// Implements the pattern: http(s)://(www.)example.com/path/to/resource.ext?query=params&maybe=too.\nconst IMAGE_URL_REGEXP = new RegExp(String(/^(http(s)?:\\/\\/)?[\\w-]+\\.[\\w.~:/[\\]@!$&'()*+,;=%-]+/.source +\n    /\\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source +\n    /(\\?[\\w.~:/[\\]@!$&'()*+,;=%-]*)?/.source +\n    /(#[\\w.~:/[\\]@!$&'()*+,;=%-]*)?$/.source));\n/**\n * The auto-image plugin. It recognizes image links in the pasted content and embeds\n * them shortly after they are injected into the document.\n */\nexport default class AutoImage extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [Clipboard, ImageUtils, Undo, Delete];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'AutoImage';\n    }\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        this._timeoutId = null;\n        this._positionToInsert = null;\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const modelDocument = editor.model.document;\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\n        // We need to listen on `Clipboard#inputTransformation` because we need to save positions of selection.\n        // After pasting, the content between those positions will be checked for a URL that could be transformed\n        // into an image.\n        this.listenTo(clipboardPipeline, 'inputTransformation', () => {\n            const firstRange = modelDocument.selection.getFirstRange();\n            const leftLivePosition = LivePosition.fromPosition(firstRange.start);\n            leftLivePosition.stickiness = 'toPrevious';\n            const rightLivePosition = LivePosition.fromPosition(firstRange.end);\n            rightLivePosition.stickiness = 'toNext';\n            modelDocument.once('change:data', () => {\n                this._embedImageBetweenPositions(leftLivePosition, rightLivePosition);\n                leftLivePosition.detach();\n                rightLivePosition.detach();\n            }, { priority: 'high' });\n        });\n        editor.commands.get('undo').on('execute', () => {\n            if (this._timeoutId) {\n                global.window.clearTimeout(this._timeoutId);\n                this._positionToInsert.detach();\n                this._timeoutId = null;\n                this._positionToInsert = null;\n            }\n        }, { priority: 'high' });\n    }\n    /**\n     * Analyzes the part of the document between provided positions in search for a URL representing an image.\n     * When the URL is found, it is automatically converted into an image.\n     *\n     * @param leftPosition Left position of the selection.\n     * @param rightPosition Right position of the selection.\n     */\n    _embedImageBetweenPositions(leftPosition, rightPosition) {\n        const editor = this.editor;\n        // TODO: Use a marker instead of LiveRange & LivePositions.\n        const urlRange = new LiveRange(leftPosition, rightPosition);\n        const walker = urlRange.getWalker({ ignoreElementEnd: true });\n        const selectionAttributes = Object.fromEntries(editor.model.document.selection.getAttributes());\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        let src = '';\n        for (const node of walker) {\n            if (node.item.is('$textProxy')) {\n                src += node.item.data;\n            }\n        }\n        src = src.trim();\n        // If the URL does not match the image URL regexp, let's skip that.\n        if (!src.match(IMAGE_URL_REGEXP)) {\n            urlRange.detach();\n            return;\n        }\n        // Position will not be available in the `setTimeout` function so let's clone it.\n        this._positionToInsert = LivePosition.fromPosition(leftPosition);\n        // This action mustn't be executed if undo was called between pasting and auto-embedding.\n        this._timeoutId = setTimeout(() => {\n            // Do nothing if image element cannot be inserted at the current position.\n            // See https://github.com/ckeditor/ckeditor5/issues/2763.\n            // Condition must be checked after timeout - pasting may take place on an element, replacing it. The final position matters.\n            const imageCommand = editor.commands.get('insertImage');\n            if (!imageCommand.isEnabled) {\n                urlRange.detach();\n                return;\n            }\n            editor.model.change(writer => {\n                this._timeoutId = null;\n                writer.remove(urlRange);\n                urlRange.detach();\n                let insertionPosition;\n                // Check if the position where the element should be inserted is still valid.\n                // Otherwise leave it as undefined to use the logic of insertImage().\n                if (this._positionToInsert.root.rootName !== '$graveyard') {\n                    insertionPosition = this._positionToInsert.toPosition();\n                }\n                imageUtils.insertImage({ ...selectionAttributes, src }, insertionPosition);\n                this._positionToInsert.detach();\n                this._positionToInsert = null;\n            });\n            const deletePlugin = editor.plugins.get('Delete');\n            deletePlugin.requestUndoOnBackspace();\n        }, 100);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative/imagetextalternativecommand\n */\nimport { Command } from 'ckeditor5/src/core';\n/**\n * The image text alternative command. It is used to change the `alt` attribute of `<imageBlock>` and `<imageInline>` model elements.\n */\nexport default class ImageTextAlternativeCommand extends Command {\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const element = imageUtils.getClosestSelectedImageElement(this.editor.model.document.selection);\n        this.isEnabled = !!element;\n        if (this.isEnabled && element.hasAttribute('alt')) {\n            this.value = element.getAttribute('alt');\n        }\n        else {\n            this.value = false;\n        }\n    }\n    /**\n     * Executes the command.\n     *\n     * @fires execute\n     * @param options\n     * @param options.newValue The new value of the `alt` attribute to set.\n     */\n    execute(options) {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const model = editor.model;\n        const imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\n        model.change(writer => {\n            writer.setAttribute('alt', options.newValue, imageElement);\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative/imagetextalternativeediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageTextAlternativeCommand from './imagetextalternativecommand';\nimport ImageUtils from '../imageutils';\n/**\n * The image text alternative editing plugin.\n *\n * Registers the `'imageTextAlternative'` command.\n */\nexport default class ImageTextAlternativeEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageTextAlternativeEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        this.editor.commands.add('imageTextAlternative', new ImageTextAlternativeCommand(this.editor));\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative/ui/textalternativeformview\n */\nimport { ButtonView, FocusCycler, LabeledFieldView, View, ViewCollection, createLabeledInputText, submitHandler } from 'ckeditor5/src/ui';\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\nimport { icons } from 'ckeditor5/src/core';\nimport '../../../theme/textalternativeform.css';\n// See: #8833.\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\nimport '@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css';\n/**\n * The TextAlternativeFormView class.\n */\nexport default class TextAlternativeFormView extends View {\n    /**\n     * @inheritDoc\n     */\n    constructor(locale) {\n        super(locale);\n        const t = this.locale.t;\n        this.focusTracker = new FocusTracker();\n        this.keystrokes = new KeystrokeHandler();\n        this.labeledInput = this._createLabeledInputView();\n        this.saveButtonView = this._createButton(t('Save'), icons.check, 'ck-button-save');\n        this.saveButtonView.type = 'submit';\n        this.cancelButtonView = this._createButton(t('Cancel'), icons.cancel, 'ck-button-cancel', 'cancel');\n        this._focusables = new ViewCollection();\n        this._focusCycler = new FocusCycler({\n            focusables: this._focusables,\n            focusTracker: this.focusTracker,\n            keystrokeHandler: this.keystrokes,\n            actions: {\n                // Navigate form fields backwards using the Shift + Tab keystroke.\n                focusPrevious: 'shift + tab',\n                // Navigate form fields forwards using the Tab key.\n                focusNext: 'tab'\n            }\n        });\n        this.setTemplate({\n            tag: 'form',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-text-alternative-form',\n                    'ck-responsive-form'\n                ],\n                // https://github.com/ckeditor/ckeditor5-image/issues/40\n                tabindex: '-1'\n            },\n            children: [\n                this.labeledInput,\n                this.saveButtonView,\n                this.cancelButtonView\n            ]\n        });\n    }\n    /**\n     * @inheritDoc\n     */\n    render() {\n        super.render();\n        this.keystrokes.listenTo(this.element);\n        submitHandler({ view: this });\n        [this.labeledInput, this.saveButtonView, this.cancelButtonView]\n            .forEach(v => {\n            // Register the view as focusable.\n            this._focusables.add(v);\n            // Register the view in the focus tracker.\n            this.focusTracker.add(v.element);\n        });\n    }\n    /**\n     * @inheritDoc\n     */\n    destroy() {\n        super.destroy();\n        this.focusTracker.destroy();\n        this.keystrokes.destroy();\n    }\n    /**\n     * Creates the button view.\n     *\n     * @param label The button label\n     * @param icon The button's icon.\n     * @param className The additional button CSS class name.\n     * @param eventName The event name that the ButtonView#execute event will be delegated to.\n     * @returns The button view instance.\n     */\n    _createButton(label, icon, className, eventName) {\n        const button = new ButtonView(this.locale);\n        button.set({\n            label,\n            icon,\n            tooltip: true\n        });\n        button.extendTemplate({\n            attributes: {\n                class: className\n            }\n        });\n        if (eventName) {\n            button.delegate('execute').to(this, eventName);\n        }\n        return button;\n    }\n    /**\n     * Creates an input with a label.\n     *\n     * @returns Labeled field view instance.\n     */\n    _createLabeledInputView() {\n        const t = this.locale.t;\n        const labeledInput = new LabeledFieldView(this.locale, createLabeledInputText);\n        labeledInput.label = t('Text alternative');\n        return labeledInput;\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { BalloonPanelView } from 'ckeditor5/src/ui';\n/**\n * A helper utility that positions the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} instance\n * with respect to the image in the editor content, if one is selected.\n *\n * @param editor The editor instance.\n */\nexport function repositionContextualBalloon(editor) {\n    const balloon = editor.plugins.get('ContextualBalloon');\n    const imageUtils = editor.plugins.get('ImageUtils');\n    if (imageUtils.getClosestSelectedImageWidget(editor.editing.view.document.selection)) {\n        const position = getBalloonPositionData(editor);\n        balloon.updatePosition(position);\n    }\n}\n/**\n * Returns the positioning options that control the geometry of the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} with respect\n * to the selected element in the editor content.\n *\n * @param editor The editor instance.\n */\nexport function getBalloonPositionData(editor) {\n    const editingView = editor.editing.view;\n    const defaultPositions = BalloonPanelView.defaultPositions;\n    const imageUtils = editor.plugins.get('ImageUtils');\n    return {\n        target: editingView.domConverter.mapViewToDom(imageUtils.getClosestSelectedImageWidget(editingView.document.selection)),\n        positions: [\n            defaultPositions.northArrowSouth,\n            defaultPositions.northArrowSouthWest,\n            defaultPositions.northArrowSouthEast,\n            defaultPositions.southArrowNorth,\n            defaultPositions.southArrowNorthWest,\n            defaultPositions.southArrowNorthEast,\n            defaultPositions.viewportStickyNorth\n        ]\n    };\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative/imagetextalternativeui\n */\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { ButtonView, ContextualBalloon, clickOutsideHandler, CssTransitionDisablerMixin } from 'ckeditor5/src/ui';\nimport TextAlternativeFormView from './ui/textalternativeformview';\nimport { repositionContextualBalloon, getBalloonPositionData } from '../image/ui/utils';\n/**\n * The image text alternative UI plugin.\n *\n * The plugin uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\n */\nexport default class ImageTextAlternativeUI extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ContextualBalloon];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageTextAlternativeUI';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        this._createButton();\n    }\n    /**\n     * @inheritDoc\n     */\n    destroy() {\n        super.destroy();\n        // Destroy created UI components as they are not automatically destroyed (see ckeditor5#1341).\n        if (this._form) {\n            this._form.destroy();\n        }\n    }\n    /**\n     * Creates a button showing the balloon panel for changing the image text alternative and\n     * registers it in the editor {@link module:ui/componentfactory~ComponentFactory ComponentFactory}.\n     */\n    _createButton() {\n        const editor = this.editor;\n        const t = editor.t;\n        editor.ui.componentFactory.add('imageTextAlternative', locale => {\n            const command = editor.commands.get('imageTextAlternative');\n            const view = new ButtonView(locale);\n            view.set({\n                label: t('Change image text alternative'),\n                icon: icons.lowVision,\n                tooltip: true\n            });\n            view.bind('isEnabled').to(command, 'isEnabled');\n            view.bind('isOn').to(command, 'value', value => !!value);\n            this.listenTo(view, 'execute', () => {\n                this._showForm();\n            });\n            return view;\n        });\n    }\n    /**\n     * Creates the {@link module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}\n     * form.\n     */\n    _createForm() {\n        const editor = this.editor;\n        const view = editor.editing.view;\n        const viewDocument = view.document;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        this._balloon = this.editor.plugins.get('ContextualBalloon');\n        this._form = new (CssTransitionDisablerMixin(TextAlternativeFormView))(editor.locale);\n        // Render the form so its #element is available for clickOutsideHandler.\n        this._form.render();\n        this.listenTo(this._form, 'submit', () => {\n            editor.execute('imageTextAlternative', {\n                newValue: this._form.labeledInput.fieldView.element.value\n            });\n            this._hideForm(true);\n        });\n        this.listenTo(this._form, 'cancel', () => {\n            this._hideForm(true);\n        });\n        // Close the form on Esc key press.\n        this._form.keystrokes.set('Esc', (data, cancel) => {\n            this._hideForm(true);\n            cancel();\n        });\n        // Reposition the balloon or hide the form if an image widget is no longer selected.\n        this.listenTo(editor.ui, 'update', () => {\n            if (!imageUtils.getClosestSelectedImageWidget(viewDocument.selection)) {\n                this._hideForm(true);\n            }\n            else if (this._isVisible) {\n                repositionContextualBalloon(editor);\n            }\n        });\n        // Close on click outside of balloon panel element.\n        clickOutsideHandler({\n            emitter: this._form,\n            activator: () => this._isVisible,\n            contextElements: () => [this._balloon.view.element],\n            callback: () => this._hideForm()\n        });\n    }\n    /**\n     * Shows the {@link #_form} in the {@link #_balloon}.\n     */\n    _showForm() {\n        if (this._isVisible) {\n            return;\n        }\n        if (!this._form) {\n            this._createForm();\n        }\n        const editor = this.editor;\n        const command = editor.commands.get('imageTextAlternative');\n        const labeledInput = this._form.labeledInput;\n        this._form.disableCssTransitions();\n        if (!this._isInBalloon) {\n            this._balloon.add({\n                view: this._form,\n                position: getBalloonPositionData(editor)\n            });\n        }\n        // Make sure that each time the panel shows up, the field remains in sync with the value of\n        // the command. If the user typed in the input, then canceled the balloon (`labeledInput#value`\n        // stays unaltered) and re-opened it without changing the value of the command, they would see the\n        // old value instead of the actual value of the command.\n        // https://github.com/ckeditor/ckeditor5-image/issues/114\n        labeledInput.fieldView.value = labeledInput.fieldView.element.value = command.value || '';\n        this._form.labeledInput.fieldView.select();\n        this._form.enableCssTransitions();\n    }\n    /**\n     * Removes the {@link #_form} from the {@link #_balloon}.\n     *\n     * @param focusEditable Controls whether the editing view is focused afterwards.\n     */\n    _hideForm(focusEditable = false) {\n        if (!this._isInBalloon) {\n            return;\n        }\n        // Blur the input element before removing it from DOM to prevent issues in some browsers.\n        // See https://github.com/ckeditor/ckeditor5/issues/1501.\n        if (this._form.focusTracker.isFocused) {\n            this._form.saveButtonView.focus();\n        }\n        this._balloon.remove(this._form);\n        if (focusEditable) {\n            this.editor.editing.view.focus();\n        }\n    }\n    /**\n     * Returns `true` when the {@link #_form} is the visible view in the {@link #_balloon}.\n     */\n    get _isVisible() {\n        return !!this._balloon && this._balloon.visibleView === this._form;\n    }\n    /**\n     * Returns `true` when the {@link #_form} is in the {@link #_balloon}.\n     */\n    get _isInBalloon() {\n        return !!this._balloon && this._balloon.hasView(this._form);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetextalternative\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageTextAlternativeEditing from './imagetextalternative/imagetextalternativeediting';\nimport ImageTextAlternativeUI from './imagetextalternative/imagetextalternativeui';\n/**\n * The image text alternative plugin.\n *\n * For a detailed overview, check the {@glink features/images/images-styles image styles} documentation.\n *\n * This is a \"glue\" plugin which loads the\n *  {@link module:image/imagetextalternative/imagetextalternativeediting~ImageTextAlternativeEditing}\n * and {@link module:image/imagetextalternative/imagetextalternativeui~ImageTextAlternativeUI} plugins.\n */\nexport default class ImageTextAlternative extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageTextAlternativeEditing, ImageTextAlternativeUI];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageTextAlternative';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { first } from 'ckeditor5/src/utils';\n/**\n * Returns a function that converts the image view representation:\n *\n * ```html\n * <figure class=\"image\"><img src=\"...\" alt=\"...\"></img></figure>\n * ```\n *\n * to the model representation:\n *\n * ```html\n * <imageBlock src=\"...\" alt=\"...\"></imageBlock>\n * ```\n *\n * The entire content of the `<figure>` element except the first `<img>` is being converted as children\n * of the `<imageBlock>` model element.\n *\n * @internal\n */\nexport function upcastImageFigure(imageUtils) {\n    const converter = (evt, data, conversionApi) => {\n        // Do not convert if this is not an \"image figure\".\n        if (!conversionApi.consumable.test(data.viewItem, { name: true, classes: 'image' })) {\n            return;\n        }\n        // Find an image element inside the figure element.\n        const viewImage = imageUtils.findViewImgElement(data.viewItem);\n        // Do not convert if image element is absent or was already converted.\n        if (!viewImage || !conversionApi.consumable.test(viewImage, { name: true })) {\n            return;\n        }\n        // Consume the figure to prevent other converters from processing it again.\n        conversionApi.consumable.consume(data.viewItem, { name: true, classes: 'image' });\n        // Convert view image to model image.\n        const conversionResult = conversionApi.convertItem(viewImage, data.modelCursor);\n        // Get image element from conversion result.\n        const modelImage = first(conversionResult.modelRange.getItems());\n        // When image wasn't successfully converted then finish conversion.\n        if (!modelImage) {\n            // Revert consumed figure so other features can convert it.\n            conversionApi.consumable.revert(data.viewItem, { name: true, classes: 'image' });\n            return;\n        }\n        // Convert rest of the figure element's children as an image children.\n        conversionApi.convertChildren(data.viewItem, modelImage);\n        conversionApi.updateConversionResult(modelImage, data);\n    };\n    return dispatcher => {\n        dispatcher.on('element:figure', converter);\n    };\n}\n/**\n * Returns a function that converts the image view representation:\n *\n * ```html\n * <picture><source ... /><source ... />...<img ... /></picture>\n * ```\n *\n * to the model representation as the `sources` attribute:\n *\n * ```html\n * <image[Block|Inline] ... sources=\"...\"></image[Block|Inline]>\n * ```\n *\n * @internal\n */\nexport function upcastPicture(imageUtils) {\n    const sourceAttributeNames = ['srcset', 'media', 'type', 'sizes'];\n    const converter = (evt, data, conversionApi) => {\n        const pictureViewElement = data.viewItem;\n        // Do not convert <picture> if already consumed.\n        if (!conversionApi.consumable.test(pictureViewElement, { name: true })) {\n            return;\n        }\n        const sources = new Map();\n        // Collect all <source /> elements attribute values.\n        for (const childSourceElement of pictureViewElement.getChildren()) {\n            if (childSourceElement.is('element', 'source')) {\n                const attributes = {};\n                for (const name of sourceAttributeNames) {\n                    if (childSourceElement.hasAttribute(name)) {\n                        // Don't collect <source /> attribute if already consumed somewhere else.\n                        if (conversionApi.consumable.test(childSourceElement, { attributes: name })) {\n                            attributes[name] = childSourceElement.getAttribute(name);\n                        }\n                    }\n                }\n                if (Object.keys(attributes).length) {\n                    sources.set(childSourceElement, attributes);\n                }\n            }\n        }\n        const imgViewElement = imageUtils.findViewImgElement(pictureViewElement);\n        // Don't convert when a picture has no <img/> inside (it is broken).\n        if (!imgViewElement) {\n            return;\n        }\n        let modelImage = data.modelCursor.parent;\n        // - In case of an inline image (cursor parent in a <paragraph>), the <img/> must be converted right away\n        // because no converter handled it yet and otherwise there would be no model element to set the sources attribute on.\n        // - In case of a block image, the <figure class=\"image\"> converter (in ImageBlockEditing) converts the\n        // <img/> right away on its own and the modelCursor is already inside an imageBlock and there's nothing special\n        // to do here.\n        if (!modelImage.is('element', 'imageBlock')) {\n            const conversionResult = conversionApi.convertItem(imgViewElement, data.modelCursor);\n            // Set image range as conversion result.\n            data.modelRange = conversionResult.modelRange;\n            // Continue conversion where image conversion ends.\n            data.modelCursor = conversionResult.modelCursor;\n            modelImage = first(conversionResult.modelRange.getItems());\n        }\n        conversionApi.consumable.consume(pictureViewElement, { name: true });\n        // Consume only these <source/> attributes that were actually collected and will be passed on\n        // to the image model element.\n        for (const [sourceElement, attributes] of sources) {\n            conversionApi.consumable.consume(sourceElement, { attributes: Object.keys(attributes) });\n        }\n        if (sources.size) {\n            conversionApi.writer.setAttribute('sources', Array.from(sources.values()), modelImage);\n        }\n        // Convert rest of the <picture> children as an image children. Other converters may want to consume them.\n        conversionApi.convertChildren(pictureViewElement, modelImage);\n    };\n    return dispatcher => {\n        dispatcher.on('element:picture', converter);\n    };\n}\n/**\n * Converter used to convert the `srcset` model image attribute to the `srcset`, `sizes` and `width` attributes in the view.\n *\n * @internal\n * @param imageType The type of the image.\n */\nexport function downcastSrcsetAttribute(imageUtils, imageType) {\n    const converter = (evt, data, conversionApi) => {\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\n            return;\n        }\n        const writer = conversionApi.writer;\n        const element = conversionApi.mapper.toViewElement(data.item);\n        const img = imageUtils.findViewImgElement(element);\n        if (data.attributeNewValue === null) {\n            const srcset = data.attributeOldValue;\n            if (srcset && srcset.data) {\n                writer.removeAttribute('srcset', img);\n                writer.removeAttribute('sizes', img);\n                if (srcset.width) {\n                    writer.removeAttribute('width', img);\n                }\n            }\n        }\n        else {\n            const srcset = data.attributeNewValue;\n            if (srcset && srcset.data) {\n                writer.setAttribute('srcset', srcset.data, img);\n                // Always outputting `100vw`. See https://github.com/ckeditor/ckeditor5-image/issues/2.\n                writer.setAttribute('sizes', '100vw', img);\n                if (srcset.width) {\n                    writer.setAttribute('width', srcset.width, img);\n                }\n            }\n        }\n    };\n    return dispatcher => {\n        dispatcher.on(`attribute:srcset:${imageType}`, converter);\n    };\n}\n/**\n * Converts the `source` model attribute to the `<picture><source /><source />...<img /></picture>`\n * view structure.\n *\n * @internal\n */\nexport function downcastSourcesAttribute(imageUtils) {\n    const converter = (evt, data, conversionApi) => {\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\n            return;\n        }\n        const viewWriter = conversionApi.writer;\n        const element = conversionApi.mapper.toViewElement(data.item);\n        const imgElement = imageUtils.findViewImgElement(element);\n        const attributeNewValue = data.attributeNewValue;\n        if (attributeNewValue && attributeNewValue.length) {\n            // Make sure <picture> does not break attribute elements, for instance <a> in linked images.\n            const pictureElement = viewWriter.createContainerElement('picture', null, attributeNewValue.map(sourceAttributes => {\n                return viewWriter.createEmptyElement('source', sourceAttributes);\n            }));\n            // Collect all wrapping attribute elements.\n            const attributeElements = [];\n            let viewElement = imgElement.parent;\n            while (viewElement && viewElement.is('attributeElement')) {\n                const parentElement = viewElement.parent;\n                viewWriter.unwrap(viewWriter.createRangeOn(imgElement), viewElement);\n                attributeElements.unshift(viewElement);\n                viewElement = parentElement;\n            }\n            // Insert the picture and move img into it.\n            viewWriter.insert(viewWriter.createPositionBefore(imgElement), pictureElement);\n            viewWriter.move(viewWriter.createRangeOn(imgElement), viewWriter.createPositionAt(pictureElement, 'end'));\n            // Apply collected attribute elements over the new picture element.\n            for (const attributeElement of attributeElements) {\n                viewWriter.wrap(viewWriter.createRangeOn(pictureElement), attributeElement);\n            }\n        }\n        // Both setting \"sources\" to an empty array and removing the attribute should unwrap the <img />.\n        // Unwrap once if the latter followed the former, though.\n        else if (imgElement.parent.is('element', 'picture')) {\n            const pictureElement = imgElement.parent;\n            viewWriter.move(viewWriter.createRangeOn(imgElement), viewWriter.createPositionBefore(pictureElement));\n            viewWriter.remove(pictureElement);\n        }\n    };\n    return dispatcher => {\n        dispatcher.on('attribute:sources:imageBlock', converter);\n        dispatcher.on('attribute:sources:imageInline', converter);\n    };\n}\n/**\n * Converter used to convert a given image attribute from the model to the view.\n *\n * @internal\n * @param imageType The type of the image.\n * @param attributeKey The name of the attribute to convert.\n */\nexport function downcastImageAttribute(imageUtils, imageType, attributeKey) {\n    const converter = (evt, data, conversionApi) => {\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\n            return;\n        }\n        const viewWriter = conversionApi.writer;\n        const element = conversionApi.mapper.toViewElement(data.item);\n        const img = imageUtils.findViewImgElement(element);\n        viewWriter.setAttribute(data.attributeKey, data.attributeNewValue || '', img);\n    };\n    return dispatcher => {\n        dispatcher.on(`attribute:${attributeKey}:${imageType}`, converter);\n    };\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image/imageloadobserver\n */\nimport { Observer } from 'ckeditor5/src/engine';\n/**\n * Observes all new images added to the {@link module:engine/view/document~Document},\n * fires {@link module:engine/view/document~Document#event:imageLoaded} and\n * {@link module:engine/view/document~Document#event:layoutChanged} event every time when the new image\n * has been loaded.\n *\n * **Note:** This event is not fired for images that has been added to the document and rendered as `complete` (already loaded).\n */\nexport default class ImageLoadObserver extends Observer {\n    /**\n     * @inheritDoc\n     */\n    observe(domRoot) {\n        this.listenTo(domRoot, 'load', (event, domEvent) => {\n            const domElement = domEvent.target;\n            if (this.checkShouldIgnoreEventFromTarget(domElement)) {\n                return;\n            }\n            if (domElement.tagName == 'IMG') {\n                this._fireEvents(domEvent);\n            }\n            // Use capture phase for better performance (#4504).\n        }, { useCapture: true });\n    }\n    /**\n     * @inheritDoc\n     */\n    stopObserving(domRoot) {\n        this.stopListening(domRoot);\n    }\n    /**\n     * Fires {@link module:engine/view/document~Document#event:layoutChanged} and\n     * {@link module:engine/view/document~Document#event:imageLoaded}\n     * if observer {@link #isEnabled is enabled}.\n     *\n     * @param domEvent The DOM event.\n     */\n    _fireEvents(domEvent) {\n        if (this.isEnabled) {\n            this.document.fire('layoutChanged');\n            this.document.fire('imageLoaded', domEvent);\n        }\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image/insertimagecommand\n */\nimport { Command } from 'ckeditor5/src/core';\nimport { logWarning, toArray } from 'ckeditor5/src/utils';\n/**\n * Insert image command.\n *\n * The command is registered by the {@link module:image/image/imageediting~ImageEditing} plugin as `insertImage`\n * and it is also available via aliased `imageInsert` name.\n *\n * In order to insert an image at the current selection position\n * (according to the {@link module:widget/utils~findOptimalInsertionRange} algorithm),\n * execute the command and specify the image source:\n *\n * ```ts\n * editor.execute( 'insertImage', { source: 'http://url.to.the/image' } );\n * ```\n *\n * It is also possible to insert multiple images at once:\n *\n * ```ts\n * editor.execute( 'insertImage', {\n * \tsource:  [\n * \t\t'path/to/image.jpg',\n * \t\t'path/to/other-image.jpg'\n * \t]\n * } );\n * ```\n *\n * If you want to take the full control over the process, you can specify individual model attributes:\n *\n * ```ts\n * editor.execute( 'insertImage', {\n * \tsource:  [\n * \t\t{ src: 'path/to/image.jpg', alt: 'First alt text' },\n * \t\t{ src: 'path/to/other-image.jpg', alt: 'Second alt text', customAttribute: 'My attribute value' }\n * \t]\n * } );\n * ```\n */\nexport default class InsertImageCommand extends Command {\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        const configImageInsertType = editor.config.get('image.insert.type');\n        if (!editor.plugins.has('ImageBlockEditing')) {\n            if (configImageInsertType === 'block') {\n                /**\n                 * The {@link module:image/imageblock~ImageBlock} plugin must be enabled to allow inserting block images. See\n                 * {@link module:image/imageconfig~ImageInsertConfig#type} to learn more.\n                 *\n                 * @error image-block-plugin-required\n                 */\n                logWarning('image-block-plugin-required');\n            }\n        }\n        if (!editor.plugins.has('ImageInlineEditing')) {\n            if (configImageInsertType === 'inline') {\n                /**\n                 * The {@link module:image/imageinline~ImageInline} plugin must be enabled to allow inserting inline images. See\n                 * {@link module:image/imageconfig~ImageInsertConfig#type} to learn more.\n                 *\n                 * @error image-inline-plugin-required\n                 */\n                logWarning('image-inline-plugin-required');\n            }\n        }\n    }\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        this.isEnabled = imageUtils.isImageAllowed();\n    }\n    /**\n     * Executes the command.\n     *\n     * @fires execute\n     * @param options Options for the executed command.\n     * @param options.source The image source or an array of image sources to insert.\n     * See the documentation of the command to learn more about accepted formats.\n     */\n    execute(options) {\n        const sourceDefinitions = toArray(options.source);\n        const selection = this.editor.model.document.selection;\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        // In case of multiple images, each image (starting from the 2nd) will be inserted at a position that\n        // follows the previous one. That will move the selection and, to stay on the safe side and make sure\n        // all images inherit the same selection attributes, they are collected beforehand.\n        //\n        // Applying these attributes ensures, for instance, that inserting an (inline) image into a link does\n        // not split that link but preserves its continuity.\n        //\n        // Note: Selection attributes that do not make sense for images will be filtered out by insertImage() anyway.\n        const selectionAttributes = Object.fromEntries(selection.getAttributes());\n        sourceDefinitions.forEach((sourceDefinition, index) => {\n            const selectedElement = selection.getSelectedElement();\n            if (typeof sourceDefinition === 'string') {\n                sourceDefinition = { src: sourceDefinition };\n            }\n            // Inserting of an inline image replace the selected element and make a selection on the inserted image.\n            // Therefore inserting multiple inline images requires creating position after each element.\n            if (index && selectedElement && imageUtils.isImage(selectedElement)) {\n                const position = this.editor.model.createPositionAfter(selectedElement);\n                imageUtils.insertImage({ ...sourceDefinition, ...selectionAttributes }, position);\n            }\n            else {\n                imageUtils.insertImage({ ...sourceDefinition, ...selectionAttributes });\n            }\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Command } from 'ckeditor5/src/core';\n/**\n * @module image/image/replaceimagesourcecommand\n */\n/**\n * Replace image source command.\n *\n * Changes image source to the one provided. Can be executed as follows:\n *\n * ```ts\n * editor.execute( 'replaceImageSource', { source: 'http://url.to.the/image' } );\n * ```\n */\nexport default class ReplaceImageSourceCommand extends Command {\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const element = this.editor.model.document.selection.getSelectedElement();\n        this.isEnabled = imageUtils.isImage(element);\n        this.value = this.isEnabled ? element.getAttribute('src') : null;\n    }\n    /**\n     * Executes the command.\n     *\n     * @fires execute\n     * @param options Options for the executed command.\n     * @param options.source The image source to replace.\n     */\n    execute(options) {\n        const image = this.editor.model.document.selection.getSelectedElement();\n        this.editor.model.change(writer => {\n            writer.setAttribute('src', options.source, image);\n            writer.removeAttribute('srcset', image);\n            writer.removeAttribute('sizes', image);\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image/imageediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageLoadObserver from './imageloadobserver';\nimport InsertImageCommand from './insertimagecommand';\nimport ReplaceImageSourceCommand from './replaceimagesourcecommand';\nimport ImageUtils from '../imageutils';\n/**\n * The image engine plugin. This module loads common code shared between\n * {@link module:image/image/imageinlineediting~ImageInlineEditing} and\n * {@link module:image/image/imageblockediting~ImageBlockEditing} plugins.\n *\n * This plugin registers the {@link module:image/image/insertimagecommand~InsertImageCommand 'insertImage'} command.\n */\nexport default class ImageEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const conversion = editor.conversion;\n        // See https://github.com/ckeditor/ckeditor5-image/issues/142.\n        editor.editing.view.addObserver(ImageLoadObserver);\n        conversion.for('upcast')\n            .attributeToAttribute({\n            view: {\n                name: 'img',\n                key: 'alt'\n            },\n            model: 'alt'\n        })\n            .attributeToAttribute({\n            view: {\n                name: 'img',\n                key: 'srcset'\n            },\n            model: {\n                key: 'srcset',\n                value: (viewImage) => {\n                    const value = {\n                        data: viewImage.getAttribute('srcset')\n                    };\n                    if (viewImage.hasAttribute('width')) {\n                        value.width = viewImage.getAttribute('width');\n                    }\n                    return value;\n                }\n            }\n        });\n        const insertImageCommand = new InsertImageCommand(editor);\n        const replaceImageSourceCommand = new ReplaceImageSourceCommand(editor);\n        editor.commands.add('insertImage', insertImageCommand);\n        editor.commands.add('replaceImageSource', replaceImageSourceCommand);\n        // `imageInsert` is an alias for backward compatibility.\n        editor.commands.add('imageInsert', insertImageCommand);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Command } from 'ckeditor5/src/core';\n/**\n * The image type command. It changes the type of a selected image, depending on the configuration.\n */\nexport default class ImageTypeCommand extends Command {\n    /**\n     * @inheritDoc\n     *\n     * @param modelElementName Model element name the command converts to.\n     */\n    constructor(editor, modelElementName) {\n        super(editor);\n        this._modelElementName = modelElementName;\n    }\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const element = imageUtils.getClosestSelectedImageElement(this.editor.model.document.selection);\n        if (this._modelElementName === 'imageBlock') {\n            this.isEnabled = imageUtils.isInlineImage(element);\n        }\n        else {\n            this.isEnabled = imageUtils.isBlockImage(element);\n        }\n    }\n    /**\n     * Executes the command and changes the type of a selected image.\n     *\n     * @fires execute\n     * @returns An object containing references to old and new model image elements\n     * (for before and after the change) so external integrations can hook into the decorated\n     * `execute` event and handle this change. `null` if the type change failed.\n     */\n    execute() {\n        const editor = this.editor;\n        const model = this.editor.model;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const oldElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\n        const attributes = Object.fromEntries(oldElement.getAttributes());\n        // Don't change image type if \"src\" is missing (a broken image), unless there's \"uploadId\" set.\n        // This state may happen during image upload (before it finishes) and it should be possible to change type\n        // of the image in the meantime.\n        if (!attributes.src && !attributes.uploadId) {\n            return null;\n        }\n        return model.change(writer => {\n            // Get all markers that contain the old image element.\n            const markers = Array.from(model.markers)\n                .filter(marker => marker.getRange().containsItem(oldElement));\n            const newElement = imageUtils.insertImage(attributes, model.createSelection(oldElement, 'on'), this._modelElementName);\n            if (!newElement) {\n                return null;\n            }\n            const newElementRange = writer.createRangeOn(newElement);\n            // Expand the previously intersecting markers' ranges to include the new image element.\n            for (const marker of markers) {\n                const markerRange = marker.getRange();\n                // Join the survived part of the old marker range with the new element range\n                // (loosely because there could be some new paragraph or the existing one might got split).\n                const range = markerRange.root.rootName != '$graveyard' ?\n                    markerRange.getJoined(newElementRange, true) : newElementRange;\n                writer.updateMarker(marker, { range });\n            }\n            return {\n                oldElement,\n                newElement\n            };\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image/imageblockediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\nimport { UpcastWriter } from 'ckeditor5/src/engine';\nimport { downcastImageAttribute, downcastSrcsetAttribute, upcastImageFigure } from './converters';\nimport ImageEditing from './imageediting';\nimport ImageTypeCommand from './imagetypecommand';\nimport ImageUtils from '../imageutils';\nimport { getImgViewElementMatcher, createBlockImageViewElement, determineImageTypeForInsertionAtSelection } from '../image/utils';\n/**\n * The image block plugin.\n *\n * It registers:\n *\n * * `<imageBlock>` as a block element in the document schema, and allows `alt`, `src` and `srcset` attributes.\n * * converters for editing and data pipelines.,\n * * {@link module:image/image/imagetypecommand~ImageTypeCommand `'imageTypeBlock'`} command that converts inline images into\n * block images.\n */\nexport default class ImageBlockEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageEditing, ImageUtils, ClipboardPipeline];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageBlockEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const schema = editor.model.schema;\n        // Converters 'alt' and 'srcset' are added in 'ImageEditing' plugin.\n        schema.register('imageBlock', {\n            inheritAllFrom: '$blockObject',\n            allowAttributes: ['alt', 'src', 'srcset']\n        });\n        this._setupConversion();\n        if (editor.plugins.has('ImageInlineEditing')) {\n            editor.commands.add('imageTypeBlock', new ImageTypeCommand(this.editor, 'imageBlock'));\n            this._setupClipboardIntegration();\n        }\n    }\n    /**\n     * Configures conversion pipelines to support upcasting and downcasting\n     * block images (block image widgets) and their attributes.\n     */\n    _setupConversion() {\n        const editor = this.editor;\n        const t = editor.t;\n        const conversion = editor.conversion;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        conversion.for('dataDowncast')\n            .elementToStructure({\n            model: 'imageBlock',\n            view: (modelElement, { writer }) => createBlockImageViewElement(writer)\n        });\n        conversion.for('editingDowncast')\n            .elementToStructure({\n            model: 'imageBlock',\n            view: (modelElement, { writer }) => imageUtils.toImageWidget(createBlockImageViewElement(writer), writer, t('image widget'))\n        });\n        conversion.for('downcast')\n            .add(downcastImageAttribute(imageUtils, 'imageBlock', 'src'))\n            .add(downcastImageAttribute(imageUtils, 'imageBlock', 'alt'))\n            .add(downcastSrcsetAttribute(imageUtils, 'imageBlock'));\n        // More image related upcasts are in 'ImageEditing' plugin.\n        conversion.for('upcast')\n            .elementToElement({\n            view: getImgViewElementMatcher(editor, 'imageBlock'),\n            model: (viewImage, { writer }) => writer.createElement('imageBlock', viewImage.hasAttribute('src') ? { src: viewImage.getAttribute('src') } : undefined)\n        })\n            .add(upcastImageFigure(imageUtils));\n    }\n    /**\n     * Integrates the plugin with the clipboard pipeline.\n     *\n     * Idea is that the feature should recognize the user's intent when an **inline** image is\n     * pasted or dropped. If such an image is pasted/dropped:\n     *\n     * * into an empty block (e.g. an empty paragraph),\n     * * on another object (e.g. some block widget).\n     *\n     * it gets converted into a block image on the fly. We assume this is the user's intent\n     * if they decided to put their image there.\n     *\n     * See the `ImageInlineEditing` for the similar integration that works in the opposite direction.\n     */\n    _setupClipboardIntegration() {\n        const editor = this.editor;\n        const model = editor.model;\n        const editingView = editor.editing.view;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\n        this.listenTo(clipboardPipeline, 'inputTransformation', (evt, data) => {\n            const docFragmentChildren = Array.from(data.content.getChildren());\n            let modelRange;\n            // Make sure only <img> elements are dropped or pasted. Otherwise, if there some other HTML\n            // mixed up, this should be handled as a regular paste.\n            if (!docFragmentChildren.every(imageUtils.isInlineImageView)) {\n                return;\n            }\n            // When drag and dropping, data.targetRanges specifies where to drop because\n            // this is usually a different place than the current model selection (the user\n            // uses a drop marker to specify the drop location).\n            if (data.targetRanges) {\n                modelRange = editor.editing.mapper.toModelRange(data.targetRanges[0]);\n            }\n            // Pasting, however, always occurs at the current model selection.\n            else {\n                modelRange = model.document.selection.getFirstRange();\n            }\n            const selection = model.createSelection(modelRange);\n            // Convert inline images into block images only when the currently selected block is empty\n            // (e.g. an empty paragraph) or some object is selected (to replace it).\n            if (determineImageTypeForInsertionAtSelection(model.schema, selection) === 'imageBlock') {\n                const writer = new UpcastWriter(editingView.document);\n                // Wrap <img ... /> -> <figure class=\"image\"><img .../></figure>\n                const blockViewImages = docFragmentChildren.map(inlineViewImage => writer.createElement('figure', { class: 'image' }, inlineViewImage));\n                data.content = writer.createDocumentFragment(blockViewImages);\n            }\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageblock\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { Widget } from 'ckeditor5/src/widget';\nimport ImageTextAlternative from './imagetextalternative';\nimport ImageBlockEditing from './image/imageblockediting';\nimport '../theme/image.css';\n/**\n * The image block plugin.\n *\n * This is a \"glue\" plugin which loads the following plugins:\n *\n * * {@link module:image/image/imageblockediting~ImageBlockEditing},\n * * {@link module:image/imagetextalternative~ImageTextAlternative}.\n *\n * Usually, it is used in conjunction with other plugins from this package. See the {@glink api/image package page}\n * for more information.\n */\nexport default class ImageBlock extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageBlockEditing, Widget, ImageTextAlternative];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageBlock';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image/imageinlineediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\nimport { UpcastWriter } from 'ckeditor5/src/engine';\nimport { downcastImageAttribute, downcastSrcsetAttribute } from './converters';\nimport ImageEditing from './imageediting';\nimport ImageTypeCommand from './imagetypecommand';\nimport ImageUtils from '../imageutils';\nimport { getImgViewElementMatcher, createInlineImageViewElement, determineImageTypeForInsertionAtSelection } from '../image/utils';\n/**\n * The image inline plugin.\n *\n * It registers:\n *\n * * `<imageInline>` as an inline element in the document schema, and allows `alt`, `src` and `srcset` attributes.\n * * converters for editing and data pipelines.\n * * {@link module:image/image/imagetypecommand~ImageTypeCommand `'imageTypeInline'`} command that converts block images into\n * inline images.\n */\nexport default class ImageInlineEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageEditing, ImageUtils, ClipboardPipeline];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageInlineEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const schema = editor.model.schema;\n        // Converters 'alt' and 'srcset' are added in 'ImageEditing' plugin.\n        schema.register('imageInline', {\n            inheritAllFrom: '$inlineObject',\n            allowAttributes: ['alt', 'src', 'srcset']\n        });\n        // Disallow inline images in captions (for now). This is the best spot to do that because\n        // independent packages can introduce captions (ImageCaption, TableCaption, etc.) so better this\n        // be future-proof.\n        schema.addChildCheck((context, childDefinition) => {\n            if (context.endsWith('caption') && childDefinition.name === 'imageInline') {\n                return false;\n            }\n        });\n        this._setupConversion();\n        if (editor.plugins.has('ImageBlockEditing')) {\n            editor.commands.add('imageTypeInline', new ImageTypeCommand(this.editor, 'imageInline'));\n            this._setupClipboardIntegration();\n        }\n    }\n    /**\n     * Configures conversion pipelines to support upcasting and downcasting\n     * inline images (inline image widgets) and their attributes.\n     */\n    _setupConversion() {\n        const editor = this.editor;\n        const t = editor.t;\n        const conversion = editor.conversion;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        conversion.for('dataDowncast')\n            .elementToElement({\n            model: 'imageInline',\n            view: (modelElement, { writer }) => writer.createEmptyElement('img')\n        });\n        conversion.for('editingDowncast')\n            .elementToStructure({\n            model: 'imageInline',\n            view: (modelElement, { writer }) => imageUtils.toImageWidget(createInlineImageViewElement(writer), writer, t('image widget'))\n        });\n        conversion.for('downcast')\n            .add(downcastImageAttribute(imageUtils, 'imageInline', 'src'))\n            .add(downcastImageAttribute(imageUtils, 'imageInline', 'alt'))\n            .add(downcastSrcsetAttribute(imageUtils, 'imageInline'));\n        // More image related upcasts are in 'ImageEditing' plugin.\n        conversion.for('upcast')\n            .elementToElement({\n            view: getImgViewElementMatcher(editor, 'imageInline'),\n            model: (viewImage, { writer }) => writer.createElement('imageInline', viewImage.hasAttribute('src') ? { src: viewImage.getAttribute('src') } : undefined)\n        });\n    }\n    /**\n     * Integrates the plugin with the clipboard pipeline.\n     *\n     * Idea is that the feature should recognize the user's intent when an **block** image is\n     * pasted or dropped. If such an image is pasted/dropped into a non-empty block\n     * (e.g. a paragraph with some text) it gets converted into an inline image on the fly.\n     *\n     * We assume this is the user's intent if they decided to put their image there.\n     *\n     * **Note**: If a block image has a caption, it will not be converted to an inline image\n     * to avoid the confusion. Captions are added on purpose and they should never be lost\n     * in the clipboard pipeline.\n     *\n     * See the `ImageBlockEditing` for the similar integration that works in the opposite direction.\n     */\n    _setupClipboardIntegration() {\n        const editor = this.editor;\n        const model = editor.model;\n        const editingView = editor.editing.view;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\n        this.listenTo(clipboardPipeline, 'inputTransformation', (evt, data) => {\n            const docFragmentChildren = Array.from(data.content.getChildren());\n            let modelRange;\n            // Make sure only <figure class=\"image\"></figure> elements are dropped or pasted. Otherwise, if there some other HTML\n            // mixed up, this should be handled as a regular paste.\n            if (!docFragmentChildren.every(imageUtils.isBlockImageView)) {\n                return;\n            }\n            // When drag and dropping, data.targetRanges specifies where to drop because\n            // this is usually a different place than the current model selection (the user\n            // uses a drop marker to specify the drop location).\n            if (data.targetRanges) {\n                modelRange = editor.editing.mapper.toModelRange(data.targetRanges[0]);\n            }\n            // Pasting, however, always occurs at the current model selection.\n            else {\n                modelRange = model.document.selection.getFirstRange();\n            }\n            const selection = model.createSelection(modelRange);\n            // Convert block images into inline images only when pasting or dropping into non-empty blocks\n            // and when the block is not an object (e.g. pasting to replace another widget).\n            if (determineImageTypeForInsertionAtSelection(model.schema, selection) === 'imageInline') {\n                const writer = new UpcastWriter(editingView.document);\n                // Unwrap <figure class=\"image\"><img .../></figure> -> <img ... />\n                // but <figure class=\"image\"><img .../><figcaption>...</figcaption></figure> -> stays the same\n                const inlineViewImages = docFragmentChildren.map(blockViewImage => {\n                    // If there's just one child, it can be either <img /> or <a><img></a>.\n                    // If there are other children than <img>, this means that the block image\n                    // has a caption or some other features and this kind of image should be\n                    // pasted/dropped without modifications.\n                    if (blockViewImage.childCount === 1) {\n                        // Pass the attributes which are present only in the <figure> to the <img>\n                        // (e.g. the style=\"width:10%\" attribute applied by the ImageResize plugin).\n                        Array.from(blockViewImage.getAttributes())\n                            .forEach(attribute => writer.setAttribute(...attribute, imageUtils.findViewImgElement(blockViewImage)));\n                        return blockViewImage.getChild(0);\n                    }\n                    else {\n                        return blockViewImage;\n                    }\n                });\n                data.content = writer.createDocumentFragment(inlineViewImages);\n            }\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageinline\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { Widget } from 'ckeditor5/src/widget';\nimport ImageTextAlternative from './imagetextalternative';\nimport ImageInlineEditing from './image/imageinlineediting';\nimport '../theme/image.css';\n/**\n * The image inline plugin.\n *\n * This is a \"glue\" plugin which loads the following plugins:\n *\n * * {@link module:image/image/imageinlineediting~ImageInlineEditing},\n * * {@link module:image/imagetextalternative~ImageTextAlternative}.\n *\n * Usually, it is used in conjunction with other plugins from this package. See the {@glink api/image package page}\n * for more information.\n */\nexport default class ImageInline extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageInlineEditing, Widget, ImageTextAlternative];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageInline';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/image\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageBlock from './imageblock';\nimport ImageInline from './imageinline';\nimport '../theme/image.css';\n/**\n * The image plugin.\n *\n * For a detailed overview, check the {@glink features/images/images-overview image feature} documentation.\n *\n * This is a \"glue\" plugin which loads the following plugins:\n *\n * * {@link module:image/imageblock~ImageBlock},\n * * {@link module:image/imageinline~ImageInline},\n *\n * Usually, it is used in conjunction with other plugins from this package. See the {@glink api/image package page}\n * for more information.\n */\nexport default class Image extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageBlock, ImageInline];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'Image';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageUtils from '../imageutils';\n/**\n * The image caption utilities plugin.\n */\nexport default class ImageCaptionUtils extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageCaptionUtils';\n    }\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUtils];\n    }\n    /**\n     * Returns the caption model element from a given image element. Returns `null` if no caption is found.\n     */\n    getCaptionFromImageModelElement(imageModelElement) {\n        for (const node of imageModelElement.getChildren()) {\n            if (!!node && node.is('element', 'caption')) {\n                return node;\n            }\n        }\n        return null;\n    }\n    /**\n     * Returns the caption model element for a model selection. Returns `null` if the selection has no caption element ancestor.\n     */\n    getCaptionFromModelSelection(selection) {\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        const captionElement = selection.getFirstPosition().findAncestor('caption');\n        if (!captionElement) {\n            return null;\n        }\n        if (imageUtils.isBlockImage(captionElement.parent)) {\n            return captionElement;\n        }\n        return null;\n    }\n    /**\n     * {@link module:engine/view/matcher~Matcher} pattern. Checks if a given element is a `<figcaption>` element that is placed\n     * inside the image `<figure>` element.\n     * @returns Returns the object accepted by {@link module:engine/view/matcher~Matcher} or `null` if the element\n     * cannot be matched.\n     */\n    matchImageCaptionViewElement(element) {\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        // Convert only captions for images.\n        if (element.name == 'figcaption' && imageUtils.isBlockImageView(element.parent)) {\n            return { name: true };\n        }\n        return null;\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Command } from 'ckeditor5/src/core';\nimport ImageBlockEditing from '../image/imageblockediting';\n/**\n * The toggle image caption command.\n *\n * This command is registered by {@link module:image/imagecaption/imagecaptionediting~ImageCaptionEditing} as the\n * `'toggleImageCaption'` editor command.\n *\n * Executing this command:\n *\n * * either adds or removes the image caption of a selected image (depending on whether the caption is present or not),\n * * removes the image caption if the selection is anchored in one.\n *\n * ```ts\n * // Toggle the presence of the caption.\n * editor.execute( 'toggleImageCaption' );\n * ```\n *\n * **Note**: Upon executing this command, the selection will be set on the image if previously anchored in the caption element.\n *\n * **Note**: You can move the selection to the caption right away as it shows up upon executing this command by using\n * the `focusCaptionOnShow` option:\n *\n * ```ts\n * editor.execute( 'toggleImageCaption', { focusCaptionOnShow: true } );\n * ```\n */\nexport default class ToggleImageCaptionCommand extends Command {\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\n        const imageUtils = editor.plugins.get('ImageUtils');\n        // Only block images can get captions.\n        if (!editor.plugins.has(ImageBlockEditing)) {\n            this.isEnabled = false;\n            this.value = false;\n            return;\n        }\n        const selection = editor.model.document.selection;\n        const selectedElement = selection.getSelectedElement();\n        if (!selectedElement) {\n            const ancestorCaptionElement = imageCaptionUtils.getCaptionFromModelSelection(selection);\n            this.isEnabled = !!ancestorCaptionElement;\n            this.value = !!ancestorCaptionElement;\n            return;\n        }\n        // Block images support captions by default but the command should also be enabled for inline\n        // images because toggling the caption when one is selected should convert it into a block image.\n        this.isEnabled = imageUtils.isImage(selectedElement);\n        if (!this.isEnabled) {\n            this.value = false;\n        }\n        else {\n            this.value = !!imageCaptionUtils.getCaptionFromImageModelElement(selectedElement);\n        }\n    }\n    /**\n     * Executes the command.\n     *\n     * ```ts\n     * editor.execute( 'toggleImageCaption' );\n     * ```\n     *\n     * @param options Options for the executed command.\n     * @param options.focusCaptionOnShow When true and the caption shows up, the selection will be moved into it straight away.\n     * @fires execute\n     */\n    execute(options = {}) {\n        const { focusCaptionOnShow } = options;\n        this.editor.model.change(writer => {\n            if (this.value) {\n                this._hideImageCaption(writer);\n            }\n            else {\n                this._showImageCaption(writer, focusCaptionOnShow);\n            }\n        });\n    }\n    /**\n     * Shows the caption of the `<imageBlock>` or `<imageInline>`. Also:\n     *\n     * * it converts `<imageInline>` to `<imageBlock>` to show the caption,\n     * * it attempts to restore the caption content from the `ImageCaptionEditing` caption registry,\n     * * it moves the selection to the caption right away, it the `focusCaptionOnShow` option was set.\n     */\n    _showImageCaption(writer, focusCaptionOnShow) {\n        const model = this.editor.model;\n        const selection = model.document.selection;\n        const imageCaptionEditing = this.editor.plugins.get('ImageCaptionEditing');\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        let selectedImage = selection.getSelectedElement();\n        const savedCaption = imageCaptionEditing._getSavedCaption(selectedImage);\n        // Convert imageInline -> image first.\n        if (imageUtils.isInlineImage(selectedImage)) {\n            this.editor.execute('imageTypeBlock');\n            // Executing the command created a new model element. Let's pick it again.\n            selectedImage = selection.getSelectedElement();\n        }\n        // Try restoring the caption from the ImageCaptionEditing plugin storage.\n        const newCaptionElement = savedCaption || writer.createElement('caption');\n        writer.append(newCaptionElement, selectedImage);\n        if (focusCaptionOnShow) {\n            writer.setSelection(newCaptionElement, 'in');\n        }\n    }\n    /**\n     * Hides the caption of a selected image (or an image caption the selection is anchored to).\n     *\n     * The content of the caption is stored in the `ImageCaptionEditing` caption registry to make this\n     * a reversible action.\n     */\n    _hideImageCaption(writer) {\n        const editor = this.editor;\n        const selection = editor.model.document.selection;\n        const imageCaptionEditing = editor.plugins.get('ImageCaptionEditing');\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\n        let selectedImage = selection.getSelectedElement();\n        let captionElement;\n        if (selectedImage) {\n            captionElement = imageCaptionUtils.getCaptionFromImageModelElement(selectedImage);\n        }\n        else {\n            captionElement = imageCaptionUtils.getCaptionFromModelSelection(selection);\n            selectedImage = captionElement.parent;\n        }\n        // Store the caption content so it can be restored quickly if the user changes their mind even if they toggle image<->imageInline.\n        imageCaptionEditing._saveCaption(selectedImage, captionElement);\n        writer.setSelection(selectedImage, 'on');\n        writer.remove(captionElement);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagecaption/imagecaptionediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { Element, enablePlaceholder } from 'ckeditor5/src/engine';\nimport { toWidgetEditable } from 'ckeditor5/src/widget';\nimport ToggleImageCaptionCommand from './toggleimagecaptioncommand';\nimport ImageUtils from '../imageutils';\nimport ImageCaptionUtils from './imagecaptionutils';\n/**\n * The image caption engine plugin. It is responsible for:\n *\n * * registering converters for the caption element,\n * * registering converters for the caption model attribute,\n * * registering the {@link module:image/imagecaption/toggleimagecaptioncommand~ToggleImageCaptionCommand `toggleImageCaption`} command.\n */\nexport default class ImageCaptionEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUtils, ImageCaptionUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageCaptionEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        this._savedCaptionsMap = new WeakMap();\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const schema = editor.model.schema;\n        // Schema configuration.\n        if (!schema.isRegistered('caption')) {\n            schema.register('caption', {\n                allowIn: 'imageBlock',\n                allowContentOf: '$block',\n                isLimit: true\n            });\n        }\n        else {\n            schema.extend('caption', {\n                allowIn: 'imageBlock'\n            });\n        }\n        editor.commands.add('toggleImageCaption', new ToggleImageCaptionCommand(this.editor));\n        this._setupConversion();\n        this._setupImageTypeCommandsIntegration();\n        this._registerCaptionReconversion();\n    }\n    /**\n     * Configures conversion pipelines to support upcasting and downcasting\n     * image captions.\n     */\n    _setupConversion() {\n        const editor = this.editor;\n        const view = editor.editing.view;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\n        const t = editor.t;\n        // View -> model converter for the data pipeline.\n        editor.conversion.for('upcast').elementToElement({\n            view: element => imageCaptionUtils.matchImageCaptionViewElement(element),\n            model: 'caption'\n        });\n        // Model -> view converter for the data pipeline.\n        editor.conversion.for('dataDowncast').elementToElement({\n            model: 'caption',\n            view: (modelElement, { writer }) => {\n                if (!imageUtils.isBlockImage(modelElement.parent)) {\n                    return null;\n                }\n                return writer.createContainerElement('figcaption');\n            }\n        });\n        // Model -> view converter for the editing pipeline.\n        editor.conversion.for('editingDowncast').elementToElement({\n            model: 'caption',\n            view: (modelElement, { writer }) => {\n                if (!imageUtils.isBlockImage(modelElement.parent)) {\n                    return null;\n                }\n                const figcaptionElement = writer.createEditableElement('figcaption');\n                writer.setCustomProperty('imageCaption', true, figcaptionElement);\n                figcaptionElement.placeholder = t('Enter image caption');\n                enablePlaceholder({\n                    view,\n                    element: figcaptionElement,\n                    keepOnFocus: true\n                });\n                const imageAlt = modelElement.parent.getAttribute('alt');\n                const label = imageAlt ? t('Caption for image: %0', [imageAlt]) : t('Caption for the image');\n                return toWidgetEditable(figcaptionElement, writer, { label });\n            }\n        });\n    }\n    /**\n     * Integrates with {@link module:image/image/imagetypecommand~ImageTypeCommand image type commands}\n     * to make sure the caption is preserved when the type of an image changes so it can be restored\n     * in the future if the user decides they want their caption back.\n     */\n    _setupImageTypeCommandsIntegration() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\n        const imageTypeInlineCommand = editor.commands.get('imageTypeInline');\n        const imageTypeBlockCommand = editor.commands.get('imageTypeBlock');\n        const handleImageTypeChange = evt => {\n            // The image type command execution can be unsuccessful.\n            if (!evt.return) {\n                return;\n            }\n            const { oldElement, newElement } = evt.return;\n            /* istanbul ignore if: paranoid check -- @preserve */\n            if (!oldElement) {\n                return;\n            }\n            if (imageUtils.isBlockImage(oldElement)) {\n                const oldCaptionElement = imageCaptionUtils.getCaptionFromImageModelElement(oldElement);\n                // If the old element was a captioned block image (the caption was visible),\n                // simply save it so it can be restored.\n                if (oldCaptionElement) {\n                    this._saveCaption(newElement, oldCaptionElement);\n                    return;\n                }\n            }\n            const savedOldElementCaption = this._getSavedCaption(oldElement);\n            // If either:\n            //\n            // * the block image didn't have a visible caption,\n            // * the block image caption was hidden (and already saved),\n            // * the inline image was passed\n            //\n            // just try to \"pass\" the saved caption from the old image to the new image\n            // so it can be retrieved in the future if the user wants it back.\n            if (savedOldElementCaption) {\n                // Note: Since we're writing to a WeakMap, we don't bother with removing the\n                // [ oldElement, savedOldElementCaption ] pair from it.\n                this._saveCaption(newElement, savedOldElementCaption);\n            }\n        };\n        // Presence of the commands depends on the Image(Inline|Block)Editing plugins loaded in the editor.\n        if (imageTypeInlineCommand) {\n            this.listenTo(imageTypeInlineCommand, 'execute', handleImageTypeChange, { priority: 'low' });\n        }\n        if (imageTypeBlockCommand) {\n            this.listenTo(imageTypeBlockCommand, 'execute', handleImageTypeChange, { priority: 'low' });\n        }\n    }\n    /**\n     * Returns the saved {@link module:engine/model/element~Element#toJSON JSONified} caption\n     * of an image model element.\n     *\n     * See {@link #_saveCaption}.\n     *\n     * @internal\n     * @param imageModelElement The model element the caption should be returned for.\n     * @returns The model caption element or `null` if there is none.\n     */\n    _getSavedCaption(imageModelElement) {\n        const jsonObject = this._savedCaptionsMap.get(imageModelElement);\n        return jsonObject ? Element.fromJSON(jsonObject) : null;\n    }\n    /**\n     * Saves a {@link module:engine/model/element~Element#toJSON JSONified} caption for\n     * an image element to allow restoring it in the future.\n     *\n     * A caption is saved every time it gets hidden and/or the type of an image changes. The\n     * user should be able to restore it on demand.\n     *\n     * **Note**: The caption cannot be stored in the image model element attribute because,\n     * for instance, when the model state propagates to collaborators, the attribute would get\n     * lost (mainly because it does not convert to anything when the caption is hidden) and\n     * the states of collaborators' models would de-synchronize causing numerous issues.\n     *\n     * See {@link #_getSavedCaption}.\n     *\n     * @internal\n     * @param imageModelElement The model element the caption is saved for.\n     * @param caption The caption model element to be saved.\n     */\n    _saveCaption(imageModelElement, caption) {\n        this._savedCaptionsMap.set(imageModelElement, caption.toJSON());\n    }\n    /**\n     * Reconverts image caption when image alt attribute changes.\n     * The change of alt attribute is reflected in caption's aria-label attribute.\n     */\n    _registerCaptionReconversion() {\n        const editor = this.editor;\n        const model = editor.model;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\n        model.document.on('change:data', () => {\n            const changes = model.document.differ.getChanges();\n            for (const change of changes) {\n                if (change.attributeKey !== 'alt') {\n                    continue;\n                }\n                const image = change.range.start.nodeAfter;\n                if (imageUtils.isBlockImage(image)) {\n                    const caption = imageCaptionUtils.getCaptionFromImageModelElement(image);\n                    if (!caption) {\n                        return;\n                    }\n                    editor.editing.reconvertItem(caption);\n                }\n            }\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagecaption/imagecaptionui\n */\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { ButtonView } from 'ckeditor5/src/ui';\nimport ImageCaptionUtils from './imagecaptionutils';\n/**\n * The image caption UI plugin. It introduces the `'toggleImageCaption'` UI button.\n */\nexport default class ImageCaptionUI extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageCaptionUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageCaptionUI';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const editingView = editor.editing.view;\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\n        const t = editor.t;\n        editor.ui.componentFactory.add('toggleImageCaption', locale => {\n            const command = editor.commands.get('toggleImageCaption');\n            const view = new ButtonView(locale);\n            view.set({\n                icon: icons.caption,\n                tooltip: true,\n                isToggleable: true\n            });\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n            view.bind('label').to(command, 'value', value => value ? t('Toggle caption off') : t('Toggle caption on'));\n            this.listenTo(view, 'execute', () => {\n                editor.execute('toggleImageCaption', { focusCaptionOnShow: true });\n                // Scroll to the selection and highlight the caption if the caption showed up.\n                const modelCaptionElement = imageCaptionUtils.getCaptionFromModelSelection(editor.model.document.selection);\n                if (modelCaptionElement) {\n                    const figcaptionElement = editor.editing.mapper.toViewElement(modelCaptionElement);\n                    editingView.scrollToTheSelection();\n                    editingView.change(writer => {\n                        writer.addClass('image__caption_highlighted', figcaptionElement);\n                    });\n                }\n                editor.editing.view.focus();\n            });\n            return view;\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagecaption\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageCaptionEditing from './imagecaption/imagecaptionediting';\nimport ImageCaptionUI from './imagecaption/imagecaptionui';\nimport '../theme/imagecaption.css';\n/**\n * The image caption plugin.\n *\n * For a detailed overview, check the {@glink features/images/images-captions image caption} documentation.\n */\nexport default class ImageCaption extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageCaptionEditing, ImageCaptionUI];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageCaption';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { global } from 'ckeditor5/src/utils';\n/**\n * Creates a regular expression used to test for image files.\n *\n * ```ts\n * const imageType = createImageTypeRegExp( [ 'png', 'jpeg', 'svg+xml', 'vnd.microsoft.icon' ] );\n *\n * console.log( 'is supported image', imageType.test( file.type ) );\n * ```\n */\nexport function createImageTypeRegExp(types) {\n    // Sanitize the MIME type name which may include: \"+\", \"-\" or \".\".\n    const regExpSafeNames = types.map(type => type.replace('+', '\\\\+'));\n    return new RegExp(`^image\\\\/(${regExpSafeNames.join('|')})$`);\n}\n/**\n * Creates a promise that fetches the image local source (Base64 or blob) and resolves with a `File` object.\n *\n * @param image Image whose source to fetch.\n * @returns A promise which resolves when an image source is fetched and converted to a `File` instance.\n * It resolves with a `File` object. If there were any errors during file processing, the promise will be rejected.\n */\nexport function fetchLocalImage(image) {\n    return new Promise((resolve, reject) => {\n        const imageSrc = image.getAttribute('src');\n        // Fetch works asynchronously and so does not block browser UI when processing data.\n        fetch(imageSrc)\n            .then(resource => resource.blob())\n            .then(blob => {\n            const mimeType = getImageMimeType(blob, imageSrc);\n            const ext = mimeType.replace('image/', '');\n            const filename = `image.${ext}`;\n            const file = new File([blob], filename, { type: mimeType });\n            resolve(file);\n        })\n            .catch(err => {\n            // Fetch fails only, if it can't make a request due to a network failure or if anything prevented the request\n            // from completing, i.e. the Content Security Policy rules. It is not possible to detect the exact cause of failure,\n            // so we are just trying the fallback solution, if general TypeError is thrown.\n            return err && err.name === 'TypeError' ?\n                convertLocalImageOnCanvas(imageSrc).then(resolve).catch(reject) :\n                reject(err);\n        });\n    });\n}\n/**\n * Checks whether a given node is an image element with a local source (Base64 or blob).\n *\n * @param node The node to check.\n */\nexport function isLocalImage(imageUtils, node) {\n    if (!imageUtils.isInlineImageView(node) || !node.getAttribute('src')) {\n        return false;\n    }\n    return !!node.getAttribute('src').match(/^data:image\\/\\w+;base64,/g) ||\n        !!node.getAttribute('src').match(/^blob:/g);\n}\n/**\n * Extracts an image type based on its blob representation or its source.\n * @param blob Image blob representation.\n * @param src Image `src` attribute value.\n */\nfunction getImageMimeType(blob, src) {\n    if (blob.type) {\n        return blob.type;\n    }\n    else if (src.match(/data:(image\\/\\w+);base64/)) {\n        return src.match(/data:(image\\/\\w+);base64/)[1].toLowerCase();\n    }\n    else {\n        // Fallback to 'jpeg' as common extension.\n        return 'image/jpeg';\n    }\n}\n/**\n * Creates a promise that converts the image local source (Base64 or blob) to a blob using canvas and resolves\n * with a `File` object.\n * @param imageSrc Image `src` attribute value.\n * @returns A promise which resolves when an image source is converted to a `File` instance.\n * It resolves with a `File` object. If there were any errors during file processing, the promise will be rejected.\n */\nfunction convertLocalImageOnCanvas(imageSrc) {\n    return getBlobFromCanvas(imageSrc).then(blob => {\n        const mimeType = getImageMimeType(blob, imageSrc);\n        const ext = mimeType.replace('image/', '');\n        const filename = `image.${ext}`;\n        return new File([blob], filename, { type: mimeType });\n    });\n}\n/**\n * Creates a promise that resolves with a `Blob` object converted from the image source (Base64 or blob).\n * @param imageSrc Image `src` attribute value.\n */\nfunction getBlobFromCanvas(imageSrc) {\n    return new Promise((resolve, reject) => {\n        const image = global.document.createElement('img');\n        image.addEventListener('load', () => {\n            const canvas = global.document.createElement('canvas');\n            canvas.width = image.width;\n            canvas.height = image.height;\n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(image, 0, 0);\n            canvas.toBlob(blob => blob ? resolve(blob) : reject());\n        });\n        image.addEventListener('error', () => reject());\n        image.src = imageSrc;\n    });\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { FileDialogButtonView } from 'ckeditor5/src/upload';\nimport { createImageTypeRegExp } from './utils';\n/**\n * The image upload button plugin.\n *\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload Image upload feature} documentation.\n *\n * Adds the `'uploadImage'` button to the {@link module:ui/componentfactory~ComponentFactory UI component factory}\n * and also the `imageUpload` button as an alias for backward compatibility.\n */\nexport default class ImageUploadUI extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageUploadUI';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const t = editor.t;\n        const componentCreator = (locale) => {\n            const view = new FileDialogButtonView(locale);\n            const command = editor.commands.get('uploadImage');\n            const imageTypes = editor.config.get('image.upload.types');\n            const imageTypesRegExp = createImageTypeRegExp(imageTypes);\n            view.set({\n                acceptedType: imageTypes.map(type => `image/${type}`).join(','),\n                allowMultipleFiles: true\n            });\n            view.buttonView.set({\n                label: t('Insert image'),\n                icon: icons.image,\n                tooltip: true\n            });\n            view.buttonView.bind('isEnabled').to(command);\n            view.on('done', (evt, files) => {\n                const imagesToUpload = Array.from(files).filter(file => imageTypesRegExp.test(file.type));\n                if (imagesToUpload.length) {\n                    editor.execute('uploadImage', { file: imagesToUpload });\n                    editor.editing.view.focus();\n                }\n            });\n            return view;\n        };\n        // Setup `uploadImage` button and add `imageUpload` button as an alias for backward compatibility.\n        editor.ui.componentFactory.add('uploadImage', componentCreator);\n        editor.ui.componentFactory.add('imageUpload', componentCreator);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageupload/imageuploadprogress\n */\n/* globals setTimeout */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { FileRepository } from 'ckeditor5/src/upload';\nimport '../../theme/imageuploadprogress.css';\nimport '../../theme/imageuploadicon.css';\nimport '../../theme/imageuploadloader.css';\n/**\n * The image upload progress plugin.\n * It shows a placeholder when the image is read from the disk and a progress bar while the image is uploading.\n */\nexport default class ImageUploadProgress extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageUploadProgress';\n    }\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        /**\n         * This method is called each time the image `uploadStatus` attribute is changed.\n         *\n         * @param evt An object containing information about the fired event.\n         * @param data Additional information about the change.\n         */\n        this.uploadStatusChange = (evt, data, conversionApi) => {\n            const editor = this.editor;\n            const modelImage = data.item;\n            const uploadId = modelImage.getAttribute('uploadId');\n            if (!conversionApi.consumable.consume(data.item, evt.name)) {\n                return;\n            }\n            const imageUtils = editor.plugins.get('ImageUtils');\n            const fileRepository = editor.plugins.get(FileRepository);\n            const status = uploadId ? data.attributeNewValue : null;\n            const placeholder = this.placeholder;\n            const viewFigure = editor.editing.mapper.toViewElement(modelImage);\n            const viewWriter = conversionApi.writer;\n            if (status == 'reading') {\n                // Start \"appearing\" effect and show placeholder with infinite progress bar on the top\n                // while image is read from disk.\n                _startAppearEffect(viewFigure, viewWriter);\n                _showPlaceholder(imageUtils, placeholder, viewFigure, viewWriter);\n                return;\n            }\n            // Show progress bar on the top of the image when image is uploading.\n            if (status == 'uploading') {\n                const loader = fileRepository.loaders.get(uploadId);\n                // Start appear effect if needed - see https://github.com/ckeditor/ckeditor5-image/issues/191.\n                _startAppearEffect(viewFigure, viewWriter);\n                if (!loader) {\n                    // There is no loader associated with uploadId - this means that image came from external changes.\n                    // In such cases we still want to show the placeholder until image is fully uploaded.\n                    // Show placeholder if needed - see https://github.com/ckeditor/ckeditor5-image/issues/191.\n                    _showPlaceholder(imageUtils, placeholder, viewFigure, viewWriter);\n                }\n                else {\n                    // Hide placeholder and initialize progress bar showing upload progress.\n                    _hidePlaceholder(viewFigure, viewWriter);\n                    _showProgressBar(viewFigure, viewWriter, loader, editor.editing.view);\n                    _displayLocalImage(imageUtils, viewFigure, viewWriter, loader);\n                }\n                return;\n            }\n            if (status == 'complete' && fileRepository.loaders.get(uploadId)) {\n                _showCompleteIcon(viewFigure, viewWriter, editor.editing.view);\n            }\n            // Clean up.\n            _hideProgressBar(viewFigure, viewWriter);\n            _hidePlaceholder(viewFigure, viewWriter);\n            _stopAppearEffect(viewFigure, viewWriter);\n        };\n        this.placeholder = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        // Upload status change - update image's view according to that status.\n        if (editor.plugins.has('ImageBlockEditing')) {\n            editor.editing.downcastDispatcher.on('attribute:uploadStatus:imageBlock', this.uploadStatusChange);\n        }\n        if (editor.plugins.has('ImageInlineEditing')) {\n            editor.editing.downcastDispatcher.on('attribute:uploadStatus:imageInline', this.uploadStatusChange);\n        }\n    }\n}\n/**\n * Adds ck-appear class to the image figure if one is not already applied.\n */\nfunction _startAppearEffect(viewFigure, writer) {\n    if (!viewFigure.hasClass('ck-appear')) {\n        writer.addClass('ck-appear', viewFigure);\n    }\n}\n/**\n * Removes ck-appear class to the image figure if one is not already removed.\n */\nfunction _stopAppearEffect(viewFigure, writer) {\n    writer.removeClass('ck-appear', viewFigure);\n}\n/**\n * Shows placeholder together with infinite progress bar on given image figure.\n */\nfunction _showPlaceholder(imageUtils, placeholder, viewFigure, writer) {\n    if (!viewFigure.hasClass('ck-image-upload-placeholder')) {\n        writer.addClass('ck-image-upload-placeholder', viewFigure);\n    }\n    const viewImg = imageUtils.findViewImgElement(viewFigure);\n    if (viewImg.getAttribute('src') !== placeholder) {\n        writer.setAttribute('src', placeholder, viewImg);\n    }\n    if (!_getUIElement(viewFigure, 'placeholder')) {\n        writer.insert(writer.createPositionAfter(viewImg), _createPlaceholder(writer));\n    }\n}\n/**\n * Removes placeholder together with infinite progress bar on given image figure.\n */\nfunction _hidePlaceholder(viewFigure, writer) {\n    if (viewFigure.hasClass('ck-image-upload-placeholder')) {\n        writer.removeClass('ck-image-upload-placeholder', viewFigure);\n    }\n    _removeUIElement(viewFigure, writer, 'placeholder');\n}\n/**\n * Shows progress bar displaying upload progress.\n * Attaches it to the file loader to update when upload percentace is changed.\n */\nfunction _showProgressBar(viewFigure, writer, loader, view) {\n    const progressBar = _createProgressBar(writer);\n    writer.insert(writer.createPositionAt(viewFigure, 'end'), progressBar);\n    // Update progress bar width when uploadedPercent is changed.\n    loader.on('change:uploadedPercent', (evt, name, value) => {\n        view.change(writer => {\n            writer.setStyle('width', value + '%', progressBar);\n        });\n    });\n}\n/**\n * Hides upload progress bar.\n */\nfunction _hideProgressBar(viewFigure, writer) {\n    _removeUIElement(viewFigure, writer, 'progressBar');\n}\n/**\n * Shows complete icon and hides after a certain amount of time.\n */\nfunction _showCompleteIcon(viewFigure, writer, view) {\n    const completeIcon = writer.createUIElement('div', { class: 'ck-image-upload-complete-icon' });\n    writer.insert(writer.createPositionAt(viewFigure, 'end'), completeIcon);\n    setTimeout(() => {\n        view.change(writer => writer.remove(writer.createRangeOn(completeIcon)));\n    }, 3000);\n}\n/**\n * Create progress bar element using {@link module:engine/view/uielement~UIElement}.\n */\nfunction _createProgressBar(writer) {\n    const progressBar = writer.createUIElement('div', { class: 'ck-progress-bar' });\n    writer.setCustomProperty('progressBar', true, progressBar);\n    return progressBar;\n}\n/**\n * Create placeholder element using {@link module:engine/view/uielement~UIElement}.\n */\nfunction _createPlaceholder(writer) {\n    const placeholder = writer.createUIElement('div', { class: 'ck-upload-placeholder-loader' });\n    writer.setCustomProperty('placeholder', true, placeholder);\n    return placeholder;\n}\n/**\n * Returns {@link module:engine/view/uielement~UIElement} of given unique property from image figure element.\n * Returns `undefined` if element is not found.\n */\nfunction _getUIElement(imageFigure, uniqueProperty) {\n    for (const child of imageFigure.getChildren()) {\n        if (child.getCustomProperty(uniqueProperty)) {\n            return child;\n        }\n    }\n}\n/**\n * Removes {@link module:engine/view/uielement~UIElement} of given unique property from image figure element.\n */\nfunction _removeUIElement(viewFigure, writer, uniqueProperty) {\n    const element = _getUIElement(viewFigure, uniqueProperty);\n    if (element) {\n        writer.remove(writer.createRangeOn(element));\n    }\n}\n/**\n * Displays local data from file loader.\n */\nfunction _displayLocalImage(imageUtils, viewFigure, writer, loader) {\n    if (loader.data) {\n        const viewImg = imageUtils.findViewImgElement(viewFigure);\n        writer.setAttribute('src', loader.data, viewImg);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { FileRepository } from 'ckeditor5/src/upload';\nimport { Command } from 'ckeditor5/src/core';\nimport { toArray } from 'ckeditor5/src/utils';\n/**\n * @module image/imageupload/uploadimagecommand\n */\n/**\n * The upload image command.\n *\n * The command is registered by the {@link module:image/imageupload/imageuploadediting~ImageUploadEditing} plugin as `uploadImage`\n * and it is also available via aliased `imageUpload` name.\n *\n * In order to upload an image at the current selection position\n * (according to the {@link module:widget/utils~findOptimalInsertionRange} algorithm),\n * execute the command and pass the native image file instance:\n *\n * ```ts\n * this.listenTo( editor.editing.view.document, 'clipboardInput', ( evt, data ) => {\n * \t// Assuming that only images were pasted:\n * \tconst images = Array.from( data.dataTransfer.files );\n *\n * \t// Upload the first image:\n * \teditor.execute( 'uploadImage', { file: images[ 0 ] } );\n * } );\n * ```\n *\n * It is also possible to insert multiple images at once:\n *\n * ```ts\n * editor.execute( 'uploadImage', {\n * \tfile: [\n * \t\tfile1,\n * \t\tfile2\n * \t]\n * } );\n * ```\n */\nexport default class UploadImageCommand extends Command {\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const selectedElement = editor.model.document.selection.getSelectedElement();\n        // TODO: This needs refactoring.\n        this.isEnabled = imageUtils.isImageAllowed() || imageUtils.isImage(selectedElement);\n    }\n    /**\n     * Executes the command.\n     *\n     * @fires execute\n     * @param options Options for the executed command.\n     * @param options.file The image file or an array of image files to upload.\n     */\n    execute(options) {\n        const files = toArray(options.file);\n        const selection = this.editor.model.document.selection;\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        // In case of multiple files, each file (starting from the 2nd) will be inserted at a position that\n        // follows the previous one. That will move the selection and, to stay on the safe side and make sure\n        // all images inherit the same selection attributes, they are collected beforehand.\n        //\n        // Applying these attributes ensures, for instance, that inserting an (inline) image into a link does\n        // not split that link but preserves its continuity.\n        //\n        // Note: Selection attributes that do not make sense for images will be filtered out by insertImage() anyway.\n        const selectionAttributes = Object.fromEntries(selection.getAttributes());\n        files.forEach((file, index) => {\n            const selectedElement = selection.getSelectedElement();\n            // Inserting of an inline image replace the selected element and make a selection on the inserted image.\n            // Therefore inserting multiple inline images requires creating position after each element.\n            if (index && selectedElement && imageUtils.isImage(selectedElement)) {\n                const position = this.editor.model.createPositionAfter(selectedElement);\n                this._uploadImage(file, selectionAttributes, position);\n            }\n            else {\n                this._uploadImage(file, selectionAttributes);\n            }\n        });\n    }\n    /**\n     * Handles uploading single file.\n     */\n    _uploadImage(file, attributes, position) {\n        const editor = this.editor;\n        const fileRepository = editor.plugins.get(FileRepository);\n        const loader = fileRepository.createLoader(file);\n        const imageUtils = editor.plugins.get('ImageUtils');\n        // Do not throw when upload adapter is not set. FileRepository will log an error anyway.\n        if (!loader) {\n            return;\n        }\n        imageUtils.insertImage({ ...attributes, uploadId: loader.id }, position);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageupload/imageuploadediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { UpcastWriter } from 'ckeditor5/src/engine';\nimport { Notification } from 'ckeditor5/src/ui';\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\nimport { FileRepository } from 'ckeditor5/src/upload';\nimport { env } from 'ckeditor5/src/utils';\nimport ImageUtils from '../imageutils';\nimport UploadImageCommand from './uploadimagecommand';\nimport { fetchLocalImage, isLocalImage } from '../../src/imageupload/utils';\nimport { createImageTypeRegExp } from './utils';\n/**\n * The editing part of the image upload feature. It registers the `'uploadImage'` command\n * and the `imageUpload` command as an aliased name.\n *\n * When an image is uploaded, it fires the {@link ~ImageUploadEditing#event:uploadComplete `uploadComplete`} event\n * that allows adding custom attributes to the {@link module:engine/model/element~Element image element}.\n */\nexport default class ImageUploadEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [FileRepository, Notification, ClipboardPipeline, ImageUtils];\n    }\n    static get pluginName() {\n        return 'ImageUploadEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        editor.config.define('image', {\n            upload: {\n                types: ['jpeg', 'png', 'gif', 'bmp', 'webp', 'tiff']\n            }\n        });\n        this._uploadImageElements = new Map();\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const doc = editor.model.document;\n        const conversion = editor.conversion;\n        const fileRepository = editor.plugins.get(FileRepository);\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\n        const imageTypes = createImageTypeRegExp(editor.config.get('image.upload.types'));\n        const uploadImageCommand = new UploadImageCommand(editor);\n        // Register `uploadImage` command and add `imageUpload` command as an alias for backward compatibility.\n        editor.commands.add('uploadImage', uploadImageCommand);\n        editor.commands.add('imageUpload', uploadImageCommand);\n        // Register upcast converter for uploadId.\n        conversion.for('upcast')\n            .attributeToAttribute({\n            view: {\n                name: 'img',\n                key: 'uploadId'\n            },\n            model: 'uploadId'\n        });\n        // Handle pasted images.\n        // For every image file, a new file loader is created and a placeholder image is\n        // inserted into the content. Then, those images are uploaded once they appear in the model\n        // (see Document#change listener below).\n        this.listenTo(editor.editing.view.document, 'clipboardInput', (evt, data) => {\n            // Skip if non empty HTML data is included.\n            // https://github.com/ckeditor/ckeditor5-upload/issues/68\n            if (isHtmlIncluded(data.dataTransfer)) {\n                return;\n            }\n            const images = Array.from(data.dataTransfer.files).filter(file => {\n                // See https://github.com/ckeditor/ckeditor5-image/pull/254.\n                if (!file) {\n                    return false;\n                }\n                return imageTypes.test(file.type);\n            });\n            if (!images.length) {\n                return;\n            }\n            evt.stop();\n            editor.model.change(writer => {\n                // Set selection to paste target.\n                if (data.targetRanges) {\n                    writer.setSelection(data.targetRanges.map(viewRange => editor.editing.mapper.toModelRange(viewRange)));\n                }\n                // Upload images after the selection has changed in order to ensure the command's state is refreshed.\n                editor.model.enqueueChange(() => {\n                    editor.execute('uploadImage', { file: images });\n                });\n            });\n        });\n        // Handle HTML pasted with images with base64 or blob sources.\n        // For every image file, a new file loader is created and a placeholder image is\n        // inserted into the content. Then, those images are uploaded once they appear in the model\n        // (see Document#change listener below).\n        this.listenTo(clipboardPipeline, 'inputTransformation', (evt, data) => {\n            const fetchableImages = Array.from(editor.editing.view.createRangeIn(data.content))\n                .map(value => value.item)\n                .filter(viewElement => isLocalImage(imageUtils, viewElement) &&\n                !viewElement.getAttribute('uploadProcessed'))\n                .map(viewElement => { return { promise: fetchLocalImage(viewElement), imageElement: viewElement }; });\n            if (!fetchableImages.length) {\n                return;\n            }\n            const writer = new UpcastWriter(editor.editing.view.document);\n            for (const fetchableImage of fetchableImages) {\n                // Set attribute marking that the image was processed already.\n                writer.setAttribute('uploadProcessed', true, fetchableImage.imageElement);\n                const loader = fileRepository.createLoader(fetchableImage.promise);\n                if (loader) {\n                    writer.setAttribute('src', '', fetchableImage.imageElement);\n                    writer.setAttribute('uploadId', loader.id, fetchableImage.imageElement);\n                }\n            }\n        });\n        // Prevents from the browser redirecting to the dropped image.\n        editor.editing.view.document.on('dragover', (evt, data) => {\n            data.preventDefault();\n        });\n        // Upload placeholder images that appeared in the model.\n        doc.on('change', () => {\n            // Note: Reversing changes to start with insertions and only then handle removals. If it was the other way around,\n            // loaders for **all** images that land in the $graveyard would abort while in fact only those that were **not** replaced\n            // by other images should be aborted.\n            const changes = doc.differ.getChanges({ includeChangesInGraveyard: true }).reverse();\n            const insertedImagesIds = new Set();\n            for (const entry of changes) {\n                if (entry.type == 'insert' && entry.name != '$text') {\n                    const item = entry.position.nodeAfter;\n                    const isInsertedInGraveyard = entry.position.root.rootName == '$graveyard';\n                    for (const imageElement of getImagesFromChangeItem(editor, item)) {\n                        // Check if the image element still has upload id.\n                        const uploadId = imageElement.getAttribute('uploadId');\n                        if (!uploadId) {\n                            continue;\n                        }\n                        // Check if the image is loaded on this client.\n                        const loader = fileRepository.loaders.get(uploadId);\n                        if (!loader) {\n                            continue;\n                        }\n                        if (isInsertedInGraveyard) {\n                            // If the image was inserted to the graveyard for good (**not** replaced by another image),\n                            // only then abort the loading process.\n                            if (!insertedImagesIds.has(uploadId)) {\n                                loader.abort();\n                            }\n                        }\n                        else {\n                            // Remember the upload id of the inserted image. If it acted as a replacement for another\n                            // image (which landed in the $graveyard), the related loader will not be aborted because\n                            // this is still the same image upload.\n                            insertedImagesIds.add(uploadId);\n                            // Keep the mapping between the upload ID and the image model element so the upload\n                            // can later resolve in the context of the correct model element. The model element could\n                            // change for the same upload if one image was replaced by another (e.g. image type was changed),\n                            // so this may also replace an existing mapping.\n                            this._uploadImageElements.set(uploadId, imageElement);\n                            if (loader.status == 'idle') {\n                                // If the image was inserted into content and has not been loaded yet, start loading it.\n                                this._readAndUpload(loader);\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        // Set the default handler for feeding the image element with `src` and `srcset` attributes.\n        this.on('uploadComplete', (evt, { imageElement, data }) => {\n            const urls = data.urls ? data.urls : data;\n            this.editor.model.change(writer => {\n                writer.setAttribute('src', urls.default, imageElement);\n                this._parseAndSetSrcsetAttributeOnImage(urls, imageElement, writer);\n            });\n        }, { priority: 'low' });\n    }\n    /**\n     * @inheritDoc\n     */\n    afterInit() {\n        const schema = this.editor.model.schema;\n        // Setup schema to allow uploadId and uploadStatus for images.\n        // Wait for ImageBlockEditing or ImageInlineEditing to register their elements first,\n        // that's why doing this in afterInit() instead of init().\n        if (this.editor.plugins.has('ImageBlockEditing')) {\n            schema.extend('imageBlock', {\n                allowAttributes: ['uploadId', 'uploadStatus']\n            });\n        }\n        if (this.editor.plugins.has('ImageInlineEditing')) {\n            schema.extend('imageInline', {\n                allowAttributes: ['uploadId', 'uploadStatus']\n            });\n        }\n    }\n    /**\n     * Reads and uploads an image.\n     *\n     * The image is read from the disk and as a Base64-encoded string it is set temporarily to\n     * `image[src]`. When the image is successfully uploaded, the temporary data is replaced with the target\n     * image's URL (the URL to the uploaded image on the server).\n     */\n    _readAndUpload(loader) {\n        const editor = this.editor;\n        const model = editor.model;\n        const t = editor.locale.t;\n        const fileRepository = editor.plugins.get(FileRepository);\n        const notification = editor.plugins.get(Notification);\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const imageUploadElements = this._uploadImageElements;\n        model.enqueueChange({ isUndoable: false }, writer => {\n            writer.setAttribute('uploadStatus', 'reading', imageUploadElements.get(loader.id));\n        });\n        return loader.read()\n            .then(() => {\n            const promise = loader.upload();\n            const imageElement = imageUploadElements.get(loader.id);\n            // Force re–paint in Safari. Without it, the image will display with a wrong size.\n            // https://github.com/ckeditor/ckeditor5/issues/1975\n            /* istanbul ignore next -- @preserve */\n            if (env.isSafari) {\n                const viewFigure = editor.editing.mapper.toViewElement(imageElement);\n                const viewImg = imageUtils.findViewImgElement(viewFigure);\n                editor.editing.view.once('render', () => {\n                    // Early returns just to be safe. There might be some code ran\n                    // in between the outer scope and this callback.\n                    if (!viewImg.parent) {\n                        return;\n                    }\n                    const domFigure = editor.editing.view.domConverter.mapViewToDom(viewImg.parent);\n                    if (!domFigure) {\n                        return;\n                    }\n                    const originalDisplay = domFigure.style.display;\n                    domFigure.style.display = 'none';\n                    // Make sure this line will never be removed during minification for having \"no effect\".\n                    domFigure._ckHack = domFigure.offsetHeight;\n                    domFigure.style.display = originalDisplay;\n                });\n            }\n            model.enqueueChange({ isUndoable: false }, writer => {\n                writer.setAttribute('uploadStatus', 'uploading', imageElement);\n            });\n            return promise;\n        })\n            .then(data => {\n            model.enqueueChange({ isUndoable: false }, writer => {\n                const imageElement = imageUploadElements.get(loader.id);\n                writer.setAttribute('uploadStatus', 'complete', imageElement);\n                this.fire('uploadComplete', { data, imageElement });\n            });\n            clean();\n        })\n            .catch(error => {\n            // If status is not 'error' nor 'aborted' - throw error because it means that something else went wrong,\n            // it might be generic error and it would be real pain to find what is going on.\n            if (loader.status !== 'error' && loader.status !== 'aborted') {\n                throw error;\n            }\n            // Might be 'aborted'.\n            if (loader.status == 'error' && error) {\n                notification.showWarning(error, {\n                    title: t('Upload failed'),\n                    namespace: 'upload'\n                });\n            }\n            // Permanently remove image from insertion batch.\n            model.enqueueChange({ isUndoable: false }, writer => {\n                writer.remove(imageUploadElements.get(loader.id));\n            });\n            clean();\n        });\n        function clean() {\n            model.enqueueChange({ isUndoable: false }, writer => {\n                const imageElement = imageUploadElements.get(loader.id);\n                writer.removeAttribute('uploadId', imageElement);\n                writer.removeAttribute('uploadStatus', imageElement);\n                imageUploadElements.delete(loader.id);\n            });\n            fileRepository.destroyLoader(loader);\n        }\n    }\n    /**\n     * Creates the `srcset` attribute based on a given file upload response and sets it as an attribute to a specific image element.\n     *\n     * @param data Data object from which `srcset` will be created.\n     * @param image The image element on which the `srcset` attribute will be set.\n     */\n    _parseAndSetSrcsetAttributeOnImage(data, image, writer) {\n        // Srcset attribute for responsive images support.\n        let maxWidth = 0;\n        const srcsetAttribute = Object.keys(data)\n            // Filter out keys that are not integers.\n            .filter(key => {\n            const width = parseInt(key, 10);\n            if (!isNaN(width)) {\n                maxWidth = Math.max(maxWidth, width);\n                return true;\n            }\n        })\n            // Convert each key to srcset entry.\n            .map(key => `${data[key]} ${key}w`)\n            // Join all entries.\n            .join(', ');\n        if (srcsetAttribute != '') {\n            writer.setAttribute('srcset', {\n                data: srcsetAttribute,\n                width: maxWidth\n            }, image);\n        }\n    }\n}\n/**\n * Returns `true` if non-empty `text/html` is included in the data transfer.\n */\nexport function isHtmlIncluded(dataTransfer) {\n    return Array.from(dataTransfer.types).includes('text/html') && dataTransfer.getData('text/html') !== '';\n}\nfunction getImagesFromChangeItem(editor, item) {\n    const imageUtils = editor.plugins.get('ImageUtils');\n    return Array.from(editor.model.createRangeOn(item))\n        .filter(value => imageUtils.isImage(value.item))\n        .map(value => value.item);\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageupload\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageUploadUI from './imageupload/imageuploadui';\nimport ImageUploadProgress from './imageupload/imageuploadprogress';\nimport ImageUploadEditing from './imageupload/imageuploadediting';\n/**\n * The image upload plugin.\n *\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload image upload feature} documentation.\n *\n * This plugin does not do anything directly, but it loads a set of specific plugins to enable image uploading:\n *\n * * {@link module:image/imageupload/imageuploadediting~ImageUploadEditing},\n * * {@link module:image/imageupload/imageuploadui~ImageUploadUI},\n * * {@link module:image/imageupload/imageuploadprogress~ImageUploadProgress}.\n */\nexport default class ImageUpload extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageUpload';\n    }\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUploadEditing, ImageUploadUI, ImageUploadProgress];\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { View } from 'ckeditor5/src/ui';\nimport '../../../theme/imageinsertformrowview.css';\n/**\n * The class representing a single row in a complex form,\n * used by {@link module:image/imageinsert/ui/imageinsertpanelview~ImageInsertPanelView}.\n *\n * **Note**: For now this class is private. When more use cases appear (beyond `ckeditor5-table` and `ckeditor5-image`),\n * it will become a component in `ckeditor5-ui`.\n *\n * @private\n */\nexport default class ImageUploadFormRowView extends View {\n    /**\n     * Creates an instance of the form row class.\n     *\n     * @param locale The locale instance.\n     * @param options.labelView When passed, the row gets the `group` and `aria-labelledby`\n     * DOM attributes and gets described by the label.\n     */\n    constructor(locale, options = {}) {\n        super(locale);\n        const bind = this.bindTemplate;\n        this.set('class', options.class || null);\n        this.children = this.createCollection();\n        if (options.children) {\n            options.children.forEach(child => this.children.add(child));\n        }\n        this.set('_role', null);\n        this.set('_ariaLabelledBy', null);\n        if (options.labelView) {\n            this.set({\n                _role: 'group',\n                _ariaLabelledBy: options.labelView.id\n            });\n        }\n        this.setTemplate({\n            tag: 'div',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-form__row',\n                    bind.to('class')\n                ],\n                role: bind.to('_role'),\n                'aria-labelledby': bind.to('_ariaLabelledBy')\n            },\n            children: this.children\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageinsert/ui/imageinsertpanelview\n */\nimport { icons } from 'ckeditor5/src/core';\nimport { ButtonView, View, ViewCollection, submitHandler, FocusCycler } from 'ckeditor5/src/ui';\nimport { Collection, FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\nimport ImageInsertFormRowView from './imageinsertformrowview';\nimport '../../../theme/imageinsert.css';\n/**\n * The insert an image via URL view controller class.\n *\n * See {@link module:image/imageinsert/ui/imageinsertpanelview~ImageInsertPanelView}.\n */\nexport default class ImageInsertPanelView extends View {\n    /**\n     * Creates a view for the dropdown panel of {@link module:image/imageinsert/imageinsertui~ImageInsertUI}.\n     *\n     * @param locale The localization services instance.\n     * @param integrations An integrations object that contains components (or tokens for components) to be shown in the panel view.\n     */\n    constructor(locale, integrations = {}) {\n        super(locale);\n        const { insertButtonView, cancelButtonView } = this._createActionButtons(locale);\n        this.insertButtonView = insertButtonView;\n        this.cancelButtonView = cancelButtonView;\n        this.set('imageURLInputValue', '');\n        this.focusTracker = new FocusTracker();\n        this.keystrokes = new KeystrokeHandler();\n        this._focusables = new ViewCollection();\n        this._focusCycler = new FocusCycler({\n            focusables: this._focusables,\n            focusTracker: this.focusTracker,\n            keystrokeHandler: this.keystrokes,\n            actions: {\n                // Navigate form fields backwards using the Shift + Tab keystroke.\n                focusPrevious: 'shift + tab',\n                // Navigate form fields forwards using the Tab key.\n                focusNext: 'tab'\n            }\n        });\n        this.set('_integrations', new Collection());\n        for (const [integration, integrationView] of Object.entries(integrations)) {\n            if (integration === 'insertImageViaUrl') {\n                integrationView.fieldView\n                    .bind('value').to(this, 'imageURLInputValue', (value) => value || '');\n                integrationView.fieldView.on('input', () => {\n                    this.imageURLInputValue = integrationView.fieldView.element.value.trim();\n                });\n            }\n            integrationView.name = integration;\n            this._integrations.add(integrationView);\n        }\n        this.setTemplate({\n            tag: 'form',\n            attributes: {\n                class: [\n                    'ck',\n                    'ck-image-insert-form'\n                ],\n                tabindex: '-1'\n            },\n            children: [\n                ...this._integrations,\n                new ImageInsertFormRowView(locale, {\n                    children: [\n                        this.insertButtonView,\n                        this.cancelButtonView\n                    ],\n                    class: 'ck-image-insert-form__action-row'\n                })\n            ]\n        });\n    }\n    /**\n     * @inheritDoc\n     */\n    render() {\n        super.render();\n        submitHandler({\n            view: this\n        });\n        const childViews = [\n            ...this._integrations,\n            this.insertButtonView,\n            this.cancelButtonView\n        ];\n        childViews.forEach(v => {\n            // Register the view as focusable.\n            this._focusables.add(v);\n            // Register the view in the focus tracker.\n            this.focusTracker.add(v.element);\n        });\n        // Start listening for the keystrokes coming from #element.\n        this.keystrokes.listenTo(this.element);\n        const stopPropagation = (data) => data.stopPropagation();\n        // Since the form is in the dropdown panel which is a child of the toolbar, the toolbar's\n        // keystroke handler would take over the key management in the URL input. We need to prevent\n        // this ASAP. Otherwise, the basic caret movement using the arrow keys will be impossible.\n        this.keystrokes.set('arrowright', stopPropagation);\n        this.keystrokes.set('arrowleft', stopPropagation);\n        this.keystrokes.set('arrowup', stopPropagation);\n        this.keystrokes.set('arrowdown', stopPropagation);\n    }\n    /**\n     * @inheritDoc\n     */\n    destroy() {\n        super.destroy();\n        this.focusTracker.destroy();\n        this.keystrokes.destroy();\n    }\n    /**\n     * Returns a view of the integration.\n     *\n     * @param name The name of the integration.\n     */\n    getIntegration(name) {\n        return this._integrations.find(integration => integration.name === name);\n    }\n    /**\n     * Creates the following form controls:\n     *\n     * * {@link #insertButtonView},\n     * * {@link #cancelButtonView}.\n     *\n     * @param locale The localization services instance.\n     */\n    _createActionButtons(locale) {\n        const t = locale.t;\n        const insertButtonView = new ButtonView(locale);\n        const cancelButtonView = new ButtonView(locale);\n        insertButtonView.set({\n            label: t('Insert'),\n            icon: icons.check,\n            class: 'ck-button-save',\n            type: 'submit',\n            withText: true,\n            isEnabled: this.imageURLInputValue\n        });\n        cancelButtonView.set({\n            label: t('Cancel'),\n            icon: icons.cancel,\n            class: 'ck-button-cancel',\n            withText: true\n        });\n        insertButtonView.bind('isEnabled').to(this, 'imageURLInputValue', value => !!value);\n        insertButtonView.delegate('execute').to(this, 'submit');\n        cancelButtonView.delegate('execute').to(this, 'cancel');\n        return { insertButtonView, cancelButtonView };\n    }\n    /**\n     * Focuses the first {@link #_focusables focusable} in the form.\n     */\n    focus() {\n        this._focusCycler.focusFirst();\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { LabeledFieldView, createLabeledInputText } from 'ckeditor5/src/ui';\n/**\n * Creates integrations object that will be passed to the\n * {@link module:image/imageinsert/ui/imageinsertpanelview~ImageInsertPanelView}.\n *\n * @param editor Editor instance.\n *\n * @returns Integrations object.\n */\nexport function prepareIntegrations(editor) {\n    const panelItems = editor.config.get('image.insert.integrations');\n    const imageInsertUIPlugin = editor.plugins.get('ImageInsertUI');\n    const PREDEFINED_INTEGRATIONS = {\n        'insertImageViaUrl': createLabeledInputView(editor.locale)\n    };\n    if (!panelItems) {\n        return PREDEFINED_INTEGRATIONS;\n    }\n    // Prepares ckfinder component for the `openCKFinder` integration token.\n    if (panelItems.find(item => item === 'openCKFinder') && editor.ui.componentFactory.has('ckfinder')) {\n        const ckFinderButton = editor.ui.componentFactory.create('ckfinder');\n        ckFinderButton.set({\n            withText: true,\n            class: 'ck-image-insert__ck-finder-button'\n        });\n        // We want to close the dropdown panel view when user clicks the ckFinderButton.\n        ckFinderButton.delegate('execute').to(imageInsertUIPlugin, 'cancel');\n        PREDEFINED_INTEGRATIONS.openCKFinder = ckFinderButton;\n    }\n    // Creates integrations object of valid views to pass it to the ImageInsertPanelView.\n    return panelItems.reduce((object, key) => {\n        if (PREDEFINED_INTEGRATIONS[key]) {\n            object[key] = PREDEFINED_INTEGRATIONS[key];\n        }\n        else if (editor.ui.componentFactory.has(key)) {\n            object[key] = editor.ui.componentFactory.create(key);\n        }\n        return object;\n    }, {});\n}\n/**\n * Creates labeled field view.\n *\n * @param locale The localization services instance.\n */\nexport function createLabeledInputView(locale) {\n    const t = locale.t;\n    const labeledInputView = new LabeledFieldView(locale, createLabeledInputText);\n    labeledInputView.set({\n        label: t('Insert image via URL')\n    });\n    labeledInputView.fieldView.placeholder = 'https://example.com/image.png';\n    return labeledInputView;\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageinsert/imageinsertui\n */\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { SplitButtonView, createDropdown } from 'ckeditor5/src/ui';\nimport ImageInsertPanelView from './ui/imageinsertpanelview';\nimport { prepareIntegrations } from './utils';\n/**\n * The image insert dropdown plugin.\n *\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload Image upload feature}\n * and {@glink features/images/images-inserting Insert images via source URL} documentation.\n *\n * Adds the `'insertImage'` dropdown to the {@link module:ui/componentfactory~ComponentFactory UI component factory}\n * and also the `imageInsert` dropdown as an alias for backward compatibility.\n */\nexport default class ImageInsertUI extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageInsertUI';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const componentCreator = (locale) => {\n            return this._createDropdownView(locale);\n        };\n        // Register `insertImage` dropdown and add `imageInsert` dropdown as an alias for backward compatibility.\n        editor.ui.componentFactory.add('insertImage', componentCreator);\n        editor.ui.componentFactory.add('imageInsert', componentCreator);\n    }\n    /**\n     * Creates the dropdown view.\n     *\n     * @param locale The localization services instance.\n     */\n    _createDropdownView(locale) {\n        const editor = this.editor;\n        const t = locale.t;\n        const uploadImageCommand = editor.commands.get('uploadImage');\n        const insertImageCommand = editor.commands.get('insertImage');\n        this.dropdownView = createDropdown(locale, uploadImageCommand ? SplitButtonView : undefined);\n        const buttonView = this.dropdownView.buttonView;\n        const panelView = this.dropdownView.panelView;\n        buttonView.set({\n            label: t('Insert image'),\n            icon: icons.image,\n            tooltip: true\n        });\n        panelView.extendTemplate({\n            attributes: {\n                class: 'ck-image-insert__panel'\n            }\n        });\n        if (uploadImageCommand) {\n            const splitButtonView = this.dropdownView.buttonView;\n            // We are injecting custom button replacement to readonly field.\n            splitButtonView.actionView = editor.ui.componentFactory.create('uploadImage');\n            // After we replaced action button with `uploadImage` component,\n            // we have lost a proper styling and some minor visual quirks have appeared.\n            // Brining back original split button classes helps fix the button styling\n            // See https://github.com/ckeditor/ckeditor5/issues/7986.\n            splitButtonView.actionView.extendTemplate({\n                attributes: {\n                    class: 'ck ck-button ck-splitbutton__action'\n                }\n            });\n        }\n        return this._setUpDropdown(uploadImageCommand || insertImageCommand);\n    }\n    /**\n     * Sets up the dropdown view.\n     *\n     * @param command An uploadImage or insertImage command.\n     */\n    _setUpDropdown(command) {\n        const editor = this.editor;\n        const t = editor.t;\n        const dropdownView = this.dropdownView;\n        const panelView = dropdownView.panelView;\n        const imageUtils = this.editor.plugins.get('ImageUtils');\n        const replaceImageSourceCommand = editor.commands.get('replaceImageSource');\n        let imageInsertView;\n        dropdownView.bind('isEnabled').to(command);\n        dropdownView.once('change:isOpen', () => {\n            imageInsertView = new ImageInsertPanelView(editor.locale, prepareIntegrations(editor));\n            imageInsertView.delegate('submit', 'cancel').to(dropdownView);\n            panelView.children.add(imageInsertView);\n        });\n        dropdownView.on('change:isOpen', () => {\n            const selectedElement = editor.model.document.selection.getSelectedElement();\n            const insertButtonView = imageInsertView.insertButtonView;\n            const insertImageViaUrlForm = imageInsertView.getIntegration('insertImageViaUrl');\n            if (dropdownView.isOpen) {\n                if (imageUtils.isImage(selectedElement)) {\n                    imageInsertView.imageURLInputValue = replaceImageSourceCommand.value;\n                    insertButtonView.label = t('Update');\n                    insertImageViaUrlForm.label = t('Update image URL');\n                }\n                else {\n                    imageInsertView.imageURLInputValue = '';\n                    insertButtonView.label = t('Insert');\n                    insertImageViaUrlForm.label = t('Insert image via URL');\n                }\n            }\n            // Note: Use the low priority to make sure the following listener starts working after the\n            // default action of the drop-down is executed (i.e. the panel showed up). Otherwise, the\n            // invisible form/input cannot be focused/selected.\n        }, { priority: 'low' });\n        this.delegate('cancel').to(dropdownView);\n        dropdownView.on('submit', () => {\n            closePanel();\n            onSubmit();\n        });\n        dropdownView.on('cancel', () => {\n            closePanel();\n        });\n        function onSubmit() {\n            const selectedElement = editor.model.document.selection.getSelectedElement();\n            if (imageUtils.isImage(selectedElement)) {\n                editor.execute('replaceImageSource', { source: imageInsertView.imageURLInputValue });\n            }\n            else {\n                editor.execute('insertImage', { source: imageInsertView.imageURLInputValue });\n            }\n        }\n        function closePanel() {\n            editor.editing.view.focus();\n            dropdownView.isOpen = false;\n        }\n        return dropdownView;\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageinsertviaurl\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageInsertUI from './imageinsert/imageinsertui';\n/**\n * The image insert via URL plugin.\n *\n * For a detailed overview, check the {@glink features/images/images-inserting\n * Insert images via source URL} documentation.\n *\n * This plugin does not do anything directly, but it loads a set of specific plugins\n * to enable image inserting via implemented integrations:\n *\n * * {@link module:image/imageinsert/imageinsertui~ImageInsertUI},\n */\nexport default class ImageInsertViaUrl extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageInsertViaUrl';\n    }\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageInsertUI];\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageinsert\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageUpload from './imageupload';\nimport ImageInsertViaUrl from './imageinsertviaurl';\nimport ImageInsertUI from './imageinsert/imageinsertui';\n/**\n * The image insert plugin.\n *\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload Image upload feature}\n * and {@glink features/images/images-inserting Insert images via source URL} documentation.\n *\n * This plugin does not do anything directly, but it loads a set of specific plugins\n * to enable image uploading or inserting via implemented integrations:\n *\n * * {@link module:image/imageupload~ImageUpload}\n * * {@link module:image/imageinsert/imageinsertui~ImageInsertUI}\n */\nexport default class ImageInsert extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageInsert';\n    }\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUpload, ImageInsertViaUrl, ImageInsertUI];\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageresize/resizeimagecommand\n */\nimport { Command } from 'ckeditor5/src/core';\n/**\n * The resize image command. Currently, it only supports the width attribute.\n */\nexport default class ResizeImageCommand extends Command {\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const element = imageUtils.getClosestSelectedImageElement(editor.model.document.selection);\n        this.isEnabled = !!element;\n        if (!element || !element.hasAttribute('width')) {\n            this.value = null;\n        }\n        else {\n            this.value = {\n                width: element.getAttribute('width'),\n                height: null\n            };\n        }\n    }\n    /**\n     * Executes the command.\n     *\n     * ```ts\n     * // Sets the width to 50%:\n     * editor.execute( 'resizeImage', { width: '50%' } );\n     *\n     * // Removes the width attribute:\n     * editor.execute( 'resizeImage', { width: null } );\n     * ```\n     *\n     * @param options\n     * @param options.width The new width of the image.\n     * @fires execute\n     */\n    execute(options) {\n        const editor = this.editor;\n        const model = editor.model;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\n        this.value = {\n            width: options.width,\n            height: null\n        };\n        if (imageElement) {\n            model.change(writer => {\n                writer.setAttribute('width', options.width, imageElement);\n            });\n        }\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageUtils from '../imageutils';\nimport ResizeImageCommand from './resizeimagecommand';\n/**\n * The image resize editing feature.\n *\n * It adds the ability to resize each image using handles or manually by\n * {@link module:image/imageresize/imageresizebuttons~ImageResizeButtons} buttons.\n */\nexport default class ImageResizeEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageResizeEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        editor.config.define('image', {\n            resizeUnit: '%',\n            resizeOptions: [{\n                    name: 'resizeImage:original',\n                    value: null,\n                    icon: 'original'\n                },\n                {\n                    name: 'resizeImage:25',\n                    value: '25',\n                    icon: 'small'\n                },\n                {\n                    name: 'resizeImage:50',\n                    value: '50',\n                    icon: 'medium'\n                },\n                {\n                    name: 'resizeImage:75',\n                    value: '75',\n                    icon: 'large'\n                }]\n        });\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const resizeImageCommand = new ResizeImageCommand(editor);\n        this._registerSchema();\n        this._registerConverters('imageBlock');\n        this._registerConverters('imageInline');\n        // Register `resizeImage` command and add `imageResize` command as an alias for backward compatibility.\n        editor.commands.add('resizeImage', resizeImageCommand);\n        editor.commands.add('imageResize', resizeImageCommand);\n    }\n    _registerSchema() {\n        if (this.editor.plugins.has('ImageBlockEditing')) {\n            this.editor.model.schema.extend('imageBlock', { allowAttributes: 'width' });\n        }\n        if (this.editor.plugins.has('ImageInlineEditing')) {\n            this.editor.model.schema.extend('imageInline', { allowAttributes: 'width' });\n        }\n    }\n    /**\n     * Registers image resize converters.\n     *\n     * @param imageType The type of the image.\n     */\n    _registerConverters(imageType) {\n        const editor = this.editor;\n        // Dedicated converter to propagate image's attribute to the img tag.\n        editor.conversion.for('downcast').add(dispatcher => dispatcher.on(`attribute:width:${imageType}`, (evt, data, conversionApi) => {\n            if (!conversionApi.consumable.consume(data.item, evt.name)) {\n                return;\n            }\n            const viewWriter = conversionApi.writer;\n            const figure = conversionApi.mapper.toViewElement(data.item);\n            if (data.attributeNewValue !== null) {\n                viewWriter.setStyle('width', data.attributeNewValue, figure);\n                viewWriter.addClass('image_resized', figure);\n            }\n            else {\n                viewWriter.removeStyle('width', figure);\n                viewWriter.removeClass('image_resized', figure);\n            }\n        }));\n        editor.conversion.for('upcast')\n            .attributeToAttribute({\n            view: {\n                name: imageType === 'imageBlock' ? 'figure' : 'img',\n                styles: {\n                    width: /.+/\n                }\n            },\n            model: {\n                key: 'width',\n                value: (viewElement) => viewElement.getStyle('width')\n            }\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageresize/imageresizebuttons\n */\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { ButtonView, DropdownButtonView, Model, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\nimport { CKEditorError, Collection } from 'ckeditor5/src/utils';\nimport ImageResizeEditing from './imageresizeediting';\nconst RESIZE_ICONS = {\n    small: icons.objectSizeSmall,\n    medium: icons.objectSizeMedium,\n    large: icons.objectSizeLarge,\n    original: icons.objectSizeFull\n};\n/**\n * The image resize buttons plugin.\n *\n * It adds a possibility to resize images using the toolbar dropdown or individual buttons, depending on the plugin configuration.\n */\nexport default class ImageResizeButtons extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageResizeEditing];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageResizeButtons';\n    }\n    /**\n     * @inheritDoc\n     */\n    constructor(editor) {\n        super(editor);\n        this._resizeUnit = editor.config.get('image.resizeUnit');\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const editor = this.editor;\n        const options = editor.config.get('image.resizeOptions');\n        const command = editor.commands.get('resizeImage');\n        this.bind('isEnabled').to(command);\n        for (const option of options) {\n            this._registerImageResizeButton(option);\n        }\n        this._registerImageResizeDropdown(options);\n    }\n    /**\n     * A helper function that creates a standalone button component for the plugin.\n     *\n     * @param resizeOption A model of the resize option.\n     */\n    _registerImageResizeButton(option) {\n        const editor = this.editor;\n        const { name, value, icon } = option;\n        const optionValueWithUnit = value ? value + this._resizeUnit : null;\n        editor.ui.componentFactory.add(name, locale => {\n            const button = new ButtonView(locale);\n            const command = editor.commands.get('resizeImage');\n            const labelText = this._getOptionLabelValue(option, true);\n            if (!RESIZE_ICONS[icon]) {\n                /**\n                 * When configuring {@link module:image/imageconfig~ImageConfig#resizeOptions `config.image.resizeOptions`} for standalone\n                 * buttons, a valid `icon` token must be set for each option.\n                 *\n                 * See all valid options described in the\n                 * {@link module:image/imageconfig~ImageResizeOption plugin configuration}.\n                 *\n                 * @error imageresizebuttons-missing-icon\n                 * @param option Invalid image resize option.\n                */\n                throw new CKEditorError('imageresizebuttons-missing-icon', editor, option);\n            }\n            button.set({\n                // Use the `label` property for a verbose description (because of ARIA).\n                label: labelText,\n                icon: RESIZE_ICONS[icon],\n                tooltip: labelText,\n                isToggleable: true\n            });\n            // Bind button to the command.\n            button.bind('isEnabled').to(this);\n            button.bind('isOn').to(command, 'value', getIsOnButtonCallback(optionValueWithUnit));\n            this.listenTo(button, 'execute', () => {\n                editor.execute('resizeImage', { width: optionValueWithUnit });\n            });\n            return button;\n        });\n    }\n    /**\n     * A helper function that creates a dropdown component for the plugin containing all the resize options defined in\n     * the editor configuration.\n     *\n     * @param options An array of configured options.\n     */\n    _registerImageResizeDropdown(options) {\n        const editor = this.editor;\n        const t = editor.t;\n        const originalSizeOption = options.find(option => !option.value);\n        const componentCreator = (locale) => {\n            const command = editor.commands.get('resizeImage');\n            const dropdownView = createDropdown(locale, DropdownButtonView);\n            const dropdownButton = dropdownView.buttonView;\n            const accessibleLabel = t('Resize image');\n            dropdownButton.set({\n                tooltip: accessibleLabel,\n                commandValue: originalSizeOption.value,\n                icon: RESIZE_ICONS.medium,\n                isToggleable: true,\n                label: this._getOptionLabelValue(originalSizeOption),\n                withText: true,\n                class: 'ck-resize-image-button',\n                ariaLabel: accessibleLabel,\n                ariaLabelledBy: undefined\n            });\n            dropdownButton.bind('label').to(command, 'value', commandValue => {\n                if (commandValue && commandValue.width) {\n                    return commandValue.width;\n                }\n                else {\n                    return this._getOptionLabelValue(originalSizeOption);\n                }\n            });\n            dropdownView.bind('isEnabled').to(this);\n            addListToDropdown(dropdownView, () => this._getResizeDropdownListItemDefinitions(options, command), {\n                ariaLabel: t('Image resize list'),\n                role: 'menu'\n            });\n            // Execute command when an item from the dropdown is selected.\n            this.listenTo(dropdownView, 'execute', evt => {\n                editor.execute(evt.source.commandName, { width: evt.source.commandValue });\n                editor.editing.view.focus();\n            });\n            return dropdownView;\n        };\n        // Register `resizeImage` dropdown and add `imageResize` dropdown as an alias for backward compatibility.\n        editor.ui.componentFactory.add('resizeImage', componentCreator);\n        editor.ui.componentFactory.add('imageResize', componentCreator);\n    }\n    /**\n     * A helper function for creating an option label value string.\n     *\n     * @param option A resize option object.\n     * @param forTooltip An optional flag for creating a tooltip label.\n     * @returns A user-defined label combined from the numeric value and the resize unit or the default label\n     * for reset options (`Original`).\n     */\n    _getOptionLabelValue(option, forTooltip = false) {\n        const t = this.editor.t;\n        if (option.label) {\n            return option.label;\n        }\n        else if (forTooltip) {\n            if (option.value) {\n                return t('Resize image to %0', option.value + this._resizeUnit);\n            }\n            else {\n                return t('Resize image to the original size');\n            }\n        }\n        else {\n            if (option.value) {\n                return option.value + this._resizeUnit;\n            }\n            else {\n                return t('Original');\n            }\n        }\n    }\n    /**\n     * A helper function that parses the resize options and returns list item definitions ready for use in the dropdown.\n     *\n     * @param options The resize options.\n     * @param command The resize image command.\n     * @returns Dropdown item definitions.\n     */\n    _getResizeDropdownListItemDefinitions(options, command) {\n        const itemDefinitions = new Collection();\n        options.map(option => {\n            const optionValueWithUnit = option.value ? option.value + this._resizeUnit : null;\n            const definition = {\n                type: 'button',\n                model: new Model({\n                    commandName: 'resizeImage',\n                    commandValue: optionValueWithUnit,\n                    label: this._getOptionLabelValue(option),\n                    role: 'menuitemradio',\n                    withText: true,\n                    icon: null\n                })\n            };\n            definition.model.bind('isOn').to(command, 'value', getIsOnButtonCallback(optionValueWithUnit));\n            itemDefinitions.add(definition);\n        });\n        return itemDefinitions;\n    }\n}\n/**\n * A helper function for setting the `isOn` state of buttons in value bindings.\n */\nfunction getIsOnButtonCallback(value) {\n    return (commandValue) => {\n        const objectCommandValue = commandValue;\n        if (value === null && objectCommandValue === value) {\n            return true;\n        }\n        return objectCommandValue !== null && objectCommandValue.width === value;\n    };\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { WidgetResize } from 'ckeditor5/src/widget';\nimport ImageLoadObserver from '../image/imageloadobserver';\nconst RESIZABLE_IMAGES_CSS_SELECTOR = 'figure.image.ck-widget > img,' +\n    'figure.image.ck-widget > picture > img,' +\n    'figure.image.ck-widget > a > img,' +\n    'figure.image.ck-widget > a > picture > img,' +\n    'span.image-inline.ck-widget > img,' +\n    'span.image-inline.ck-widget > picture > img';\nconst IMAGE_WIDGETS_CLASSES_MATCH_REGEXP = /(image|image-inline)/;\nconst RESIZED_IMAGE_CLASS = 'image_resized';\n/**\n * The image resize by handles feature.\n *\n * It adds the ability to resize each image using handles or manually by\n * {@link module:image/imageresize/imageresizebuttons~ImageResizeButtons} buttons.\n */\nexport default class ImageResizeHandles extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [WidgetResize];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageResizeHandles';\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const command = this.editor.commands.get('resizeImage');\n        this.bind('isEnabled').to(command);\n        this._setupResizerCreator();\n    }\n    /**\n     * Attaches the listeners responsible for creating a resizer for each image, except for images inside the HTML embed preview.\n     */\n    _setupResizerCreator() {\n        const editor = this.editor;\n        const editingView = editor.editing.view;\n        editingView.addObserver(ImageLoadObserver);\n        this.listenTo(editingView.document, 'imageLoaded', (evt, domEvent) => {\n            // The resizer must be attached only to images loaded by the `ImageInsert`, `ImageUpload` or `LinkImage` plugins.\n            if (!domEvent.target.matches(RESIZABLE_IMAGES_CSS_SELECTOR)) {\n                return;\n            }\n            const domConverter = editor.editing.view.domConverter;\n            const imageView = domConverter.domToView(domEvent.target);\n            const widgetView = imageView.findAncestor({ classes: IMAGE_WIDGETS_CLASSES_MATCH_REGEXP });\n            let resizer = this.editor.plugins.get(WidgetResize).getResizerByViewElement(widgetView);\n            if (resizer) {\n                // There are rare cases when the image will be triggered multiple times for the same widget, e.g. when\n                // the image's source was changed after upload (https://github.com/ckeditor/ckeditor5/pull/8108#issuecomment-708302992).\n                resizer.redraw();\n                return;\n            }\n            const mapper = editor.editing.mapper;\n            const imageModel = mapper.toModelElement(widgetView);\n            resizer = editor.plugins\n                .get(WidgetResize)\n                .attachTo({\n                unit: editor.config.get('image.resizeUnit'),\n                modelElement: imageModel,\n                viewElement: widgetView,\n                editor,\n                getHandleHost(domWidgetElement) {\n                    return domWidgetElement.querySelector('img');\n                },\n                getResizeHost() {\n                    // Return the model image element parent to avoid setting an inline element (<a>/<span>) as a resize host.\n                    return domConverter.mapViewToDom(mapper.toViewElement(imageModel.parent));\n                },\n                // TODO consider other positions.\n                isCentered() {\n                    const imageStyle = imageModel.getAttribute('imageStyle');\n                    return !imageStyle || imageStyle == 'block' || imageStyle == 'alignCenter';\n                },\n                onCommit(newValue) {\n                    // Get rid of the CSS class in case the command execution that follows is unsuccessful\n                    // (e.g. Track Changes can override it and the new dimensions will not apply). Otherwise,\n                    // the presence of the class and the absence of the width style will cause it to take 100%\n                    // of the horizontal space.\n                    editingView.change(writer => {\n                        writer.removeClass(RESIZED_IMAGE_CLASS, widgetView);\n                    });\n                    editor.execute('resizeImage', { width: newValue });\n                }\n            });\n            resizer.on('updateSize', () => {\n                if (!widgetView.hasClass(RESIZED_IMAGE_CLASS)) {\n                    editingView.change(writer => {\n                        writer.addClass(RESIZED_IMAGE_CLASS, widgetView);\n                    });\n                }\n            });\n            resizer.bind('isEnabled').to(this);\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imageresize\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageResizeButtons from './imageresize/imageresizebuttons';\nimport ImageResizeEditing from './imageresize/imageresizeediting';\nimport ImageResizeHandles from './imageresize/imageresizehandles';\nimport '../theme/imageresize.css';\n/**\n * The image resize plugin.\n *\n * It adds a possibility to resize each image using handles.\n */\nexport default class ImageResize extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageResizeEditing, ImageResizeHandles, ImageResizeButtons];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageResize';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { Command } from 'ckeditor5/src/core';\n/**\n * The image style command. It is used to apply {@link module:image/imageconfig~ImageStyleConfig#options image style option}\n * to a selected image.\n *\n * **Note**: Executing this command may change the image model element if the desired style requires an image of a different\n * type. See {@link module:image/imagestyle/imagestylecommand~ImageStyleCommand#execute} to learn more.\n */\nexport default class ImageStyleCommand extends Command {\n    /**\n     * Creates an instance of the image style command. When executed, the command applies one of\n     * {@link module:image/imageconfig~ImageStyleConfig#options style options} to the currently selected image.\n     *\n     * @param editor The editor instance.\n     * @param styles The style options that this command supports.\n     */\n    constructor(editor, styles) {\n        super(editor);\n        this._defaultStyles = {\n            imageBlock: false,\n            imageInline: false\n        };\n        this._styles = new Map(styles.map(style => {\n            if (style.isDefault) {\n                for (const modelElementName of style.modelElements) {\n                    this._defaultStyles[modelElementName] = style.name;\n                }\n            }\n            return [style.name, style];\n        }));\n    }\n    /**\n     * @inheritDoc\n     */\n    refresh() {\n        const editor = this.editor;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        const element = imageUtils.getClosestSelectedImageElement(this.editor.model.document.selection);\n        this.isEnabled = !!element;\n        if (!this.isEnabled) {\n            this.value = false;\n        }\n        else if (element.hasAttribute('imageStyle')) {\n            this.value = element.getAttribute('imageStyle');\n        }\n        else {\n            this.value = this._defaultStyles[element.name];\n        }\n    }\n    /**\n     * Executes the command and applies the style to the currently selected image:\n     *\n     * ```ts\n     * editor.execute( 'imageStyle', { value: 'side' } );\n     * ```\n     *\n     * **Note**: Executing this command may change the image model element if the desired style requires an image\n     * of a different type. Learn more about {@link module:image/imageconfig~ImageStyleOptionDefinition#modelElements model element}\n     * configuration for the style option.\n     *\n     * @param options.value The name of the style (as configured in {@link module:image/imageconfig~ImageStyleConfig#options}).\n     * @fires execute\n     */\n    execute(options = {}) {\n        const editor = this.editor;\n        const model = editor.model;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        model.change(writer => {\n            const requestedStyle = options.value;\n            let imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\n            // Change the image type if a style requires it.\n            if (requestedStyle && this.shouldConvertImageType(requestedStyle, imageElement)) {\n                this.editor.execute(imageUtils.isBlockImage(imageElement) ? 'imageTypeInline' : 'imageTypeBlock');\n                // Update the imageElement to the newly created image.\n                imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\n            }\n            // Default style means that there is no `imageStyle` attribute in the model.\n            // https://github.com/ckeditor/ckeditor5-image/issues/147\n            if (!requestedStyle || this._styles.get(requestedStyle).isDefault) {\n                writer.removeAttribute('imageStyle', imageElement);\n            }\n            else {\n                writer.setAttribute('imageStyle', requestedStyle, imageElement);\n            }\n        });\n    }\n    /**\n     * Returns `true` if requested style change would trigger the image type change.\n     *\n     * @param requestedStyle The name of the style (as configured in {@link module:image/imageconfig~ImageStyleConfig#options}).\n     * @param imageElement The image model element.\n     */\n    shouldConvertImageType(requestedStyle, imageElement) {\n        const supportedTypes = this._styles.get(requestedStyle).modelElements;\n        return !supportedTypes.includes(imageElement.name);\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagestyle/utils\n */\nimport { icons } from 'ckeditor5/src/core';\nimport { logWarning } from 'ckeditor5/src/utils';\nconst { objectFullWidth, objectInline, objectLeft, objectRight, objectCenter, objectBlockLeft, objectBlockRight } = icons;\n/**\n * Default image style options provided by the plugin that can be referred in the {@link module:image/imageconfig~ImageConfig#styles}\n * configuration.\n *\n * There are available 5 styles focused on formatting:\n *\n * * **`'alignLeft'`** aligns the inline or block image to the left and wraps it with the text using the `image-style-align-left` class,\n * * **`'alignRight'`** aligns the inline or block image to the right and wraps it with the text using the `image-style-align-right` class,\n * * **`'alignCenter'`** centers the block image using the `image-style-align-center` class,\n * * **`'alignBlockLeft'`** aligns the block image to the left using the `image-style-block-align-left` class,\n * * **`'alignBlockRight'`** aligns the block image to the right using the `image-style-block-align-right` class,\n *\n * and 3 semantic styles:\n *\n * * **`'inline'`** is an inline image without any CSS class,\n * * **`'block'`** is a block image without any CSS class,\n * * **`'side'`** is a block image styled with the `image-style-side` CSS class.\n */\nexport const DEFAULT_OPTIONS = {\n    // This style represents an image placed in the line of text.\n    get inline() {\n        return {\n            name: 'inline',\n            title: 'In line',\n            icon: objectInline,\n            modelElements: ['imageInline'],\n            isDefault: true\n        };\n    },\n    // This style represents an image aligned to the left and wrapped with text.\n    get alignLeft() {\n        return {\n            name: 'alignLeft',\n            title: 'Left aligned image',\n            icon: objectLeft,\n            modelElements: ['imageBlock', 'imageInline'],\n            className: 'image-style-align-left'\n        };\n    },\n    // This style represents an image aligned to the left.\n    get alignBlockLeft() {\n        return {\n            name: 'alignBlockLeft',\n            title: 'Left aligned image',\n            icon: objectBlockLeft,\n            modelElements: ['imageBlock'],\n            className: 'image-style-block-align-left'\n        };\n    },\n    // This style represents a centered image.\n    get alignCenter() {\n        return {\n            name: 'alignCenter',\n            title: 'Centered image',\n            icon: objectCenter,\n            modelElements: ['imageBlock'],\n            className: 'image-style-align-center'\n        };\n    },\n    // This style represents an image aligned to the right and wrapped with text.\n    get alignRight() {\n        return {\n            name: 'alignRight',\n            title: 'Right aligned image',\n            icon: objectRight,\n            modelElements: ['imageBlock', 'imageInline'],\n            className: 'image-style-align-right'\n        };\n    },\n    // This style represents an image aligned to the right.\n    get alignBlockRight() {\n        return {\n            name: 'alignBlockRight',\n            title: 'Right aligned image',\n            icon: objectBlockRight,\n            modelElements: ['imageBlock'],\n            className: 'image-style-block-align-right'\n        };\n    },\n    // This option is equal to the situation when no style is applied.\n    get block() {\n        return {\n            name: 'block',\n            title: 'Centered image',\n            icon: objectCenter,\n            modelElements: ['imageBlock'],\n            isDefault: true\n        };\n    },\n    // This represents a side image.\n    get side() {\n        return {\n            name: 'side',\n            title: 'Side image',\n            icon: objectRight,\n            modelElements: ['imageBlock'],\n            className: 'image-style-side'\n        };\n    }\n};\n/**\n * Default image style icons provided by the plugin that can be referred in the {@link module:image/imageconfig~ImageConfig#styles}\n * configuration.\n *\n * See {@link module:image/imageconfig~ImageStyleOptionDefinition#icon} to learn more.\n *\n * There are 7 default icons available: `'full'`, `'left'`, `'inlineLeft'`, `'center'`, `'right'`, `'inlineRight'`, and `'inline'`.\n */\nexport const DEFAULT_ICONS = {\n    full: objectFullWidth,\n    left: objectBlockLeft,\n    right: objectBlockRight,\n    center: objectCenter,\n    inlineLeft: objectLeft,\n    inlineRight: objectRight,\n    inline: objectInline\n};\n/**\n * Default drop-downs provided by the plugin that can be referred in the {@link module:image/imageconfig~ImageConfig#toolbar}\n * configuration. The drop-downs are containers for the {@link module:image/imageconfig~ImageStyleConfig#options image style options}.\n *\n * If both of the `ImageEditing` plugins are loaded, there are 2 predefined drop-downs available:\n *\n * * **`'imageStyle:wrapText'`**, which contains the `alignLeft` and `alignRight` options, that is,\n * those that wraps the text around the image,\n * * **`'imageStyle:breakText'`**, which contains the `alignBlockLeft`, `alignCenter` and `alignBlockRight` options, that is,\n * those that breaks the text around the image.\n */\nexport const DEFAULT_DROPDOWN_DEFINITIONS = [{\n        name: 'imageStyle:wrapText',\n        title: 'Wrap text',\n        defaultItem: 'imageStyle:alignLeft',\n        items: ['imageStyle:alignLeft', 'imageStyle:alignRight']\n    }, {\n        name: 'imageStyle:breakText',\n        title: 'Break text',\n        defaultItem: 'imageStyle:block',\n        items: ['imageStyle:alignBlockLeft', 'imageStyle:block', 'imageStyle:alignBlockRight']\n    }];\n/**\n * Returns a list of the normalized and validated image style options.\n *\n * @param config\n * @param config.isInlinePluginLoaded\n * Determines whether the {@link module:image/image/imageblockediting~ImageBlockEditing `ImageBlockEditing`} plugin has been loaded.\n * @param config.isBlockPluginLoaded\n * Determines whether the {@link module:image/image/imageinlineediting~ImageInlineEditing `ImageInlineEditing`} plugin has been loaded.\n * @param config.configuredStyles\n * The image styles configuration provided in the image styles {@link module:image/imageconfig~ImageConfig#styles configuration}\n * as a default or custom value.\n * @returns\n * * Each of options contains a complete icon markup.\n * * The image style options not supported by any of the loaded plugins are filtered out.\n */\nfunction normalizeStyles(config) {\n    const configuredStyles = config.configuredStyles.options || [];\n    const styles = configuredStyles\n        .map(arrangement => normalizeDefinition(arrangement))\n        .filter(arrangement => isValidOption(arrangement, config));\n    return styles;\n}\n/**\n * Returns the default image styles configuration depending on the loaded image editing plugins.\n *\n * @param isInlinePluginLoaded\n * Determines whether the {@link module:image/image/imageblockediting~ImageBlockEditing `ImageBlockEditing`} plugin has been loaded.\n *\n * @param isBlockPluginLoaded\n * Determines whether the {@link module:image/image/imageinlineediting~ImageInlineEditing `ImageInlineEditing`} plugin has been loaded.\n *\n * @returns\n * It returns an object with the lists of the image style options and groups defined as strings related to the\n * {@link module:image/imagestyle/utils#DEFAULT_OPTIONS default options}\n */\nfunction getDefaultStylesConfiguration(isBlockPluginLoaded, isInlinePluginLoaded) {\n    if (isBlockPluginLoaded && isInlinePluginLoaded) {\n        return {\n            options: [\n                'inline', 'alignLeft', 'alignRight',\n                'alignCenter', 'alignBlockLeft', 'alignBlockRight',\n                'block', 'side'\n            ]\n        };\n    }\n    else if (isBlockPluginLoaded) {\n        return {\n            options: ['block', 'side']\n        };\n    }\n    else if (isInlinePluginLoaded) {\n        return {\n            options: ['inline', 'alignLeft', 'alignRight']\n        };\n    }\n    return {};\n}\n/**\n * Returns a list of the available predefined drop-downs' definitions depending on the loaded image editing plugins.\n */\nfunction getDefaultDropdownDefinitions(pluginCollection) {\n    if (pluginCollection.has('ImageBlockEditing') && pluginCollection.has('ImageInlineEditing')) {\n        return [...DEFAULT_DROPDOWN_DEFINITIONS];\n    }\n    else {\n        return [];\n    }\n}\n/**\n * Normalizes an image style option or group provided in the {@link module:image/imageconfig~ImageConfig#styles}\n * and returns it in a {@link module:image/imageconfig~ImageStyleOptionDefinition}/\n */\nfunction normalizeDefinition(definition) {\n    if (typeof definition === 'string') {\n        // Just the name of the style has been passed, but none of the defaults.\n        if (!DEFAULT_OPTIONS[definition]) {\n            // Normalize the style anyway to prevent errors.\n            definition = { name: definition };\n        }\n        // Just the name of the style has been passed and it's one of the defaults, just use it.\n        // Clone the style to avoid overriding defaults.\n        else {\n            definition = { ...DEFAULT_OPTIONS[definition] };\n        }\n    }\n    else {\n        // If an object style has been passed and if the name matches one of the defaults,\n        // extend it with defaults – the user wants to customize a default style.\n        // Note: Don't override the user–defined style object, clone it instead.\n        definition = extendStyle(DEFAULT_OPTIONS[definition.name], definition);\n    }\n    // If an icon is defined as a string and correspond with a name\n    // in default icons, use the default icon provided by the plugin.\n    if (typeof definition.icon === 'string') {\n        definition.icon = DEFAULT_ICONS[definition.icon] || definition.icon;\n    }\n    return definition;\n}\n/**\n * Checks if the image style option is valid:\n * * if it has the modelElements fields defined and filled,\n * * if the defined modelElements are supported by any of the loaded image editing plugins.\n * It also displays a console warning these conditions are not met.\n *\n * @param option image style option\n */\nfunction isValidOption(option, { isBlockPluginLoaded, isInlinePluginLoaded }) {\n    const { modelElements, name } = option;\n    if (!modelElements || !modelElements.length || !name) {\n        warnInvalidStyle({ style: option });\n        return false;\n    }\n    else {\n        const supportedElements = [isBlockPluginLoaded ? 'imageBlock' : null, isInlinePluginLoaded ? 'imageInline' : null];\n        // Check if the option is supported by any of the loaded plugins.\n        if (!modelElements.some(elementName => supportedElements.includes(elementName))) {\n            /**\n             * In order to work correctly, each image style {@link module:image/imageconfig~ImageStyleOptionDefinition option}\n             * requires specific model elements (also: types of images) to be supported by the editor.\n             *\n             * Model element names to which the image style option can be applied are defined in the\n             * {@link module:image/imageconfig~ImageStyleOptionDefinition#modelElements} property of the style option\n             * definition.\n             *\n             * Explore the warning in the console to find out precisely which option is not supported and which editor plugins\n             * are missing. Make sure these plugins are loaded in your editor to get this image style option working.\n             *\n             * @error image-style-missing-dependency\n             * @param {String} [option] The name of the unsupported option.\n             * @param {String} [missingPlugins] The names of the plugins one of which has to be loaded for the particular option.\n             */\n            logWarning('image-style-missing-dependency', {\n                style: option,\n                missingPlugins: modelElements.map(name => name === 'imageBlock' ? 'ImageBlockEditing' : 'ImageInlineEditing')\n            });\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Extends the default style with a style provided by the developer.\n * Note: Don't override the custom–defined style object, clone it instead.\n */\nfunction extendStyle(source, style) {\n    const extendedStyle = { ...style };\n    for (const prop in source) {\n        if (!Object.prototype.hasOwnProperty.call(style, prop)) {\n            extendedStyle[prop] = source[prop];\n        }\n    }\n    return extendedStyle;\n}\n/**\n * Displays a console warning with the 'image-style-configuration-definition-invalid' error.\n */\nfunction warnInvalidStyle(info) {\n    /**\n     * The image style definition provided in the configuration is invalid.\n     *\n     * Please make sure the definition implements properly one of the following:\n     *\n     * * {@link module:image/imageconfig~ImageStyleOptionDefinition image style option definition},\n     * * {@link module:image/imageconfig~ImageStyleDropdownDefinition image style dropdown definition}\n     *\n     * @error image-style-configuration-definition-invalid\n     * @param {String} [dropdown] The name of the invalid drop-down\n     * @param {String} [style] The name of the invalid image style option\n     */\n    logWarning('image-style-configuration-definition-invalid', info);\n}\nexport default {\n    normalizeStyles,\n    getDefaultStylesConfiguration,\n    getDefaultDropdownDefinitions,\n    warnInvalidStyle,\n    DEFAULT_OPTIONS,\n    DEFAULT_ICONS,\n    DEFAULT_DROPDOWN_DEFINITIONS\n};\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\nimport { first } from 'ckeditor5/src/utils';\n/**\n * @module image/imagestyle/converters\n */\n/**\n * Returns a converter for the `imageStyle` attribute. It can be used for adding, changing and removing the attribute.\n *\n * @param styles An array containing available image style options.\n * @returns A model-to-view attribute converter.\n */\nexport function modelToViewStyleAttribute(styles) {\n    return (evt, data, conversionApi) => {\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\n            return;\n        }\n        // Check if there is class name associated with given value.\n        const newStyle = getStyleDefinitionByName(data.attributeNewValue, styles);\n        const oldStyle = getStyleDefinitionByName(data.attributeOldValue, styles);\n        const viewElement = conversionApi.mapper.toViewElement(data.item);\n        const viewWriter = conversionApi.writer;\n        if (oldStyle) {\n            viewWriter.removeClass(oldStyle.className, viewElement);\n        }\n        if (newStyle) {\n            viewWriter.addClass(newStyle.className, viewElement);\n        }\n    };\n}\n/**\n * Returns a view-to-model converter converting image CSS classes to a proper value in the model.\n *\n * @param styles Image style options for which the converter is created.\n * @returns A view-to-model converter.\n */\nexport function viewToModelStyleAttribute(styles) {\n    // Convert only non–default styles.\n    const nonDefaultStyles = {\n        imageInline: styles.filter(style => !style.isDefault && style.modelElements.includes('imageInline')),\n        imageBlock: styles.filter(style => !style.isDefault && style.modelElements.includes('imageBlock'))\n    };\n    return (evt, data, conversionApi) => {\n        if (!data.modelRange) {\n            return;\n        }\n        const viewElement = data.viewItem;\n        const modelImageElement = first(data.modelRange.getItems());\n        // Run this converter only if an image has been found in the model.\n        // In some cases it may not be found (for example if we run this on a figure with different type than image).\n        if (!modelImageElement) {\n            return;\n        }\n        // ...and the `imageStyle` attribute is allowed for that element, otherwise stop conversion early.\n        if (!conversionApi.schema.checkAttribute(modelImageElement, 'imageStyle')) {\n            return;\n        }\n        // Convert styles one by one.\n        for (const style of nonDefaultStyles[modelImageElement.name]) {\n            // Try to consume class corresponding with the style.\n            if (conversionApi.consumable.consume(viewElement, { classes: style.className })) {\n                // And convert this style to model attribute.\n                conversionApi.writer.setAttribute('imageStyle', style.name, modelImageElement);\n            }\n        }\n    };\n}\n/**\n * Returns the style with a given `name` from an array of styles.\n */\nfunction getStyleDefinitionByName(name, styles) {\n    for (const style of styles) {\n        if (style.name === name) {\n            return style;\n        }\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagestyle/imagestyleediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageStyleCommand from './imagestylecommand';\nimport ImageUtils from '../imageutils';\nimport utils from './utils';\nimport { viewToModelStyleAttribute, modelToViewStyleAttribute } from './converters';\n/**\n * The image style engine plugin. It sets the default configuration, creates converters and registers\n * {@link module:image/imagestyle/imagestylecommand~ImageStyleCommand ImageStyleCommand}.\n */\nexport default class ImageStyleEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageStyleEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const { normalizeStyles, getDefaultStylesConfiguration } = utils;\n        const editor = this.editor;\n        const isBlockPluginLoaded = editor.plugins.has('ImageBlockEditing');\n        const isInlinePluginLoaded = editor.plugins.has('ImageInlineEditing');\n        editor.config.define('image.styles', getDefaultStylesConfiguration(isBlockPluginLoaded, isInlinePluginLoaded));\n        this.normalizedStyles = normalizeStyles({\n            configuredStyles: editor.config.get('image.styles'),\n            isBlockPluginLoaded,\n            isInlinePluginLoaded\n        });\n        this._setupConversion(isBlockPluginLoaded, isInlinePluginLoaded);\n        this._setupPostFixer();\n        // Register imageStyle command.\n        editor.commands.add('imageStyle', new ImageStyleCommand(editor, this.normalizedStyles));\n    }\n    /**\n     * Sets the editor conversion taking the presence of\n     * {@link module:image/image/imageinlineediting~ImageInlineEditing `ImageInlineEditing`}\n     * and {@link module:image/image/imageblockediting~ImageBlockEditing `ImageBlockEditing`} plugins into consideration.\n     */\n    _setupConversion(isBlockPluginLoaded, isInlinePluginLoaded) {\n        const editor = this.editor;\n        const schema = editor.model.schema;\n        const modelToViewConverter = modelToViewStyleAttribute(this.normalizedStyles);\n        const viewToModelConverter = viewToModelStyleAttribute(this.normalizedStyles);\n        editor.editing.downcastDispatcher.on('attribute:imageStyle', modelToViewConverter);\n        editor.data.downcastDispatcher.on('attribute:imageStyle', modelToViewConverter);\n        // Allow imageStyle attribute in image and imageInline.\n        // We could call it 'style' but https://github.com/ckeditor/ckeditor5-engine/issues/559.\n        if (isBlockPluginLoaded) {\n            schema.extend('imageBlock', { allowAttributes: 'imageStyle' });\n            // Converter for figure element from view to model.\n            editor.data.upcastDispatcher.on('element:figure', viewToModelConverter, { priority: 'low' });\n        }\n        if (isInlinePluginLoaded) {\n            schema.extend('imageInline', { allowAttributes: 'imageStyle' });\n            // Converter for the img element from view to model.\n            editor.data.upcastDispatcher.on('element:img', viewToModelConverter, { priority: 'low' });\n        }\n    }\n    /**\n     * Registers a post-fixer that will make sure that the style attribute value is correct for a specific image type (block vs inline).\n     */\n    _setupPostFixer() {\n        const editor = this.editor;\n        const document = editor.model.document;\n        const imageUtils = editor.plugins.get(ImageUtils);\n        const stylesMap = new Map(this.normalizedStyles.map(style => [style.name, style]));\n        // Make sure that style attribute is valid for the image type.\n        document.registerPostFixer(writer => {\n            let changed = false;\n            for (const change of document.differ.getChanges()) {\n                if (change.type == 'insert' || change.type == 'attribute' && change.attributeKey == 'imageStyle') {\n                    let element = change.type == 'insert' ? change.position.nodeAfter : change.range.start.nodeAfter;\n                    if (element && element.is('element', 'paragraph') && element.childCount > 0) {\n                        element = element.getChild(0);\n                    }\n                    if (!imageUtils.isImage(element)) {\n                        continue;\n                    }\n                    const imageStyle = element.getAttribute('imageStyle');\n                    if (!imageStyle) {\n                        continue;\n                    }\n                    const imageStyleDefinition = stylesMap.get(imageStyle);\n                    if (!imageStyleDefinition || !imageStyleDefinition.modelElements.includes(element.name)) {\n                        writer.removeAttribute('imageStyle', element);\n                        changed = true;\n                    }\n                }\n            }\n            return changed;\n        });\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagestyle/imagestyleui\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { ButtonView, createDropdown, addToolbarToDropdown, SplitButtonView } from 'ckeditor5/src/ui';\nimport { isObject, identity } from 'lodash-es';\nimport ImageStyleEditing from './imagestyleediting';\nimport utils from './utils';\nimport '../../theme/imagestyle.css';\n/**\n * The image style UI plugin.\n *\n * It registers buttons corresponding to the {@link module:image/imageconfig~ImageConfig#styles} configuration.\n * It also registers the {@link module:image/imagestyle/utils#DEFAULT_DROPDOWN_DEFINITIONS default drop-downs} and the\n * custom drop-downs defined by the developer in the {@link module:image/imageconfig~ImageConfig#toolbar} configuration.\n */\nexport default class ImageStyleUI extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageStyleEditing];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageStyleUI';\n    }\n    /**\n     * Returns the default localized style titles provided by the plugin.\n     *\n     * The following localized titles corresponding with\n     * {@link module:image/imagestyle/utils#DEFAULT_OPTIONS} are available:\n     *\n     * * `'Wrap text'`,\n     * * `'Break text'`,\n     * * `'In line'`,\n     * * `'Full size image'`,\n     * * `'Side image'`,\n     * * `'Left aligned image'`,\n     * * `'Centered image'`,\n     * * `'Right aligned image'`\n     */\n    get localizedDefaultStylesTitles() {\n        const t = this.editor.t;\n        return {\n            'Wrap text': t('Wrap text'),\n            'Break text': t('Break text'),\n            'In line': t('In line'),\n            'Full size image': t('Full size image'),\n            'Side image': t('Side image'),\n            'Left aligned image': t('Left aligned image'),\n            'Centered image': t('Centered image'),\n            'Right aligned image': t('Right aligned image')\n        };\n    }\n    /**\n     * @inheritDoc\n     */\n    init() {\n        const plugins = this.editor.plugins;\n        const toolbarConfig = this.editor.config.get('image.toolbar') || [];\n        const imageStyleEditing = plugins.get('ImageStyleEditing');\n        const definedStyles = translateStyles(imageStyleEditing.normalizedStyles, this.localizedDefaultStylesTitles);\n        for (const styleConfig of definedStyles) {\n            this._createButton(styleConfig);\n        }\n        const definedDropdowns = translateStyles([\n            ...toolbarConfig.filter(isObject),\n            ...utils.getDefaultDropdownDefinitions(plugins)\n        ], this.localizedDefaultStylesTitles);\n        for (const dropdownConfig of definedDropdowns) {\n            this._createDropdown(dropdownConfig, definedStyles);\n        }\n    }\n    /**\n     * Creates a dropdown and stores it in the editor {@link module:ui/componentfactory~ComponentFactory}.\n     */\n    _createDropdown(dropdownConfig, definedStyles) {\n        const factory = this.editor.ui.componentFactory;\n        factory.add(dropdownConfig.name, locale => {\n            let defaultButton;\n            const { defaultItem, items, title } = dropdownConfig;\n            const buttonViews = items\n                .filter(itemName => definedStyles.find(({ name }) => getUIComponentName(name) === itemName))\n                .map(buttonName => {\n                const button = factory.create(buttonName);\n                if (buttonName === defaultItem) {\n                    defaultButton = button;\n                }\n                return button;\n            });\n            if (items.length !== buttonViews.length) {\n                utils.warnInvalidStyle({ dropdown: dropdownConfig });\n            }\n            const dropdownView = createDropdown(locale, SplitButtonView);\n            const splitButtonView = dropdownView.buttonView;\n            const splitButtonViewArrow = splitButtonView.arrowView;\n            addToolbarToDropdown(dropdownView, buttonViews, { enableActiveItemFocusOnDropdownOpen: true });\n            splitButtonView.set({\n                label: getDropdownButtonTitle(title, defaultButton.label),\n                class: null,\n                tooltip: true\n            });\n            splitButtonViewArrow.unbind('label');\n            splitButtonViewArrow.set({\n                label: title\n            });\n            splitButtonView.bind('icon').toMany(buttonViews, 'isOn', (...areOn) => {\n                const index = areOn.findIndex(identity);\n                return (index < 0) ? defaultButton.icon : buttonViews[index].icon;\n            });\n            splitButtonView.bind('label').toMany(buttonViews, 'isOn', (...areOn) => {\n                const index = areOn.findIndex(identity);\n                return getDropdownButtonTitle(title, (index < 0) ? defaultButton.label : buttonViews[index].label);\n            });\n            splitButtonView.bind('isOn').toMany(buttonViews, 'isOn', (...areOn) => areOn.some(identity));\n            splitButtonView.bind('class')\n                .toMany(buttonViews, 'isOn', (...areOn) => areOn.some(identity) ? 'ck-splitbutton_flatten' : undefined);\n            splitButtonView.on('execute', () => {\n                if (!buttonViews.some(({ isOn }) => isOn)) {\n                    defaultButton.fire('execute');\n                }\n                else {\n                    dropdownView.isOpen = !dropdownView.isOpen;\n                }\n            });\n            dropdownView.bind('isEnabled')\n                .toMany(buttonViews, 'isEnabled', (...areEnabled) => areEnabled.some(identity));\n            // Focus the editable after executing the command.\n            // Overrides a default behaviour where the focus is moved to the dropdown button (#12125).\n            this.listenTo(dropdownView, 'execute', () => {\n                this.editor.editing.view.focus();\n            });\n            return dropdownView;\n        });\n    }\n    /**\n     * Creates a button and stores it in the editor {@link module:ui/componentfactory~ComponentFactory}.\n     */\n    _createButton(buttonConfig) {\n        const buttonName = buttonConfig.name;\n        this.editor.ui.componentFactory.add(getUIComponentName(buttonName), locale => {\n            const command = this.editor.commands.get('imageStyle');\n            const view = new ButtonView(locale);\n            view.set({\n                label: buttonConfig.title,\n                icon: buttonConfig.icon,\n                tooltip: true,\n                isToggleable: true\n            });\n            view.bind('isEnabled').to(command, 'isEnabled');\n            view.bind('isOn').to(command, 'value', value => value === buttonName);\n            view.on('execute', this._executeCommand.bind(this, buttonName));\n            return view;\n        });\n    }\n    _executeCommand(name) {\n        this.editor.execute('imageStyle', { value: name });\n        this.editor.editing.view.focus();\n    }\n}\n/**\n * Returns the translated `title` from the passed styles array.\n */\nfunction translateStyles(styles, titles) {\n    for (const style of styles) {\n        // Localize the titles of the styles, if a title corresponds with\n        // a localized default provided by the plugin.\n        if (titles[style.title]) {\n            style.title = titles[style.title];\n        }\n    }\n    return styles;\n}\n/**\n * Returns the image style component name with the \"imageStyle:\" prefix.\n */\nfunction getUIComponentName(name) {\n    return `imageStyle:${name}`;\n}\n/**\n * Returns title for the splitbutton containing the dropdown title and default action item title.\n */\nfunction getDropdownButtonTitle(dropdownTitle, buttonTitle) {\n    return (dropdownTitle ? dropdownTitle + ': ' : '') + buttonTitle;\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagestyle\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageStyleEditing from './imagestyle/imagestyleediting';\nimport ImageStyleUI from './imagestyle/imagestyleui';\n/**\n * The image style plugin.\n *\n * For a detailed overview of the image styles feature, check the {@glink features/images/images-styles documentation}.\n *\n * This is a \"glue\" plugin which loads the following plugins:\n * * {@link module:image/imagestyle/imagestyleediting~ImageStyleEditing},\n * * {@link module:image/imagestyle/imagestyleui~ImageStyleUI}\n *\n * It provides a default configuration, which can be extended or overwritten.\n * Read more about the {@link module:image/imageconfig~ImageConfig#styles image styles configuration}.\n */\nexport default class ImageStyle extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageStyleEditing, ImageStyleUI];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageStyle';\n    }\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/imagetoolbar\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport { WidgetToolbarRepository } from 'ckeditor5/src/widget';\nimport ImageUtils from './imageutils';\nimport { isObject } from 'lodash-es';\n/**\n * The image toolbar plugin. It creates and manages the image toolbar (the toolbar displayed when an image is selected).\n *\n * For an overview, check the {@glink features/images/images-overview#image-contextual-toolbar image contextual toolbar} documentation.\n *\n * Instances of toolbar components (e.g. buttons) are created using the editor's\n * {@link module:ui/componentfactory~ComponentFactory component factory}\n * based on the {@link module:image/imageconfig~ImageConfig#toolbar `image.toolbar` configuration option}.\n *\n * The toolbar uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\n */\nexport default class ImageToolbar extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [WidgetToolbarRepository, ImageUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'ImageToolbar';\n    }\n    /**\n     * @inheritDoc\n     */\n    afterInit() {\n        const editor = this.editor;\n        const t = editor.t;\n        const widgetToolbarRepository = editor.plugins.get(WidgetToolbarRepository);\n        const imageUtils = editor.plugins.get('ImageUtils');\n        widgetToolbarRepository.register('image', {\n            ariaLabel: t('Image toolbar'),\n            items: normalizeDeclarativeConfig(editor.config.get('image.toolbar') || []),\n            getRelatedElement: selection => imageUtils.getClosestSelectedImageWidget(selection)\n        });\n    }\n}\n/**\n * Convert the dropdown definitions to their keys registered in the ComponentFactory.\n * The registration precess should be handled by the plugin which handles the UI of a particular feature.\n */\nfunction normalizeDeclarativeConfig(config) {\n    return config.map(item => isObject(item) ? item.name : item);\n}\n", "/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module image/pictureediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageEditing from './image/imageediting';\nimport ImageUtils from './imageutils';\nimport { downcastSourcesAttribute, upcastPicture } from './image/converters';\n/**\n * This plugin enables the [`<picture>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture) element support in the editor.\n *\n * * It enables the `sources` model attribute on `imageBlock` and `imageInline` model elements\n * (brought by {@link module:image/imageblock~ImageBlock} and {@link module:image/imageinline~ImageInline}, respectively).\n * * It translates the `sources` model element to the view (also: data) structure that may look as follows:\n *\n * ```html\n * <p>Inline image using picture:\n * \t<picture>\n * \t\t<source media=\"(min-width: 800px)\" srcset=\"image-large.webp\" type=\"image/webp\">\n * \t\t<source media=\"(max-width: 800px)\" srcset=\"image-small.webp\" type=\"image/webp\">\n * \t\t<!-- Other sources as specified in the \"sources\" model attribute... -->\n * \t\t<img src=\"image.png\" alt=\"An image using picture\" />\n * \t</picture>\n * </p>\n *\n * <p>Block image using picture:</p>\n * <figure class=\"image\">\n * \t<picture>\n * \t\t<source media=\"(min-width: 800px)\" srcset=\"image-large.webp\" type=\"image/webp\">\n * \t\t<source media=\"(max-width: 800px)\" srcset=\"image-small.webp\" type=\"image/webp\">\n * \t\t<!-- Other sources as specified in the \"sources\" model attribute... -->\n * \t\t<img src=\"image.png\" alt=\"An image using picture\" />\n * \t</picture>\n * \t<figcaption>Caption of the image</figcaption>\n * </figure>\n * ```\n *\n * **Note:** The value of the `sources` {@glink framework/architecture/editing-engine#changing-the-model model attribute}\n * in both examples equals:\n *\n * ```css\n * [\n * \t{\n * \t\tmedia: '(min-width: 800px)',\n * \t\tsrcset: 'image-large.webp',\n * \t\ttype: 'image/webp'\n * \t},\n * \t{\n * \t\tmedia: '(max-width: 800px)',\n * \t\tsrcset: 'image-small.webp',\n * \t\ttype: 'image/webp'\n * \t}\n * ]\n * ```\n *\n * * It integrates with the {@link module:image/imageupload~ImageUpload} plugin so images uploaded in the editor\n * automatically render using `<picture>` if the {@glink features/images/image-upload/image-upload upload adapter}\n * supports image sources and provides neccessary data.\n *\n * @private\n */\nexport default class PictureEditing extends Plugin {\n    /**\n     * @inheritDoc\n     */\n    static get requires() {\n        return [ImageEditing, ImageUtils];\n    }\n    /**\n     * @inheritDoc\n     */\n    static get pluginName() {\n        return 'PictureEditing';\n    }\n    /**\n     * @inheritDoc\n     */\n    afterInit() {\n        const editor = this.editor;\n        if (editor.plugins.has('ImageBlockEditing')) {\n            editor.model.schema.extend('imageBlock', {\n                allowAttributes: ['sources']\n            });\n        }\n        if (editor.plugins.has('ImageInlineEditing')) {\n            editor.model.schema.extend('imageInline', {\n                allowAttributes: ['sources']\n            });\n        }\n        this._setupConversion();\n        this._setupImageUploadEditingIntegration();\n    }\n    /**\n     * Configures conversion pipelines to support upcasting and downcasting images using the `<picture>` view element\n     * and the model `sources` attribute.\n     */\n    _setupConversion() {\n        const editor = this.editor;\n        const conversion = editor.conversion;\n        const imageUtils = editor.plugins.get('ImageUtils');\n        conversion.for('upcast').add(upcastPicture(imageUtils));\n        conversion.for('downcast').add(downcastSourcesAttribute(imageUtils));\n    }\n    /**\n     * Makes it possible for uploaded images to get the `sources` model attribute and the `<picture>...</picture>`\n     * view structure out-of-the-box if relevant data is provided along the\n     * {@link module:image/imageupload/imageuploadediting~ImageUploadEditing#event:uploadComplete} event.\n     */\n    _setupImageUploadEditingIntegration() {\n        const editor = this.editor;\n        if (!editor.plugins.has('ImageUploadEditing')) {\n            return;\n        }\n        const imageUploadEditing = editor.plugins.get('ImageUploadEditing');\n        this.listenTo(imageUploadEditing, 'uploadComplete', (evt, { imageElement, data }) => {\n            const sources = data.sources;\n            if (!sources) {\n                return;\n            }\n            editor.model.change(writer => {\n                writer.setAttributes({\n                    sources\n                }, imageElement);\n            });\n        });\n    }\n}\n"],
  "mappings": "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",
  "names": ["editor", "writer", "name", "normalizeStyles", "getDefaultStylesConfiguration"]
}
