"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useRowSync = void 0;
var utils_1 = require("../views/common/utils");
var main_1 = require("../constants/main");
var stripSelectorSymbol = function stripSelectorSymbol(str) {
  return str.slice(1, str.length);
};
/** @hidden */
var useRowSync = function useRowSync(args, _inputs) {
  var element = args.element;
  var syncHeight = function syncHeight() {
    if (!element || !element.current) {
      return;
    }
    var highest = [[]];
    var elements = Array.from(element.current.querySelectorAll(args.selector)).filter(function (el) {
      return !el.classList.contains(stripSelectorSymbol(args.applyTo));
    });
    elements.forEach(function (el) {
      var height = el.clientHeight;
      var x = el.getAttribute(args.horizontalAttribute);
      var y = el.getAttribute(args.verticalAttribute);
      if (x === null || y === null) {
        return;
      }
      if (!highest[x]) {
        highest[x] = [];
      }
      if (!highest[x][y] || height > highest[x][y]) {
        highest[x][y] = height - main_1.BORDER_WIDTH;
      }
    });
    var targets = Array.from(element.current.querySelectorAll(args.applyTo));
    targets.forEach(function (el) {
      var x = el.getAttribute(args.horizontalAttribute);
      var y = el.getAttribute(args.verticalAttribute);
      if (x === null || y === null) {
        return;
      }
      var slotPadding = (0, utils_1.getPadding)(el);
      var height = highest[x][y] - slotPadding;
      (0, utils_1.setRect)(el, {
        height: height
      }, true);
    });
  };
};
exports.useRowSync = useRowSync;