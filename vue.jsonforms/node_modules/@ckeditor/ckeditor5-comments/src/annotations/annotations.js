/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x26b8=['remove','activate','createAnnotation','change:isVisible','refreshVisibility','add','focusTracker','getByInnerView','_removeActiveAnnotation','has','stopListening','collection','set','isVisible','fire','view','destroy','source','_activateAnnotation','_deactivateAllAnnotations','refreshPositioning','element','activeAnnotations','_addActiveAnnotation','Annotations','createAnnotationView','pluginName','_visibleAnnotations','_bindAnnotationsToVisibleAnnotations'];(function(_0x322e55,_0x26b8aa){const _0x6759d6=function(_0x511e88){while(--_0x511e88){_0x322e55['push'](_0x322e55['shift']());}};_0x6759d6(++_0x26b8aa);}(_0x26b8,0x136));const _0x6759=function(_0x322e55,_0x26b8aa){_0x322e55=_0x322e55-0x0;let _0x6759d6=_0x26b8[_0x322e55];return _0x6759d6;};import{ContextPlugin as _0x3a666}from'ckeditor5/src/core';import _0x4b4a3a from'./annotation';import _0x4a45ff from'./annotationcollection';import _0x231645 from'./view/annotationview';export default class b extends _0x3a666{static get[_0x6759('0x6')](){return _0x6759('0x4');}constructor(_0x14cc1b){super(_0x14cc1b),this[_0x6759('0x14')]=new _0x4a45ff(),this[_0x6759('0x7')]=new _0x4a45ff(),this[_0x6759('0x15')](_0x6759('0x2'),new Set()),this['_bindAnnotationsToVisibleAnnotations']();}[_0x6759('0xe')](_0x4abd01){this[_0x6759('0x14')][_0x6759('0xe')](_0x4abd01);}[_0x6759('0x9')](_0x3cb7b9){this[_0x6759('0x14')][_0x6759('0x9')](_0x3cb7b9),_0x3cb7b9[_0x6759('0x19')]();}[_0x6759('0xd')](){for(const _0x348423 of this[_0x6759('0x14')])_0x348423[_0x6759('0xd')]();}[_0x6759('0x0')](){this['_visibleAnnotations'][_0x6759('0x0')]();}[_0x6759('0x10')](_0x57311c){return this['collection']['getByInnerView'](_0x57311c);}['deactivateAll'](){this[_0x6759('0x17')](_0x6759('0x1c'));}['destroy'](){for(const _0x41e9db of this[_0x6759('0x14')])_0x41e9db[_0x6759('0x19')]();this[_0x6759('0x7')][_0x6759('0x19')](),this[_0x6759('0x14')][_0x6759('0x19')](),super['destroy']();}[_0x6759('0xa')](_0x579e36){this[_0x6759('0x17')](_0x6759('0x1b'),_0x579e36);}[_0x6759('0xb')](_0x5a371f){return new _0x4b4a3a(_0x5a371f);}[_0x6759('0x5')](_0x5de769,_0x3b09ef){return new _0x231645(_0x5de769,_0x3b09ef);}[_0x6759('0x3')](_0x1a8148){const _0x3d89cd=new Set(this[_0x6759('0x2')]);_0x3d89cd['add'](_0x1a8148),this[_0x6759('0x2')]=_0x3d89cd;}[_0x6759('0x11')](_0x22d4cd){const _0x4e97d2=new Set(this['activeAnnotations']);_0x4e97d2['delete'](_0x22d4cd),this[_0x6759('0x2')]=_0x4e97d2;}[_0x6759('0x8')](){const _0x5d848b=this['collection'],_0x26a0bc=this[_0x6759('0x7')];function _0x3a50af(_0x37ec18){const _0x3a00ac=_0x37ec18[_0x6759('0x1a')];_0x3a00ac[_0x6759('0x16')]&&!_0x26a0bc[_0x6759('0x12')](_0x3a00ac)?_0x26a0bc[_0x6759('0xe')](_0x3a00ac):!_0x3a00ac[_0x6759('0x16')]&&_0x26a0bc['has'](_0x3a00ac)&&_0x26a0bc[_0x6759('0x9')](_0x3a00ac),_0x3a00ac['view'][_0x6759('0xf')][_0x6759('0x9')](_0x3a00ac[_0x6759('0x18')][_0x6759('0x1')]),_0x3a00ac[_0x6759('0x18')][_0x6759('0xf')][_0x6759('0xe')](_0x3a00ac[_0x6759('0x18')][_0x6759('0x1')]);}this['listenTo'](_0x5d848b,_0x6759('0xe'),(_0x4efcca,_0x37e4f8)=>{_0x37e4f8[_0x6759('0x16')]&&_0x26a0bc[_0x6759('0xe')](_0x37e4f8),this['listenTo'](_0x37e4f8,_0x6759('0xc'),_0x3a50af);}),this['listenTo'](_0x5d848b,_0x6759('0x9'),(_0x311695,_0x2f5c80)=>{_0x26a0bc['has'](_0x2f5c80)&&_0x26a0bc[_0x6759('0x9')](_0x2f5c80),this[_0x6759('0x13')](_0x2f5c80,_0x6759('0xc'),_0x3a50af);});}}