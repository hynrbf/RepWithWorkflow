/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3b25=['stopListening','top','getIndex','change:isFocused','blur','updateTargetRect','refreshPositioning','_focusTracker','targetRect','innerView','annotationcollection-duplicated-item','length','getByView','add','_getOrderInContent','clear','view','has','remove','left','_sort','set','get','focusableElements','focusTracker','destroy','from','isFocused','annotationcollection-not-existing-item','_viewToAnnotation','getByInnerView','listenTo','_innerViewToAnnotation','delete','fire'];(function(_0x4cbf30,_0x3b25c0){const _0x2f0500=function(_0x384258){while(--_0x384258){_0x4cbf30['push'](_0x4cbf30['shift']());}};_0x2f0500(++_0x3b25c0);}(_0x3b25,0x78));const _0x2f05=function(_0x4cbf30,_0x3b25c0){_0x4cbf30=_0x4cbf30-0x0;let _0x2f0500=_0x3b25[_0x4cbf30];return _0x2f0500;};import{CKEditorError as _0x19bf33,Collection as _0x4c5e97,FocusTracker as _0x354511}from'ckeditor5/src/utils';export default class x extends _0x4c5e97{constructor(_0x51a849=[]){super(),this[_0x2f05('0x11')]=new Map(),this[_0x2f05('0xe')]=new Map(),this[_0x2f05('0x1b')]=new _0x354511(),this[_0x2f05('0x1b')]['on'](_0x2f05('0x17'),(_0x17dbc0,_0x69ef4a,_0x1dcd39)=>{_0x1dcd39||this[_0x2f05('0x13')](_0x2f05('0x18'));});for(const _0x1764ad of _0x51a849)this[_0x2f05('0x21')](_0x1764ad);}get[_0x2f05('0xc')](){return this[_0x2f05('0x1b')][_0x2f05('0xc')];}[_0x2f05('0x21')](_0x4e7e26){if(this[_0x2f05('0x2')](_0x4e7e26))throw new _0x19bf33(_0x2f05('0x1e'),null);this[_0x2f05('0x11')][_0x2f05('0x6')](_0x4e7e26['innerView'],_0x4e7e26),this[_0x2f05('0xe')][_0x2f05('0x6')](_0x4e7e26[_0x2f05('0x1')],_0x4e7e26);for(const _0x59a28c of _0x4e7e26[_0x2f05('0x8')])this[_0x2f05('0x1b')][_0x2f05('0x21')](_0x59a28c);this[_0x2f05('0x10')](_0x4e7e26['focusableElements'],'add',(_0x17d263,_0x1d5904)=>{this[_0x2f05('0x1b')][_0x2f05('0x21')](_0x1d5904);}),this[_0x2f05('0x10')](_0x4e7e26[_0x2f05('0x8')],_0x2f05('0x3'),(_0x197bb1,_0x4a9eea)=>{this[_0x2f05('0x1b')]['remove'](_0x4a9eea);}),this[_0x2f05('0x10')](_0x4e7e26[_0x2f05('0x1')]['focusTracker'],_0x2f05('0x17'),(_0x461e8d,_0x5c1e70,_0x4b0811)=>{_0x4b0811&&this[_0x2f05('0x13')]('focus',_0x4e7e26);}),_0x4e7e26[_0x2f05('0x19')]();const _0x1d87cc=this[_0x2f05('0x22')](_0x4e7e26[_0x2f05('0x1')][_0x2f05('0x1c')]);return super[_0x2f05('0x21')](_0x4e7e26,_0x1d87cc);}[_0x2f05('0x3')](_0x3d3fc7){if(!this[_0x2f05('0x2')](_0x3d3fc7))throw new _0x19bf33(_0x2f05('0xd'),null);this[_0x2f05('0x14')](_0x3d3fc7[_0x2f05('0x1')][_0x2f05('0x9')]),this[_0x2f05('0x14')](_0x3d3fc7[_0x2f05('0x8')]);for(const _0x5eaeb6 of _0x3d3fc7[_0x2f05('0x8')])this[_0x2f05('0x1b')]['remove'](_0x5eaeb6);return this['_viewToAnnotation'][_0x2f05('0x12')](_0x3d3fc7[_0x2f05('0x1')]),this[_0x2f05('0x11')]['delete'](_0x3d3fc7[_0x2f05('0x1d')]),super[_0x2f05('0x3')](_0x3d3fc7);}[_0x2f05('0xf')](_0x1a0a87){return this[_0x2f05('0x11')][_0x2f05('0x7')](_0x1a0a87);}[_0x2f05('0x20')](_0x4a083b){return this[_0x2f05('0xe')][_0x2f05('0x7')](_0x4a083b);}['destroy'](){super[_0x2f05('0x0')](),this['stopListening'](),this[_0x2f05('0x11')][_0x2f05('0x0')](),this[_0x2f05('0xe')][_0x2f05('0x0')](),this['_focusTracker'][_0x2f05('0xa')]();}[_0x2f05('0x1a')](){for(const _0x44cfdc of this)_0x44cfdc['updateTargetRect']();this[_0x2f05('0x5')]();}[_0x2f05('0x5')](){const _0x38cd01=Array[_0x2f05('0xb')](this)['sort']((_0x566c16,_0x4dade2)=>v(_0x566c16['view'][_0x2f05('0x1c')],_0x4dade2[_0x2f05('0x1')][_0x2f05('0x1c')]));for(let _0x8bdbd3=_0x38cd01[_0x2f05('0x1f')]-0x1;_0x8bdbd3>0x0;_0x8bdbd3--){const _0x26354d=_0x38cd01[_0x8bdbd3];_0x8bdbd3!==this[_0x2f05('0x16')](_0x26354d)&&(this[_0x2f05('0x3')](_0x26354d),this['add'](_0x26354d));}}['_getOrderInContent'](_0x405fff){let _0x968a3c=0x0;if(!_0x405fff)return this[_0x2f05('0x1f')];for(const _0x5bc0a3 of this){const _0x568a71=_0x5bc0a3[_0x2f05('0x1')][_0x2f05('0x1c')];if(_0x568a71){if(v(_0x405fff,_0x568a71)<0x0)return _0x968a3c;_0x968a3c++;}}return _0x968a3c;}}export function bindAnnotationCollections({source:_0x24d318,target:_0x432179,filter:_0x2eda4e}){for(const _0x2e78c5 of _0x24d318)_0x2eda4e(_0x2e78c5)&&_0x432179['add'](_0x2e78c5);_0x432179[_0x2f05('0x10')](_0x24d318,_0x2f05('0x21'),(_0x3ac4ae,_0x4bc8d6)=>{_0x2eda4e(_0x4bc8d6)&&_0x432179['add'](_0x4bc8d6);}),_0x432179[_0x2f05('0x10')](_0x24d318,_0x2f05('0x3'),(_0x160410,_0x2c76c8)=>{_0x432179[_0x2f05('0x2')](_0x2c76c8)&&_0x432179[_0x2f05('0x3')](_0x2c76c8);});}function v(_0x21679f,_0x108c4c){if(null===_0x21679f&&null===_0x108c4c)return 0x0;if(null===_0x21679f)return-0x1;if(null===_0x108c4c)return 0x1;const _0x4e3291=_0x21679f[_0x2f05('0x15')]-_0x108c4c[_0x2f05('0x15')];return 0x0==_0x4e3291?_0x21679f[_0x2f05('0x4')]-_0x108c4c[_0x2f05('0x4')]:_0x4e3291;}