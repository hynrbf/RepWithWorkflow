/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1f1e=['register','plugins','get','_detachFromContainer','WideSidebar','attach','_annotations','set','ck-sidebar--wide','activeAnnotation','rearrange','cancel','high','updateTargetRect','pluginName','wideSidebar','focus','context','editors','listenTo','widesidebar-attach-already-attached','resize','widesidebar-detach-not-attached','add','_editorAnnotations','_destroyEditorAnnotationsIntegration','getOrderedSelectedAnnotations','off','_attachToContainer','ready','isAttached','has','destroy','annotations','_activeAnnotation','hasDomSelection','removeEventListener','stop','setActiveAnnotation','_refreshPositioningDebounced','requires','switchTo','refreshPositioning','container','detach','refresh','_integrateWithEditorAnnotations','remove'];(function(_0x207311,_0x1f1e3b){const _0x51552c=function(_0x1e5df5){while(--_0x1e5df5){_0x207311['push'](_0x207311['shift']());}};_0x51552c(++_0x1f1e3b);}(_0x1f1e,0x6c));const _0x5155=function(_0x207311,_0x1f1e3b){_0x207311=_0x207311-0x0;let _0x51552c=_0x1f1e[_0x207311];return _0x51552c;};import{ContextPlugin as _0x485d69,Context as _0x506c78}from'ckeditor5/src/core';import _0x28a5d8 from'./annotationsuis';import _0xfe5a3a from'./sidebar';import{CKEditorError as _0x1ca927,Collection as _0x3bf0a0}from'ckeditor5/src/utils';import{debounce as _0x232453}from'lodash-es';import _0x493f23 from'./editorannotations';export default class i extends _0x485d69{static get[_0x5155('0x1c')](){return[_0xfe5a3a,_0x28a5d8];}static get[_0x5155('0x2')](){return _0x5155('0x28');}constructor(_0x341b03){super(_0x341b03),this[_0x5155('0x12')]=!0x1,this[_0x5155('0x2b')](_0x5155('0x2d'),null),this[_0x5155('0x15')]=null,this[_0x5155('0xc')]=new _0x3bf0a0(),this[_0x5155('0x1b')]=_0x232453(()=>{this[_0x5155('0x15')][_0x5155('0x1e')]();},0xfa,{'leading':!0x1});}['init'](){const _0x3e9f97=this['context'][_0x5155('0x25')][_0x5155('0x26')](_0x28a5d8),_0x2e4b2c=this[_0x5155('0x5')][_0x5155('0x25')]['get'](_0xfe5a3a);_0x3e9f97[_0x5155('0x24')](_0x5155('0x3'),this),_0x2e4b2c[_0x5155('0x1f')]&&_0x3e9f97[_0x5155('0x1d')](_0x5155('0x3'));}['setActiveAnnotation'](_0x4c1554){if(_0x4c1554===this[_0x5155('0x2d')])return;const _0x26f92e=this[_0x5155('0x5')]['plugins'][_0x5155('0x26')](_0xfe5a3a);_0x26f92e[_0x5155('0x16')]=_0x4c1554;const _0x3b9a6f=this[_0x5155('0x2d')];this['activeAnnotation']=_0x4c1554,_0x26f92e[_0x5155('0x21')]({'blurredAnnotation':_0x3b9a6f,'activatedAnnotation':this[_0x5155('0x2d')]});}[_0x5155('0x29')](_0x4ba3b7){this[_0x5155('0x15')]=_0x4ba3b7;const _0xe9e16d=this[_0x5155('0x5')][_0x5155('0x25')][_0x5155('0x26')](_0xfe5a3a);if(_0xe9e16d[_0x5155('0x2a')]=_0x4ba3b7,this[_0x5155('0x12')])throw new _0x1ca927(_0x5155('0x8'),this);this[_0x5155('0x12')]=!0x0,this[_0x5155('0x7')](_0xe9e16d,'set:container',()=>{this[_0x5155('0x20')](),this[_0x5155('0x7')](_0xe9e16d,'change:container',_0xdec349=>{_0xdec349[_0x5155('0xf')](),this[_0x5155('0x29')](_0x4ba3b7);});}),_0xe9e16d[_0x5155('0x10')]({'viewClass':_0x5155('0x2c')});const _0xdc1278=_0x38b34d=>{_0x38b34d[_0x5155('0x1')](),_0xe9e16d['addAnnotation'](_0x38b34d);};for(const _0x4838ca of _0x4ba3b7)_0xdc1278(_0x4838ca);this[_0x5155('0x7')](_0x4ba3b7,_0x5155('0xb'),(_0x3ae847,_0x259982)=>{_0xdc1278(_0x259982);}),this[_0x5155('0x7')](_0x4ba3b7,_0x5155('0x23'),(_0x510dfa,_0x582cd1,_0x22d930)=>{_0xe9e16d[_0x5155('0x2e')]({'removedAnnotation':_0x582cd1,'previousAnnotation':_0x4ba3b7['get'](_0x22d930-0x1),'nextAnnotation':_0x4ba3b7[_0x5155('0x26')](_0x22d930+0x1)}),_0x582cd1===this[_0x5155('0x2d')]&&this[_0x5155('0x1a')](null);},{'priority':_0x5155('0x0')}),this[_0x5155('0x7')](_0x4ba3b7,_0x5155('0x4'),(_0x3a097a,_0x3b8de0)=>{this[_0x5155('0x1a')](_0x3b8de0);}),this[_0x5155('0x7')](_0x4ba3b7,'blur',()=>{this[_0x5155('0x1a')](null);});const _0x3aea6c=this[_0x5155('0x5')]instanceof _0x506c78?this[_0x5155('0x5')][_0x5155('0x6')]:new _0x3bf0a0([this[_0x5155('0x5')]]);for(const _0x59f56d of _0x3aea6c)this['_integrateWithEditorAnnotations'](_0x59f56d);this['listenTo'](_0x3aea6c,'add',(_0x1dacb0,_0x16417b)=>{this[_0x5155('0x7')](_0x16417b,_0x5155('0x11'),()=>{this[_0x5155('0x22')](_0x16417b);});}),this[_0x5155('0x7')](_0x3aea6c,_0x5155('0x23'),(_0xb33b26,_0x22e1a2)=>{_0x22e1a2[_0x5155('0x25')][_0x5155('0x13')]('EditorAnnotations')&&this[_0x5155('0xd')](_0x22e1a2['plugins'][_0x5155('0x26')]('EditorAnnotations'));}),window['addEventListener'](_0x5155('0x9'),this[_0x5155('0x1b')]),this[_0x5155('0x15')]['refreshPositioning']();}[_0x5155('0x20')](){if(!this['isAttached'])throw new _0x1ca927(_0x5155('0xa'),this);this['setActiveAnnotation'](null);const _0x3ad311=this[_0x5155('0x5')]['plugins'][_0x5155('0x26')](_0xfe5a3a);_0x3ad311[_0x5155('0x27')](this[_0x5155('0x15')]),this['stopListening'](_0x3ad311),this['stopListening'](this[_0x5155('0x15')]),this[_0x5155('0x5')]instanceof _0x506c78&&this['stopListening'](this[_0x5155('0x5')][_0x5155('0x6')]);for(const _0xd1c145 of Array['from'](this[_0x5155('0xc')]))this[_0x5155('0xd')](_0xd1c145);window[_0x5155('0x18')]('resize',this[_0x5155('0x1b')]),this[_0x5155('0x1b')][_0x5155('0x2f')](),this[_0x5155('0x2d')]=null,this['isAttached']=!0x1,this[_0x5155('0x15')]=null;}[_0x5155('0x14')](){this[_0x5155('0x12')]&&this['detach']();}[_0x5155('0x22')](_0x4e1676){const _0x5dc74c=_0x4e1676[_0x5155('0x25')][_0x5155('0x26')](_0x493f23);if(!_0x5dc74c)return;const _0x55a784=()=>{const _0x4061fa=_0x5dc74c[_0x5155('0xe')]({'annotations':this[_0x5155('0x15')],'activeAnnotation':this[_0x5155('0x2d')]});this[_0x5155('0x1a')](_0x4061fa[0x0]||null);};this[_0x5155('0x7')](_0x5dc74c,_0x5155('0x21'),_0x55a784),this[_0x5155('0x7')](_0x5dc74c,'blur',(_0x20f54a,{isAnnotationTracked:_0x531be6})=>{this[_0x5155('0x2d')]&&_0x531be6(this[_0x5155('0x2d')])&&this[_0x5155('0x1a')](null);}),this['listenTo'](_0x5dc74c,'uiUpdate',()=>{this[_0x5155('0x1b')]();}),this[_0x5155('0x7')](this[_0x5155('0x15')],'blur',_0x4bb6ed=>{_0x5dc74c[_0x5155('0x17')]()&&(_0x55a784(),_0x4bb6ed[_0x5155('0x19')]());},{'priority':_0x5155('0x0')}),this['_editorAnnotations'][_0x5155('0xb')](_0x5dc74c);}[_0x5155('0xd')](_0x286ea4){this['stopListening'](_0x286ea4),this[_0x5155('0xc')][_0x5155('0x23')](_0x286ea4);}}