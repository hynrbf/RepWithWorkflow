/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2ecd=['findIndex','CommentsArchive','requires','activate','focus','reopenCommentThread','resolvedThreads','plugins','_calculatePosition','getCommentThread','init','remove','length','highest','add','get','resolveCommentThread','has','collection','listenTo','resolvedAt','context','pluginName'];(function(_0x6e15c2,_0x2ecd61){const _0x2c4009=function(_0x20aece){while(--_0x20aece){_0x6e15c2['push'](_0x6e15c2['shift']());}};_0x2c4009(++_0x2ecd61);}(_0x2ecd,0x80));const _0x2c40=function(_0x6e15c2,_0x2ecd61){_0x6e15c2=_0x6e15c2-0x0;let _0x2c4009=_0x2ecd[_0x6e15c2];return _0x2c4009;};import{ContextPlugin as _0x250069}from'ckeditor5/src/core';import{Collection as _0x65f63c}from'ckeditor5/src/utils';import _0x43b3fd from'./commentsrepository';import _0x5a2941 from'../annotations/annotations';export default class p extends _0x250069{static get[_0x2c40('0x9')](){return _0x2c40('0xb');}static get[_0x2c40('0xc')](){return[_0x43b3fd,_0x5a2941];}constructor(_0x3552a5){super(_0x3552a5),this[_0x2c40('0x10')]=new _0x65f63c();}[_0x2c40('0x14')](){const _0x167898=this[_0x2c40('0x8')],_0x2a46ef=_0x167898['plugins'][_0x2c40('0x2')](_0x43b3fd),_0x2877de=_0x167898[_0x2c40('0x11')][_0x2c40('0x2')](_0x5a2941);this['listenTo'](_0x2a46ef,'addCommentThread',(_0x150e71,{threadId:_0x508c62,resolvedAt:_0x51b41a,deletedAt:_0x52ba3c})=>{if(_0x51b41a&&!_0x52ba3c){const _0x7d00e4=_0x2a46ef['getCommentThread'](_0x508c62);this['resolvedThreads'][_0x2c40('0x1')](_0x7d00e4,this[_0x2c40('0x12')](_0x51b41a));}}),this[_0x2c40('0x6')](_0x2a46ef,_0x2c40('0x3'),(_0x172ddd,{threadId:_0x212ec9,resolvedAt:_0x41d326})=>{const _0x17ba15=_0x2a46ef[_0x2c40('0x13')](_0x212ec9);this[_0x2c40('0x10')]['add'](_0x17ba15,this[_0x2c40('0x12')](_0x41d326));},{'priority':_0x2c40('0x0')}),this[_0x2c40('0x6')](_0x2a46ef,_0x2c40('0xf'),(_0x3918c9,{threadId:_0xf694dc})=>{const _0x5c5723=_0x2a46ef[_0x2c40('0x13')](_0xf694dc);this['resolvedThreads'][_0x2c40('0x4')](_0x5c5723)&&this[_0x2c40('0x10')][_0x2c40('0x15')](_0x5c5723);},{'priority':'highest'}),this['listenTo'](_0x2a46ef,'removeCommentThread',(_0x3490d4,{threadId:_0x53d5a8})=>{const _0x4ce058=_0x2a46ef[_0x2c40('0x13')](_0x53d5a8);this[_0x2c40('0x10')]['has'](_0x4ce058)&&this[_0x2c40('0x10')][_0x2c40('0x15')](_0x4ce058);},{'priority':_0x2c40('0x0')}),this['listenTo'](_0x2877de[_0x2c40('0x5')],_0x2c40('0xe'),(_0x500aad,_0xb2cecd)=>{_0xb2cecd['isActive']=!0x0,_0x2877de[_0x2c40('0xd')](_0xb2cecd);});}[_0x2c40('0x12')](_0x5f319d){const _0x344696=[...this[_0x2c40('0x10')]][_0x2c40('0xa')](_0x1b2e5a=>_0x1b2e5a[_0x2c40('0x7')]<_0x5f319d);return _0x344696>-0x1?_0x344696:this['resolvedThreads'][_0x2c40('0x16')];}}