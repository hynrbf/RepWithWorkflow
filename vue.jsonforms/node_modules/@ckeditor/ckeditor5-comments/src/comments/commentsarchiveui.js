/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5760=['ck-comments-archive-dropdown','commentsArchiveView','change:isOpen','resolvedThreads','extendTemplate','CommentsRepository','_pendingThreads','listenTo','children','get','focusableElements','config','requires','focusTracker','resolvedAt','CommentsArchiveUI','set','indexOf','Annotations','remove','classList','plugins','init','_calculatePosition','contains','channelId','length','ck-body','COMMENTS_ARCHIVE','stopListening','locale','find','buttonView','mainView','editor','panelView','annotationViews','splice','collaboration.channelId','collection','_threadToController','_createArchiveUIDropdown','getByInnerView','position','view','commentsArchive','_handleAnnotationFocusableElements','add','innerView','componentFactory'];(function(_0x40c29b,_0x5760b7){const _0x2542c7=function(_0x1a5ec7){while(--_0x1a5ec7){_0x40c29b['push'](_0x40c29b['shift']());}};_0x2542c7(++_0x5760b7);}(_0x5760,0x174));const _0x2542=function(_0x40c29b,_0x5760b7){_0x40c29b=_0x40c29b-0x0;let _0x2542c7=_0x5760[_0x40c29b];return _0x2542c7;};import'../../theme/commentsarchive.css';import{Plugin as _0x17f238}from'ckeditor5/src/core';import{createDropdown as _0x1dc522,ViewCollection as _0x45d3d4}from'ckeditor5/src/ui';import _0x31d374 from'../../theme/icons/comments-archive.svg';import{getTranslation as _0x21f04c}from'../utils/common-translations';import _0x5983a3 from'./ui/view/commentsarchiveview';import _0x218eb from'./commentsarchive';export default class a extends _0x17f238{static get['pluginName'](){return _0x2542('0x2b');}static get[_0x2542('0x28')](){return[_0x218eb];}constructor(_0x3e85cf){super(_0x3e85cf),this[_0x2542('0xe')]=new _0x45d3d4(),this['_pendingThreads']=[];}[_0x2542('0x0')](){this[_0x2542('0xc')]['ui'][_0x2542('0x1b')][_0x2542('0x19')](_0x2542('0x17'),()=>this[_0x2542('0x13')]());const _0x108275=this[_0x2542('0xc')]['plugins'][_0x2542('0x25')](_0x218eb),_0x59a0f8=this[_0x2542('0xc')][_0x2542('0x31')][_0x2542('0x25')](_0x2542('0x2e')),_0x415e09=this[_0x2542('0xc')][_0x2542('0x31')][_0x2542('0x25')](_0x2542('0x21'));this['listenTo'](_0x108275[_0x2542('0x1f')],_0x2542('0x19'),(_0x2257f7,_0x19a4da)=>{const _0x419a80=this[_0x2542('0xc')][_0x2542('0x27')][_0x2542('0x25')](_0x2542('0x10'));if(!_0x419a80||_0x19a4da['channelId']===_0x419a80){const _0xe00f14=this['_calculatePosition'](_0x19a4da['resolvedAt']),_0x2a29a2=_0x415e09[_0x2542('0x12')][_0x2542('0x25')](_0x19a4da);if(!_0x2a29a2)return void this[_0x2542('0x22')]['push']({'thread':_0x19a4da,'position':_0xe00f14});const _0x161e7e=_0x59a0f8[_0x2542('0x14')](_0x2a29a2[_0x2542('0x16')]);_0x161e7e['isVisible']&&_0x59a0f8['_visibleAnnotations']['remove'](_0x161e7e),this['annotationViews']['add'](_0x161e7e[_0x2542('0x16')],_0xe00f14);}}),this[_0x2542('0x23')](_0x59a0f8[_0x2542('0x11')],'add',(_0x1944f8,_0x57b19b)=>{const _0xbc049d=this[_0x2542('0x22')][_0x2542('0x9')](({thread:_0x586d9c})=>{const _0x151f73=_0x415e09[_0x2542('0x12')][_0x2542('0x25')](_0x586d9c);return _0x151f73&&_0x57b19b[_0x2542('0x1a')]===_0x151f73['view'];});_0xbc049d&&(this['annotationViews'][_0x2542('0x19')](_0x57b19b[_0x2542('0x16')],_0xbc049d[_0x2542('0x15')]),this['_pendingThreads'][_0x2542('0xf')](this[_0x2542('0x22')][_0x2542('0x2d')](_0xbc049d),0x1));}),this['listenTo'](_0x108275['resolvedThreads'],_0x2542('0x2f'),(_0x2918c7,_0x20fe6b)=>{const _0x13b316=this[_0x2542('0xc')][_0x2542('0x27')]['get'](_0x2542('0x10'));if(!_0x13b316||_0x20fe6b['channelId']===_0x13b316){const _0x2fc5e2=_0x415e09[_0x2542('0x12')][_0x2542('0x25')](_0x20fe6b),_0x862ea8=_0x59a0f8[_0x2542('0x14')](_0x2fc5e2[_0x2542('0x16')]);this[_0x2542('0xe')][_0x2542('0x2f')](_0x862ea8[_0x2542('0x16')]),this[_0x2542('0x7')](_0x862ea8[_0x2542('0x26')]);}});}[_0x2542('0x18')](_0x1efbbd,_0x5fad55){for(const _0x35fa2d of _0x5fad55[_0x2542('0x26')])_0x35fa2d[_0x2542('0x30')][_0x2542('0x2')](_0x2542('0x5'))&&_0x1efbbd[_0x2542('0x29')][_0x2542('0x19')](_0x35fa2d);this[_0x2542('0x23')](_0x5fad55[_0x2542('0x26')],_0x2542('0x19'),(_0x5bd016,_0x1717a7)=>{_0x1717a7['classList'][_0x2542('0x2')](_0x2542('0x5'))&&_0x1efbbd['focusTracker'][_0x2542('0x19')](_0x1717a7);}),this[_0x2542('0x23')](_0x5fad55['focusableElements'],_0x2542('0x2f'),(_0x5dca97,_0x2601c8)=>{_0x2601c8[_0x2542('0x30')]['contains']('ck-body')&&_0x1efbbd[_0x2542('0x29')][_0x2542('0x2f')](_0x2601c8);});}[_0x2542('0x1')](_0x5abfe7){const _0xb3e0e0=this[_0x2542('0xc')][_0x2542('0x27')][_0x2542('0x25')](_0x2542('0x10')),_0x55eb02=[...this[_0x2542('0xc')][_0x2542('0x31')][_0x2542('0x25')](_0x218eb)[_0x2542('0x1f')]]['filter'](_0x1f1a3c=>_0x1f1a3c[_0x2542('0x3')]!==_0xb3e0e0)['findIndex'](_0x1baa31=>_0x1baa31[_0x2542('0x2a')]<_0x5abfe7);return _0x55eb02>-0x1?_0x55eb02:this['annotationViews'][_0x2542('0x4')];}[_0x2542('0x13')](){const _0xdbaa58=this[_0x2542('0xc')],_0xee6d8c=this[_0x2542('0xc')][_0x2542('0x31')][_0x2542('0x25')](_0x2542('0x2e')),_0x40e6e9=_0x1dc522(_0xdbaa58[_0x2542('0x8')]);_0x40e6e9[_0x2542('0xa')][_0x2542('0x2c')]({'icon':_0x31d374,'label':_0x21f04c(_0xdbaa58['locale'],_0x2542('0x6')),'tooltip':!0x0}),_0x40e6e9[_0x2542('0xd')][_0x2542('0x20')]({'attributes':{'class':_0x2542('0x1c')}}),_0x40e6e9['on'](_0x2542('0x1e'),(_0x2bfc75,_0x53370d,_0x4d7ebf)=>{this[_0x2542('0x1d')]||(this[_0x2542('0x1d')]=new _0x5983a3(_0xdbaa58[_0x2542('0x8')],this[_0x2542('0xe')])),_0x4d7ebf?_0x40e6e9[_0x2542('0xd')][_0x2542('0x24')][_0x2542('0x19')](this[_0x2542('0x1d')]):_0x40e6e9[_0x2542('0xd')]['children'][_0x2542('0x2f')](this[_0x2542('0x1d')]);});for(const _0xc0ef63 of this[_0x2542('0xe')]){const _0x1133c5=_0xee6d8c[_0x2542('0x14')](_0xc0ef63[_0x2542('0xb')]);this[_0x2542('0x18')](_0x40e6e9,_0x1133c5);}return _0x40e6e9[_0x2542('0x23')](this[_0x2542('0xe')],_0x2542('0x19'),(_0xf2ee54,_0x405628)=>{const _0x51fe70=_0xee6d8c[_0x2542('0x14')](_0x405628[_0x2542('0xb')]);this[_0x2542('0x18')](_0x40e6e9,_0x51fe70);}),_0x40e6e9['listenTo'](this['annotationViews'],'remove',(_0x410bbd,_0x1e31b2)=>{const _0x418c4b=_0xee6d8c[_0x2542('0x14')](_0x1e31b2[_0x2542('0xb')]);for(const _0x5ebb0 of _0x418c4b[_0x2542('0x26')])_0x5ebb0[_0x2542('0x30')][_0x2542('0x2')](_0x2542('0x5'))&&_0x40e6e9[_0x2542('0x29')][_0x2542('0x2f')](_0x5ebb0);}),_0x40e6e9;}}