/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x47b9=['low','execute','removeCommentThread','pluginName','editing','_createUIButton','editor','length','CommentsListView','isFocused','has','listenTo','map','add','_viewToController','innerView','plugins','comment','locale','init','change:activeAnnotations','CommentsUI','Comment','CommentThreadInputView','addCommentThread','tooltip','bind','find','from','componentFactory','activeMarker','getRange','requires','commands','_threadToController','highest','view','hasMarkerForId','get','focus'];(function(_0x7022b9,_0x47b9d6){const _0x3a5a5c=function(_0x4176e9){while(--_0x4176e9){_0x7022b9['push'](_0x7022b9['shift']());}};_0x3a5a5c(++_0x47b9d6);}(_0x47b9,0x81));const _0x3a5a=function(_0x7022b9,_0x47b9d6){_0x7022b9=_0x7022b9-0x0;let _0x3a5a5c=_0x47b9[_0x7022b9];return _0x3a5a5c;};import{Plugin as _0x900d09}from'ckeditor5/src/core';import _0x54225a from'./commentsrepository';import _0x295cf1 from'./commentsediting';import _0x163d5f from'../annotations/editorannotations';import{ButtonView as _0x3b497d}from'ckeditor5/src/ui';import _0x3ac137 from'../../theme/icons/add-comment.svg';import _0x4ecaf2 from'../annotations/annotations';import _0x332726 from'./ui/view/commentslistview';import _0x1b1f76 from'./ui/view/commentthreadinputview';import{getTranslation as _0xdb7802}from'../utils/common-translations';export default class e extends _0x900d09{static get[_0x3a5a('0x22')](){return _0x3a5a('0xc');}static get[_0x3a5a('0x17')](){return[_0x54225a,_0x295cf1,_0x163d5f,_0x4ecaf2];}get[_0x3a5a('0x27')](){return _0x332726;}get[_0x3a5a('0xe')](){return _0x1b1f76;}[_0x3a5a('0xa')](){const _0x611d7b=this[_0x3a5a('0x25')],_0x5cd191=_0x611d7b[_0x3a5a('0x7')][_0x3a5a('0x1d')](_0x54225a),_0x17e664=_0x611d7b[_0x3a5a('0x7')][_0x3a5a('0x1d')](_0x295cf1),_0x40e4ce=_0x611d7b['plugins'][_0x3a5a('0x1d')](_0x4ecaf2),_0x3fbb94=_0x611d7b['plugins'][_0x3a5a('0x1d')](_0x163d5f);_0x611d7b['ui'][_0x3a5a('0x14')][_0x3a5a('0x4')](_0x3a5a('0x8'),()=>this[_0x3a5a('0x24')]()),_0x3fbb94['addSourceCollector'](()=>{const _0x5bbd6e=[];for(const [_0xbcf1d0,_0x113db2]of _0x5cd191[_0x3a5a('0x19')]){const _0x394466=_0x17e664['getAllMarkersForId'](_0xbcf1d0['id']),_0x56b8aa=_0x394466[_0x3a5a('0x3')](_0x25b752=>_0x25b752[_0x3a5a('0x16')]());_0x394466[_0x3a5a('0x26')]>0x0&&_0x5bbd6e['push']([_0x113db2[_0x3a5a('0x1b')],_0x56b8aa]);}return _0x5bbd6e;}),this[_0x3a5a('0x2')](_0x40e4ce,_0x3a5a('0xb'),(_0x30c44e,_0x28b6c0,_0x542928)=>{const _0x34dcff=Array[_0x3a5a('0x13')](_0x542928)[_0x3a5a('0x3')](_0x3a84fc=>_0x3a84fc[_0x3a5a('0x6')])[_0x3a5a('0x12')](_0xf3821c=>_0x5cd191[_0x3a5a('0x5')][_0x3a5a('0x1')](_0xf3821c));if(!_0x34dcff)return void(_0x17e664[_0x3a5a('0x15')]=null);const _0x33265b=_0x5cd191[_0x3a5a('0x5')]['get'](_0x34dcff)['model']['id'],_0x3fde79='comment:'+_0x33265b;_0x33265b&&_0x17e664['hasMarkerForId'](_0x33265b)?_0x17e664[_0x3a5a('0x15')]=_0x3fde79:_0x17e664[_0x3a5a('0x15')]&&(_0x17e664[_0x3a5a('0x15')]=null);}),this[_0x3a5a('0x2')](_0x5cd191,_0x3a5a('0x21'),(_0x579a2f,{threadId:_0x288e9c,isFromAdapter:_0x475a0b})=>{!_0x475a0b&&_0x611d7b['ui']['focusTracker'][_0x3a5a('0x0')]&&_0x17e664[_0x3a5a('0x1c')](_0x288e9c)&&_0x611d7b[_0x3a5a('0x23')][_0x3a5a('0x1b')]['focus']();},{'priority':_0x3a5a('0x1a')}),this[_0x3a5a('0x2')](_0x5cd191,'addComment',(_0x48600f,{threadId:_0x421cf0,isFromAdapter:_0x5b527b})=>{if(_0x5b527b||!_0x17e664[_0x3a5a('0x1c')](_0x421cf0)||!_0x5cd191['hasCommentThread'](_0x421cf0))return;0x1===_0x5cd191['getCommentThread'](_0x421cf0)[_0x3a5a('0x26')]&&(_0x611d7b[_0x3a5a('0x23')][_0x3a5a('0x1b')][_0x3a5a('0x1e')](),_0x48600f['stop']());},{'priority':_0x3a5a('0x1f')});}[_0x3a5a('0x24')](){const _0x4493f3=this[_0x3a5a('0x25')],_0x2e9584=new _0x3b497d(_0x4493f3['locale']),_0x489313=_0x4493f3[_0x3a5a('0x18')][_0x3a5a('0x1d')](_0x3a5a('0xf'));return _0x2e9584['label']=_0xdb7802(_0x4493f3[_0x3a5a('0x9')],_0x3a5a('0xd')),_0x2e9584[_0x3a5a('0x10')]=_0xdb7802(_0x4493f3[_0x3a5a('0x9')],_0x3a5a('0xd')),_0x2e9584['icon']=_0x3ac137,_0x2e9584[_0x3a5a('0x11')]('isEnabled')['to'](_0x489313),this[_0x3a5a('0x2')](_0x2e9584,_0x3a5a('0x20'),()=>_0x489313[_0x3a5a('0x20')]()),_0x2e9584;}}