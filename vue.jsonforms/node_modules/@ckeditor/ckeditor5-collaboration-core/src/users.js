/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5183=['users-me-missing-user','config','charAt','trial-license-key-reached-limit-time','_id','color','isAnonymous','has','licenseKeyValid','getOperationAuthor','_lastColor','decorate','users-add-invalid-id','_licenseKeyCheckInterval','licenseKeyTrialLimit:time','defineMe','_addAnonymousUser','getBackgroundColorClass','users.anonymousUserId','requires','split','context','addUser','define','licenseKeyTrial','trial-license-key-reached-limit-changes','_locale','licenseKey','name','users','get','useAnonymousUser','init','licenseKeyTrialLimit:operations','Anonymous','licenseKeyInvalid','_getNextColor','_getInitial','users.colorsCount','_myId','licenseKeyTrialLimit:revisions','avatar','getSelectionClass','pluginName','Users','_isAnonymous','getUser','anonymous-user','ck-user__marker--','length','getMarkerClass','string','You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20collaboration\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.','invalid-license-key','includes','trial-license-key-reached-limit-revisions'];(function(_0x39358b,_0x5183cd){const _0x185864=function(_0x28c88a){while(--_0x28c88a){_0x39358b['push'](_0x39358b['shift']());}};_0x185864(++_0x5183cd);}(_0x5183,0x154));const _0x1858=function(_0x39358b,_0x5183cd){_0x39358b=_0x39358b-0x0;let _0x185864=_0x5183[_0x39358b];return _0x185864;};import{ContextPlugin as _0x5ef830}from'ckeditor5/src/core';import{Collection as _0x3edf81,CKEditorError as _0x5f0229}from'ckeditor5/src/utils';import _0x105335 from'./permissions';import{getTranslation as _0x3bd8ee}from'./utils/common-translations';import'../theme/usercolors.css';export default class l extends _0x5ef830{static get[_0x1858('0x27')](){return _0x1858('0x28');}static get[_0x1858('0xf')](){return[_0x105335];}constructor(_0x3e7961){super(_0x3e7961),this['context'][_0x1858('0x35')][_0x1858('0x13')](_0x1858('0xe'),_0x1858('0x2b')),this[_0x1858('0x11')]['config'][_0x1858('0x13')](_0x1858('0x22'),0x8),this[_0x1858('0x19')]=new _0x3edf81(),this[_0x1858('0x16')]=_0x3e7961['locale'],this[_0x1858('0x9')]=null,this[_0x1858('0x6')]=0x0,this['_myId']=null,this[_0x1858('0x7')]('getOperationAuthor');}[_0x1858('0x1c')](){const _0x3f08de=this['context'];this[_0x1858('0x17')]=_0x3f08de[_0x1858('0x35')][_0x1858('0x1a')](_0x1858('0x17'));const _0x5c77e7=['licenseKeyTrial',_0x1858('0x1f'),_0x1858('0x4'),_0x1858('0x1d'),_0x1858('0xa'),_0x1858('0x24')];this[_0x1858('0x9')]=setInterval(()=>{let _0x1a493c;for(const _0x5ce2fd in _0x3f08de){const _0x23f20a=_0x3f08de[_0x5ce2fd];if(_0x5c77e7[_0x1858('0x32')](_0x23f20a)){delete _0x3f08de[_0x5ce2fd],_0x1a493c=_0x23f20a;break;}}if(_0x1858('0x1f')===_0x1a493c)throw clearInterval(this[_0x1858('0x9')]),new _0x5f0229(_0x1858('0x31'),null);if(_0x1858('0x14')===_0x1a493c&&console['info'](_0x1858('0x30')),'licenseKeyTrialLimit:operations'===_0x1a493c)throw clearInterval(this[_0x1858('0x9')]),new _0x5f0229(_0x1858('0x15'),null);if('licenseKeyTrialLimit:time'===_0x1a493c)throw clearInterval(this[_0x1858('0x9')]),new _0x5f0229(_0x1858('0x37'),null);if(_0x1858('0x24')===_0x1a493c)throw clearInterval(this[_0x1858('0x9')]),new _0x5f0229(_0x1858('0x33'),null);_0x1858('0x4')===_0x1a493c&&clearInterval(this[_0x1858('0x9')]);},0x3e8),this[_0x1858('0xc')]();}get['me'](){return null==this[_0x1858('0x23')]?null:this['getUser'](this[_0x1858('0x23')]);}[_0x1858('0x12')]({id:_0x1a6c41,name:_0x473008,..._0x406c4c}){if(!_0x1a6c41||_0x1858('0x2f')!=typeof _0x1a6c41)throw new _0x5f0229(_0x1858('0x8'));if(this[_0x1858('0x19')][_0x1858('0x3')](_0x1a6c41))throw new _0x5f0229('users-add-duplicated-id',null,{'id':_0x1a6c41});const _0x3f244c={..._0x406c4c,'id':_0x1a6c41,'name':a(this[_0x1858('0x16')],_0x473008),'color':this[_0x1858('0x20')]()};_0x3f244c[_0x1858('0x18')]=a(this[_0x1858('0x16')],_0x3f244c[_0x1858('0x18')]);const _0x4df087=new User(_0x3f244c);return this[_0x1858('0x19')]['add'](_0x4df087),_0x4df087;}[_0x1858('0x2a')](_0x41e3ae){return this[_0x1858('0x19')][_0x1858('0x1a')](_0x41e3ae);}[_0x1858('0x1b')](){const _0x768889=this[_0x1858('0x11')][_0x1858('0x35')][_0x1858('0x1a')](_0x1858('0xe'));this['_myId']||this['defineMe'](_0x768889);}[_0x1858('0xb')](_0x487f82){if(this[_0x1858('0x23')])throw new _0x5f0229('users-me-already-defined',null);if(!this[_0x1858('0x2a')](_0x487f82))throw new _0x5f0229(_0x1858('0x34'),null);this[_0x1858('0x23')]=_0x487f82;}[_0x1858('0x5')](){return this['me'];}['destroy'](){super['destroy'](),clearInterval(this['_licenseKeyCheckInterval']);}[_0x1858('0x20')](){const _0x55bbcf=this['context'][_0x1858('0x35')][_0x1858('0x1a')](_0x1858('0x22'));return this[_0x1858('0x6')]>=_0x55bbcf&&(this[_0x1858('0x6')]=0x0),new u(this[_0x1858('0x6')]++);}[_0x1858('0xc')](){const _0x223650=this[_0x1858('0x11')][_0x1858('0x35')][_0x1858('0x1a')]('users.anonymousUserId');this[_0x1858('0x12')]({'id':_0x223650,'name':_0x3bd8ee(this['_locale'],_0x1858('0x1e'))})[_0x1858('0x29')]=!0x0;}}export class User{constructor(_0x3959b9){this['id']=_0x3959b9['id'],this[_0x1858('0x1')]=_0x3959b9[_0x1858('0x1')],this['name']=_0x3959b9['name'],this[_0x1858('0x25')]=_0x3959b9[_0x1858('0x25')],this[_0x1858('0x29')]=!0x1;}get[_0x1858('0x2')](){return this[_0x1858('0x29')];}get['initials'](){const _0x4f4011=this[_0x1858('0x18')][_0x1858('0x10')]('\x20');return 0x1===_0x4f4011['length']?this[_0x1858('0x21')](_0x4f4011[0x0]):this[_0x1858('0x21')](_0x4f4011[0x0])+this['_getInitial'](_0x4f4011[_0x4f4011[_0x1858('0x2d')]-0x1]);}['_getInitial'](_0x388ead){return _0x388ead[_0x1858('0x36')](0x0)['toUpperCase']();}}function a(_0x110552,_0x366335=''){return''==(_0x366335=_0x366335['trim']())?_0x3bd8ee(_0x110552,_0x1858('0x1e')):_0x366335;}class u{constructor(_0x431eba){this['_id']=_0x431eba;}[_0x1858('0xd')](){return'ck-user__bg-color--'+this[_0x1858('0x0')];}[_0x1858('0x26')](){return'ck-user__selection--'+this[_0x1858('0x0')];}[_0x1858('0x2e')](){return _0x1858('0x2c')+this[_0x1858('0x0')];}}