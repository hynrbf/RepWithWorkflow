/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x32fc=['mergeTableCellLeft','mergeTableCellRight','has','find','_isForcedDefaultExecutionBlock','formatBlock','tableCell','*Merge\x20cells*','horizontally','get','element','value','setSelection','_acceptFormatSuggestionCallbackFactory','getAncestors','getSuggestions','commandName','_areSelectedCellsMergable','change','type','size','findAncestor','deletion','length','editor','stop','mergeTableCellUp','splitTableCellHorizontally','model','TrackChangesEditing','document','markBlockFormat','registerCustomCallback','detach','highest','markMultiRangeBlockFormat','enableCommand','createTableWalker','splitTableCellVertically','author','plugins','direction','selection','format','TableEditing','from','createRangeOn','_areMergableCells','requires','mergeTableCellDown','push','commands','trackChanges','getRanges','cell','getFirstPosition','add','afterInit','containsRange','accept','mergeTableCells','locale','insertion','_tablePostFixingSubtypes','TableUtils','registerDescriptionCallback','subType','execute','refresh','isInContent','_suggestionFactory','fromRange','rootName','map','low','getSelectionAffectedTableCells','*Split\x20cell:*\x20vertically'];(function(_0x43991f,_0x32fce6){const _0x1def32=function(_0x261750){while(--_0x261750){_0x43991f['push'](_0x43991f['shift']());}};_0x1def32(++_0x32fce6);}(_0x32fc,0x180));const _0x1def=function(_0x43991f,_0x32fce6){_0x43991f=_0x43991f-0x0;let _0x1def32=_0x32fc[_0x43991f];return _0x1def32;};import{Plugin as _0x1c99b2}from'ckeditor5/src/core';import _0x4cdabb from'./table';import{LiveRange as _0x2df9e5}from'ckeditor5/src/engine';import{getTranslation as _0x3b6c68}from'../utils/common-translations';export default class dt extends _0x1c99b2{static get[_0x1def('0x31')](){return[_0x4cdabb];}[_0x1def('0x3a')](){const _0x12172b=this[_0x1def('0x19')],_0xc2aeb1=_0x12172b[_0x1def('0x1d')][_0x1def('0x1f')][_0x1def('0x2b')],_0x3c38b8=_0x12172b[_0x1def('0x3e')];if(!_0x12172b[_0x1def('0x29')][_0x1def('0x3')](_0x1def('0x2d')))return;const _0x1a001a=_0x12172b[_0x1def('0x29')][_0x1def('0xa')](_0x1def('0x1e')),_0x318cf7=_0x12172b[_0x1def('0x29')]['get'](_0x1def('0x41')),_0xcb5888=_0x12172b['plugins'][_0x1def('0xa')](_0x4cdabb);_0xcb5888[_0x1def('0x40')][_0x1def('0x33')]('mergeTableCells'),_0x1a001a[_0x1def('0x25')](_0x1def('0x3d'),()=>{const _0xc3f9a1=_0x318cf7['getSelectionAffectedTableCells'](_0x12172b['model']['document'][_0x1def('0x2b')]);_0x12172b[_0x1def('0x1d')][_0x1def('0x13')](()=>{_0x1a001a[_0x1def('0x24')](_0xc3f9a1,{'commandName':_0x1def('0x3d'),'commandParams':[]},[],_0x1def('0x3d'));});}),_0x12172b['commands'][_0x1def('0xa')](_0x1def('0x3d'))['on'](_0x1def('0x44'),(_0x21a497,_0x569b4e)=>{_0x12172b['commands'][_0x1def('0xa')](_0x1def('0x35'))[_0x1def('0xc')]&&(_0x569b4e[_0x1def('0x18')]>0x0&&_0x569b4e[_0x569b4e[_0x1def('0x18')]-0x1]&&_0x569b4e[_0x569b4e['length']-0x1]['forceDefaultExecution']||_0x1a001a[_0x1def('0x5')]||this[_0x1def('0x12')]()||_0x21a497[_0x1def('0x1a')]());},{'priority':_0x1def('0x23')});for(const _0x57b502 of[_0x1def('0x1b'),_0x1def('0x2'),_0x1def('0x32'),_0x1def('0x1')]){const _0x112e9d=_0x12172b[_0x1def('0x34')][_0x1def('0xa')](_0x57b502);_0x1a001a[_0x1def('0x25')](_0x57b502,()=>{const _0x4e6d72=_0x12172b[_0x1def('0x1d')][_0x1def('0x1f')]['selection']['getFirstPosition']()['getAncestors']()['find'](_0xba405b=>_0xba405b['is'](_0x1def('0xb'),_0x1def('0x7'))),_0xc7351=_0x112e9d[_0x1def('0xc')];_0x12172b[_0x1def('0x1d')][_0x1def('0x13')](()=>{_0x1a001a['markMultiRangeBlockFormat']([_0x4e6d72,_0xc7351],{'commandName':_0x1def('0x3d'),'commandParams':[]},[],_0x1def('0x3d'));});});}for(const _0x185cdd of[_0x1def('0x27'),'splitTableCellHorizontally']){const _0x71c60f=_0x12172b[_0x1def('0x34')][_0x1def('0xa')](_0x185cdd);_0x1a001a[_0x1def('0x25')](_0x185cdd,()=>{const _0x2800c8=_0x318cf7[_0x1def('0x4c')](_0x12172b['model'][_0x1def('0x1f')]['selection'])[0x0],_0x37e889=_0x2800c8[_0x1def('0x16')]('table'),{column:_0x4be12c,row:_0x364652}=_0x318cf7['getCellLocation'](_0x2800c8);let _0x19f11e=[];if(_0x1def('0x9')==_0x71c60f[_0x1def('0x2a')]){const _0x21ba43=_0x318cf7[_0x1def('0x26')](_0x37e889,{'startRow':_0x364652,'endRow':_0x364652,'includeAllSlots':!0x0});_0x19f11e=Array[_0x1def('0x2e')](_0x21ba43)['map'](_0x4daaab=>_0x4daaab[_0x1def('0x37')]);}else{const _0x2aa8cd=_0x318cf7['createTableWalker'](_0x37e889,{'column':_0x4be12c,'includeAllSlots':!0x0});_0x19f11e=Array[_0x1def('0x2e')](_0x2aa8cd)[_0x1def('0x4a')](_0x50296a=>_0x50296a[_0x1def('0x37')]);}_0x12172b[_0x1def('0x1d')]['change'](_0x3f0670=>{_0x1a001a[_0x1def('0x20')](_0x3f0670[_0x1def('0x2f')](_0x2800c8),{'commandName':_0x185cdd,'commandParams':[]},_0x19f11e,_0x185cdd);});});}_0x1a001a['_descriptionFactory'][_0x1def('0x42')](_0x2e3a2e=>{const {data:_0x47c288}=_0x2e3a2e;if(_0x47c288)return'mergeTableCells'==_0x47c288['commandName']?{'type':'format','content':_0x3b6c68(_0x3c38b8,_0x1def('0x8'))}:void 0x0;}),_0x1a001a['_descriptionFactory'][_0x1def('0x42')](_0x22267b=>{const {data:_0x3a733e}=_0x22267b;if(_0x3a733e)return _0x1def('0x27')==_0x3a733e[_0x1def('0x11')]?{'type':_0x1def('0x2c'),'content':_0x3b6c68(_0x3c38b8,_0x1def('0x0'))}:'splitTableCellHorizontally'==_0x3a733e[_0x1def('0x11')]?{'type':_0x1def('0x2c'),'content':_0x3b6c68(_0x3c38b8,'*Split\x20cell:*\x20horizontally')}:void 0x0;});const _0x77d5b3=_0xcb5888[_0x1def('0xe')]();for(const _0xfdb85d of['mergeTableCellUp',_0x1def('0x2'),_0x1def('0x32'),_0x1def('0x1')])_0x1a001a[_0x1def('0x47')]['registerCustomCallback']('formatBlock',_0xfdb85d,_0x1def('0x3c'),_0x77d5b3);for(const _0x2327ba of[_0x1def('0x27'),_0x1def('0x1c')])_0x1a001a[_0x1def('0x47')][_0x1def('0x21')](_0x1def('0x6'),_0x2327ba,_0x1def('0x3c'),_0x77d5b3);_0x1a001a['_suggestionFactory'][_0x1def('0x21')]('formatBlock','mergeTableCells',_0x1def('0x3c'),_0x3f40c4=>{_0x12172b[_0x1def('0x1d')]['change'](_0x2e30f2=>{const _0x56b6f8=Array[_0x1def('0x2e')](_0xc2aeb1[_0x1def('0x36')]())['map'](_0x4eaaa9=>_0x2df9e5[_0x1def('0x48')](_0x4eaaa9));_0x2e30f2[_0x1def('0xd')](_0x3f40c4),_0x12172b[_0x1def('0x34')]['get']('mergeTableCells')[_0x1def('0x45')](),_0x12172b[_0x1def('0x44')](_0x1def('0x3d'),{'forceDefaultExecution':!0x0});const _0xcddf64=_0x56b6f8['filter'](_0x13e320=>'$graveyard'!=_0x13e320['root'][_0x1def('0x49')]);_0xcddf64[_0x1def('0x18')]>0x0&&_0x2e30f2['setSelection'](_0xcddf64);for(const _0x59051c of _0x56b6f8)_0x59051c[_0x1def('0x22')]();});});for(const _0x4edc9d of['mergeTableCellUp','mergeTableCellDown',_0x1def('0x1'),_0x1def('0x2')]){const _0x2cd553=_0x12172b[_0x1def('0x34')][_0x1def('0xa')](_0x4edc9d);_0x2cd553['on']('set:isEnabled',(_0xbafbfc,_0x43c63c,_0x500192)=>{if(_0x500192){const _0x371767=_0x12172b[_0x1def('0x1d')]['document']['selection'][_0x1def('0x38')]()[_0x1def('0xf')]()[_0x1def('0x4')](_0x3d3b7c=>_0x3d3b7c['is']('element',_0x1def('0x7')));this[_0x1def('0x30')](_0x2cd553[_0x1def('0xc')],_0x371767)||(_0xbafbfc['return']=!0x1,_0xbafbfc[_0x1def('0x1a')]());}},{'priority':_0x1def('0x4b')});}}[_0x1def('0x12')](){const _0x57e7bb=this['editor']['commands'][_0x1def('0xa')](_0x1def('0x3d')),_0x26cca1=this['editor'][_0x1def('0x29')][_0x1def('0xa')]('TableUtils');if(!_0x57e7bb['isEnabled'])return!0x1;const _0x4ef94c=_0x26cca1[_0x1def('0x4c')](this[_0x1def('0x19')][_0x1def('0x1d')][_0x1def('0x1f')]['selection']);for(const _0x17212a of _0x4ef94c)for(const _0x1efab1 of _0x4ef94c)if(_0x17212a!=_0x1efab1&&!this[_0x1def('0x30')](_0x17212a,_0x1efab1))return!0x1;return!0x0;}[_0x1def('0x30')](_0x786cfa,_0x228f58){const _0xc99711=this[_0x1def('0x19')]['plugins']['get'](_0x1def('0x1e')),_0x1a3f96=this[_0x1def('0x19')][_0x1def('0x1d')][_0x1def('0x2f')](_0x786cfa),_0x55f31c=this[_0x1def('0x19')][_0x1def('0x1d')][_0x1def('0x2f')](_0x228f58),_0x1c0e25=new Set(),_0x7f331b=new Set();for(const _0x3ba037 of _0xc99711[_0x1def('0x10')]())if((_0x1def('0x3f')==_0x3ba037[_0x1def('0x14')]||_0x1def('0x17')==_0x3ba037['type']||_0x1def('0x3d')==_0x3ba037[_0x1def('0x43')])&&_0x3ba037[_0x1def('0x46')])for(const _0x1ddebc of _0x3ba037[_0x1def('0x36')]())_0x1ddebc[_0x1def('0x3b')](_0x1a3f96,!0x0)&&_0x1c0e25[_0x1def('0x39')](_0x3ba037[_0x1def('0x14')]+':'+_0x3ba037[_0x1def('0x28')]['id']),_0x1ddebc[_0x1def('0x3b')](_0x55f31c,!0x0)&&_0x7f331b[_0x1def('0x39')](_0x3ba037[_0x1def('0x14')]+':'+_0x3ba037[_0x1def('0x28')]['id']);if(_0x1c0e25[_0x1def('0x15')]!=_0x7f331b[_0x1def('0x15')])return!0x1;for(const _0x104a6 of _0x1c0e25)if(!_0x7f331b[_0x1def('0x3')](_0x104a6))return!0x1;return!0x0;}}