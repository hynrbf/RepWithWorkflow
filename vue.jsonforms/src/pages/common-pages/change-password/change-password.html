<div v-if="isLoading" class="container-fluid h-100 k-animation-container"
     style="background-color: rgb(128,128,128); opacity:0.5;">
    <div class="row h-100 justify-content-center align-items-center">
        <div class="col-md-6 text-center">
            <Loader :size="'large'" type="infinite-spinner" :theme-color="'info'"/>
        </div>
    </div>
</div>

<KendoFlexibleDialog ref="kendoCalendarFlexibleDialog" :style="{height: 'auto', borderRadius: '8px'}">
    <StackLayout orientation="vertical" style="width: 357px;"
                 class="py-2 px-4 d-flex flex-column gap-4 align-items-center flexible-window">
        <!--TODO. to get back why not working -->
        <!--        <IconComponent symbol="check-filled" size="35"/>-->
        <img src="/check-filled.svg" alt="check-filled"/>

        <Label class="paragraph-m-figtree-medium" style="color: var(--color-black)">{{
                $t
                ('changePasswordPage-passwordSavedText')
            }}</Label>
    </StackLayout>
</KendoFlexibleDialog>

<StackLayout orientation="vertical" style="height: 100vh; background-color: var(--body-bg-color);"
             :align="{vertical: 'top'}">
    <TopBar/>

    <div class="d-flex flex-grow-1"
         style="justify-content: center; align-items: center;">
        <div class="d-flex inner-frame">
            <!-- Left side -->
            <div class="col-sm-6 d-flex flex-column" style="padding: 0;">
                <div style="color: white" class="flex-grow-1">
                    <img src="/side-banner-b.png" alt="signup"
                         style="width: 100%; height: 100%; object-fit: cover; display: block;"/>
                </div>

                <div class="catchy-text d-flex flex-column justify-content-center text-div">
                    <p>
                        {{ $t('signUpPage-navBottomText') }} <br/> {{ $t('signUpPage-navBottomText1') }}
                        <br/>{{ $t('signUpPage-navBottomText2') }}
                    </p>
                </div>
            </div>

            <!-- Right Side -->
            <div class="col-sm-6" style="position: relative">
                <StackLayout class="centered-container center-padding" orientation="vertical"
                             :align="{horizontal: 'stretch'}">
                    <Label class="mb-4 h4-figtree-bold">{{ $t('changePasswordPage-header') }}</Label>

                    <Form @submit="changePasswordAsync">
                        <KendoFormElementComponent v-slot="{ form }">
                            <StackLayout orientation="horizontal" :align="{horizontal: 'stretch'}">
                                <KendoPasswordInputComponent class="my-4" id="newPassword" name="newPassword"
                                                             label="New Password" :value="newPassword"
                                                             customValidationMessageError="Password strength: Weak"
                                                             customValidationMessageSuccess="Password strength: Strong"
                                                             @onValueChange="((value) => newPassword = value)"/>
                            </StackLayout>

                            <StackLayout orientation="horizontal" :align="{horizontal: 'stretch'}">
                                <KendoPasswordInputComponent id="confirmPassword" name="confirmPassword"
                                                             label="Confirm Password"
                                                             customValidationMessageError="Passwords don't match"
                                                             customValidationMessageSuccess="Passwords match"
                                                             :passwordToCompare="newPassword"
                                                             :value="confirmPassword" :isForConfirmPassword="true"
                                                             @onValueChange="((value) => confirmPassword = value)"/>
                            </StackLayout>

                            <StackLayout :align="{horizontal: 'center'}">
                                <Button class="my-4 save-btn" :class="isEnableButton ? 'btn-enabled' : 'btn-disabled'"
                                        :disabled="!isEnableButton" style="width: 200px;" type="submit">{{
                                        $t
                                        ('changePasswordPage-savePasswordText')
                                    }}
                                </Button>
                            </StackLayout>

                            <StackLayout class="my-1" :align="{horizontal: 'start', vertical:'middle'}" :gap="8">
                                <span class="k-icon k-i-check-circle"
                                      :class="isPasswordAtLeast8Chars ? 'check-icon-good' : 'check-icon'"/>

                                <Label class="paragraph-m-figtree-medium">{{
                                        $t('changePasswordPage-charactersText')
                                    }}</Label>
                            </StackLayout>

                            <StackLayout class="my-1" :align="{horizontal: 'start', vertical:'middle'}" :gap="8">
                                <span class="k-icon k-i-check-circle"
                                      :class="isPasswordHaveAtLeastOneLetter ? 'check-icon-good' : 'check-icon'"/>

                                <Label class="paragraph-m-figtree-medium">{{
                                        $t('changePasswordPage-lettersText')
                                    }}</Label>
                            </StackLayout>

                            <StackLayout class="my-1" :align="{horizontal: 'start', vertical:'middle'}" :gap="8">
                                <span class="k-icon k-i-check-circle"
                                      :class="isPasswordHaveAtLeastOneNumberOrSpecialCase ? 'check-icon-good' : 'check-icon'"/>

                                <Label class="paragraph-m-figtree-medium">{{
                                        $t('changePasswordPage-numberText')
                                    }}</Label>
                            </StackLayout>
                        </KendoFormElementComponent>
                    </Form>
                </StackLayout>
            </div>
        </div>
    </div>
</StackLayout>