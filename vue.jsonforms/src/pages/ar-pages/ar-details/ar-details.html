<KendoDialog ref="kendoDialog"/>

<KendoLoadingComponent :isLoading="isLoading" :isShowSavingText="isShowSavingText"/>

<KendoActionDialog ref="kendoActionDialog"
                   rightActionButtonLabel="Proceed Anyway"
                   @onRightButtonClicked="proceedAnyway"/>

<KendoActionDialog ref="kendoActionDialogForLocum"
                   rightActionButtonLabel="Proceed Anyway"
                   @onRightButtonClicked="proceedLocumAnyway"/>

<KendoPromptDialog ref="kendoActionDialogCompanyNumber"
                   primaryActionButtonLabel="Schedule a meeting"
                   primaryActionButtonIcon="/calendar.svg"
                   @onPrimaryActionClick="scheduleAMeetingAsync">
    <div class="paragraph-m-figtree-regular">
        <!-- This is the old implementation -->
        <!--        <p>Are you sure you wish to update your company number? </p> @onPrimaryActionClick="proceedWithUpdateCompanyNumber"-->
        <!--        <p>Current company number with the FCA is {{ firmDetails?.companyNumber }}</p>-->
        <p>If you wish to change this, please schedule a meeting below.</p>
    </div>
</KendoPromptDialog>

<KendoPromptDialog ref="kendoActionDialogFirmName">
    <div class="paragraph-m-figtree-regular">
        <p>
            {{ $t("arDetailsPage-confirmFirmName", {firmName: locumInputFirm?.firmName}) }}
        </p>
    </div>
</KendoPromptDialog>

<KendoFlexibleDialog ref="kendoCalendarFlexibleDialog" :style="{height: 'auto', width: 'auto', padding: '20px'}">
    <p>Selected: <strong>{{ selectedEventType?.name }}</strong></p>

    <DropDownList
            size="large"
            :data-items="activeEventTypes"
            :text-field="'name'"
            :data-item-key="'name'"
            @change="onSelectEventType"
            v-model="selectedEventType"
    />

    <Button type="button" class="mt-3 violet-btn"
            :disabled="!selectedEventType" :theme-color="'primary'"
            @click="onNavigateToScheduling">{{ $t("signUpPage-scheduleMeetingButtonText") }}
    </Button>
</KendoFlexibleDialog>

<!-- used in old implementation -->
<!--<KendoAlertDialog ref="kendoAlertDialog" :hasIcon="false"/>-->

<KendoConfirmDialog ref="kendoConfirmDialog" @onConfirm="onRemoveItemConfirmed"/>

<KendoPromptDialog ref="kendoActionDialogError">
    <div class="paragraph-m-figtree-regular">
        <p>
            {{
                $t("arDetailsPage-locumAndCurrentFirmShouldNotBeSame", {
                    locumFirmName: locumInputFirm?.firmName,
                    firmName
                })
            }}
        </p>
    </div>
</KendoPromptDialog>

<KendoPromptDialog ref="kendoActionDialogDifferentPermissions"
                   primaryActionButtonLabel="Confirm"
                   @onPrimaryActionClick="confirmPermission">
    <div class="paragraph-m-figtree-regular">
        <p>
            {{
                $t("arDetailsPage-locumPermissionNotSameWithCurrent", {
                    locumFirmName: locumInputFirm?.firmName,
                    firmName
                })
            }}
        </p>
        <p>
            {{ $t("arDetailsPage-locumPermissionNotSameWithCurrent2", {locumFirmName: locumInputFirm?.firmName}) }}
        </p>
    </div>
</KendoPromptDialog>

<KendoPromptDialog ref="kendoActionDialogNotAuthorised"
                   primaryActionButtonLabel="Confirm"
                   @onPrimaryActionClick="confirmNotAuthorised">
    <div class="paragraph-m-figtree-regular">
        <p>{{
                $t("arDetailsPage-locumNotAuthorised", {
                    locumFirmName: locumInputFirm?.firmName,
                    mortgageDistributionActivities: "mortgageDistributionActivities",
                    insuranceDistributionActivities: "insuranceDistributionActivities"
                })
            }}</p>
        <p>{{ $t("arDetailsPage-locumNotAuthorised2", {locumFirmName: locumInputFirm?.firmName}) }}</p>
    </div>
</KendoPromptDialog>

<Breadcrumb/>

<KendoPageTitleComponent
        title="Appointed Representatives (AR) Details"
        :description="$t('arDetailsPage-description', { firmName })"
        :routeName="helperService.removeStringSpacesThenSlash(AppConstants.arFirmDetailsRoute)"
        progress-bar
/>

<!-- Anchors -->
<StackLayout
        class="page-tab-anchors is-sticky-top FirmDetailNav"
        orientation="vertical"
        :align="{ horizontal: 'start', vertical: 'middle' }"
        :gap="8"
>
    <StackLayout
            class="align-self-stretch"
            orientation="horizontal"
            :gap="11"
    >
        <div class="section-item" :class="getSectionIndicatorStyle('about-ar-section')"
             @click="() => scrollToPageSection('about-ar-section')">
            <IconComponent symbol="text-file-17" size="24"/>

            <Label>{{ $t("arDetailsPage-aboutFirm") }}</Label>
        </div>

        <div class="section-item" :class="getSectionIndicatorStyle('ar-representative-section')"
             @click="() => scrollToPageSection('ar-representative-section')">
            <IconComponent symbol="user-identifier-card-54" size="24"/>

            <Label>{{ $t("arDetailsPage-firmRepresentative") }}</Label>
        </div>

        <div class="section-item" :class="getSectionIndicatorStyle('ar-locum-section')"
             @click="() => scrollToPageSection('ar-locum-section')">
            <IconComponent symbol="user-circle-single-49" size="24"/>

            <Label>{{ $t("arDetailsPage-locum") }}</Label>
        </div>

        <div class="section-item" :class="getSectionIndicatorStyle('bank-account-details-section')"
             @click="() => scrollToPageSection('bank-account-details-section')">
            <IconComponent symbol="money" size="24"/>

            <Label>{{ $t("arDetailsPage-bankAccount") }}</Label>
        </div>

        <div class="section-item" :class="getSectionIndicatorStyle('account-department-details-section')"
             @click="() => scrollToPageSection('account-department-details-section')">
            <IconComponent symbol="user-single-neutral-22" size="24"/>

            <Label>{{ $t("arDetailsPage-accountDepartment") }}</Label>
        </div>

        <div class="section-item" :class="getSectionIndicatorStyle('additional-information-section')"
             @click="() => scrollToPageSection('additional-information-section')">
            <IconComponent symbol="hand-held-tablet-writing-77" size="24"/>

            <Label>{{ $t("arDetailsPage-additionalInformation") }}</Label>
        </div>
    </StackLayout>
</StackLayout>

<KendoLoadingComponent :isLoading="isInitializing"/>

<Form>
    <FormElement ref="formElement" novalidate >
        <StackLayout
                orientation="vertical"
                :gap="20"
                style="margin-top: 20px">
            <!-- About the AR Section -->
            <!--replace with this in debugging anchoring `About the Firm (${sectionElementCurrentPosition.x}, ${sectionElementCurrentPosition.y})` -->
            <KendoAccordionItemComponent
                    :title="'Details'"
                    id="about-ar-section"
                    :isActive="activePageSectionId === 'about-ar-section'"
                    @onToggle="onToggleAccordionAsync">
                <StackLayout
                        orientation="vertical"
                        :gap="20">
                    <KendoFirmFinderComponentAsync
                            :id="setUniqueIdentifier('-firmName')"
                            companyNameLabel="Firm Name"
                            :company="inputFirm"
                            :companyName="firmDetails?.firmName"
                            :companyNumber="firmDetails?.companyNumber"
                            :firmReferenceNumber="firmDetails?.firmReferenceNumber"
                            :isInitializing="isInitializing"
                            :isEnableSearch="false"
                            @onCompanyDetailUpdated="onCompanyDetailUpdated"
                            :useDefaultSchedMeetingModal="false"
                            :onboardingType="OnboardingType.Ar.toString()"/>

                    <KendoTradingNameComponent
                            :id="setUniqueIdentifier('-firmdetails.tradingNames')"
                            name="firmdetails.tradingNames"
                            :value="firmDetails.tradingNames"
                            :isUserModified="firmDetails.isTradingNamesChanged"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"
                            @onRemoveItem="onRemoveItem"
                            @onValueChange="onTrandingNamesChanged"
                            :isShowAllOnPopup="true"/>

                    <KendoPostCodeInputComponent
                            v-if="!this.isSoleTrader"
                            :name="'firmdetails.registeredAddress'"
                            :id="setUniqueIdentifier('-firmdetails.registeredAddress')"
                            label="Registered Address"
                            :isUserModified="firmDetails.isRegisteredAddressChanged"
                            @onValueChange="onFirmRegisteredAddressChanged"
                            :value="firmDetails.registeredAddress"
                            :isDataLoadedCompletely="!isInitializing"
                            :isValueReactive="true"/>

                    <KendoPostCodeInputWithSameAsComponent
                            :name="'firmdetails.tradingAddress'"
                            :id="setUniqueIdentifier('-firmdetails.tradingAddress')"
                            label="Trading Address"
                            :isUserModified="firmDetails.isTradingAddressChanged"
                            :value="firmDetails.tradingAddress"
                            :isShowCheckBox="!this.isSoleTrader"
                            :isChecked="firmDetails.isTradingSameAsRegisteredAddress"
                            @onValueChange="onFirmTradingAddressChanged"
                            @onToggle="onToggleTradingAddress(firmDetailsKey)"
                            @onLostFocus="onTradingAddressDoneTyping"
                            :sameAsLabel="$t('same-as-registered-address')"
                            :isDataLoadedCompletely="!isInitializing"
                            :isValueReactive="true"/>

                    <KendoPostCodeInputWithSameAsComponent
                            :name="'firmdetails.headOfficeAddress'"
                            :id="setUniqueIdentifier('-firmdetails.headOfficeAddress')"
                            label="Head Office Address"
                            :isRequired="false"
                            :isUserModified="firmDetails.isHeadOfficeAddressChanged"
                            @onToggle="onToggleHeadOfficeAddress()"
                            :isChecked="firmDetails.isHeadOfficeSameAsTradingAddress"
                            @onValueChange="((value) => firmDetails.headOfficeAddress = value)"
                            :value="firmDetails.headOfficeAddress"
                            :sameAsLabel="$t('same-as-trading-address')"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"/>

                    <StackLayout orientation="horizontal" :gap="15" :align="{horizontal: 'stretch'}">
                        <KendoEmailAddressInputComponent
                                :name="'firmdetails.emailAddress'"
                                :id="setUniqueIdentifier('-firmdetails.emailAddress')"
                                class="col"
                                @onValueChange="((value) => firmDetails.emailAddress = value)"
                                :value="firmDetails.emailAddress"
                                :isEditable="false"
                                @onAttemptEdit="attemptEditEmailAddress"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoTelInputComponent
                                :id="setUniqueIdentifier('-firmdetails.contactNumber')"
                                name="firmdetails.contactNumber"
                                label="Contact Number"
                                :value="firmDetails?.contactNumber"
                                class="col"
                                @onValueChange="((value) => firmDetails.contactNumber = value)"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoGenericInputComponent
                                :name="'firmdetails.website'"
                                :id="setUniqueIdentifier('-firmdetails.website')"
                                class="col" label="Website"
                                :isCheckForProfanity="false"
                                @onValueChange="((value) => firmDetails.website = value)"
                                :isRequired="false"
                                type="url"
                                :value="firmDetails.website"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>
                    </StackLayout>
                </StackLayout>
            </KendoAccordionItemComponent>

            <!-- AR Representative Details Section -->
            <KendoAccordionItemComponent
                    :title="`${firmName} Representative Details`"
                    id="ar-representative-section"
                    :isActive="activePageSectionId === 'ar-representative-section'"
                    @onToggle="onToggleAccordionAsync">
                <StackLayout
                        orientation="vertical"
                        :gap="0"
                >
                    <p class="sub-texts">
                        {{ $t("arDetailsPage-firmRepresentativeSubText", {firmName: firmName}) }}</p>

                    <StackLayout orientation="horizontal" :gap="15" :align="{horizontal: 'start'}">
                        <KendoNameTitleComponent
                                :name="'firmRepresentative.title'"
                                :id="setUniqueIdentifier('-firmRepresentative.title')"
                                label="Title"
                                class="col"
                                :value="representative.title"
                                @onValueChange="((value) => representative.title = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                                :isRequired="false"
                        />

                        <KendoGenericInputComponent
                                :name="'firmRepresentative.forename'"
                                :id="setUniqueIdentifier('-firmRepresentative.forename')"
                                class="col"
                                :value="representative.forename"
                                @onValueChange="((value) => representative.forename = value)"
                                label="Forename(s)"
                                :isCapitalizeFirstLetter="true"
                                :isCheckForProfanity="true"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                        />

                        <KendoGenericInputComponent
                                :name="'firmRepresentative.surname'"
                                :id="setUniqueIdentifier('-firmRepresentative.surname')"
                                class="col"
                                :value="representative.surname"
                                @onValueChange="((value) => representative.surname = value)"
                                label="Surname"
                                :isCapitalizeFirstLetter="true"
                                :isCheckForProfanity="true"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                        />
                    </StackLayout>

                    <StackLayout orientation="horizontal" :gap="15" :align="{horizontal: 'stretch'}"
                                 style="margin-top: 20px;">
                        <KendoEmailAddressInputComponent
                                :name="'firmRepresentative.emailAddress'"
                                :id="setUniqueIdentifier('-firmRepresentative.emailAddress')"
                                class="col"
                                :placeholder="'Type'"
                                :value="representative.emailAddress"
                                @onValueChange="((value) => representative.emailAddress = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoTelInputComponent
                                :id="setUniqueIdentifier('-firmRepresentative.contactNumber')"
                                name="firmRepresentative.contactNumber"
                                label="Contact Number"
                                class="col"
                                :value="representative.contactNumber"
                                @onValueChange="((value) => representative.contactNumber = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoGenericInputComponent
                                :name="'firmRepresentative.jobTitle'"
                                :id="setUniqueIdentifier('-firmRepresentative.jobTitle')"
                                :isRequired="false" 
                                class="col"
                                :value="representative.jobTitle"
                                @onValueChange="((value) => representative.jobTitle = value)"
                                label="Job Title"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>
                    </StackLayout>
                </StackLayout>
            </KendoAccordionItemComponent>

            <!-- AR Locum Details Section -->
            <KendoAccordionItemComponent
                    :title="'Locum Details'"
                    id="ar-locum-section"
                    :isActive="activePageSectionId === 'ar-locum-section'"
                    @onToggle="onToggleAccordionAsync">
                <StackLayout
                        orientation="vertical"
                        :gap="20">
                    <p class="sub-texts">{{ $t("arDetailsPage-locumSubText", {firmName: firmName}) }}</p>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="1"
                            :id="setUniqueIdentifier('-isFirmDependentOnSingleKeyIndividual')"
                            :questionText="'Is ' + firmName + ' dependent on a single key individual?'"
                            @onValueChange="toggleLocumYesOrNo"
                            :value="isFirmDependentOnSingleKeyIndividual"
                            :isDataLoadedCompletely="!isInitializing"
                            :isValueReactive="true"
                            :isRequired="true"/>

                    <KendoYesOrNoQuestionInputComponent
                            v-if="isFirmDependentOnSingleKeyIndividual"
                            :id="setUniqueIdentifier('-hasAppointedLocum')"
                            numberText="2"
                            :questionText="'Has ' + firmName + ' appointed a locum?'"
                            @onValueChange="toggleHasAppointedLocumYesOrNo"
                            :value="hasAppointedLocum"
                            :isDataLoadedCompletely="!isInitializing"
                            :isValueReactive="true"
                            :isRequired="true"/>

                    <KendoCompanyOrSoleTraderQuestionInputComponent
                            v-if="hasAppointedLocum"
                            :id="setUniqueIdentifier('-isLocumCompanyOrSoletrader')"
                            numberText="3"
                            questionText="Is the Locum a Company or a Sole Trader?"
                            @onValueChange="toggleIsLocumCompanyOrSoleTrader"
                            :value="isLocumCompany"
                            :isDataLoadedCompletely="!isInitializing"
                            :isValueReactive="true"
                            :isRequired="true"/>

                    <!-- Has Single Key Individual and has no Appointed Locum Section -->
                    <StackLayout v-if="isFirmDependentOnSingleKeyIndividual && hasAppointedLocum === false"
                                 orientation="vertical"
                                 :gap="10">
                        <p class="sub-texts" style="margin-top: 14px">
                            Please advise how {{ firmName ?? "&lt;Firm Name&gt;" }}’s customers would be supported in
                            the event of the
                            single key individual being unavailable e.g. due to sickness or death.
                        </p>

                        <KendoTextAreaInputComponent
                                :cornerRadius="8"
                                :id="setUniqueIdentifier('-firmDetails.noAppointedLocum')"
                                name="firmDetails.noAppointedLocum"
                                placeholder="Please add additional information"
                                @onValueChange="((value: string) => hasNoAppointedLocumInfo = value)"
                                :value="hasNoAppointedLocumInfo"
                                labelForErrorMessage="Additional Information"
                                :isDataLoadedCompletely="!isInitializing"
                                :isValueReactive="true"
                                :isRequired="true"/>
                    </StackLayout>

                    <!-- Has Single Key Individual and Appointed Locum and isLocumCompany Section -->
                    <StackLayout v-if="isFirmDependentOnSingleKeyIndividual && hasAppointedLocum && isLocumCompany"
                                 orientation="vertical"
                                 :gap="20"
                    >
                        <KendoFirmFinderComponent
                                :id="setUniqueIdentifier('-locumfirmName')"
                                companyNameLabel="Locum Firm Name"
                                :company="locumInputFirm"
                                :companyName="locumCompanyDetail.firmName"
                                :companyNumber="locumCompanyDetail.companyNumber"
                                :firmReferenceNumber="locumCompanyDetail.firmReferenceNumber"
                                :isInitializing="isInitializing"
                                :excludedFirm="firmDetails"
                                @onCompanyNotAuthorised="showNotAuthorisedFirmMessage"
                                @onPermissionNotSame="onPermissionNotSameAsCustomerFirm"
                                @onCompanyDetailUpdated="onLocumDetailUpdated"
                                :onboardingType="OnboardingType.Ar.toString()"/>

                        <!-- Todo. Not implemented yet to the FirmDetails.vue, for UI only -->
                        <KendoPostCodeInputComponent
                                v-if="isShowLocumTradingAddress"
                                :name="'locumDetail.locumCompanyDetail.registeredAddress'"
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.registeredAddress')"
                                label="Registered Address"
                                :isUserModified="locumCompanyDetail.isRegisteredAddressChanged"
                                @onValueChange="onLocumRegisteredAddressChanged"
                                :value="locumCompanyDetail.registeredAddress"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                        />

                        <KendoPostCodeInputWithSameAsComponent
                                v-if="isShowLocumTradingAddress"
                                :name="'locumDetail.locumCompanyDetail.tradingAddress'"
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.tradingAddress')"
                                label="Trading Address"
                                :isRequired="true"
                                :isUserModified="locumCompanyDetail.isTradingAddressChanged"
                                :value="locumCompanyDetail.tradingAddress"
                                :isShowCheckBox="this.isShowLocumTradingAddress"
                                :isChecked="locumCompanyDetail.isTradingSameAsRegisteredAddress"
                                @onValueChange="onLocumTradingAddressChanged"
                                @onLostFocus="onLocumTradingAddressDoneTyping"
                                @onToggle="onToggleTradingAddress(locumDetailKey)"
                                :sameAsLabel="$t('same-as-registered-address')"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <StackLayout
                                orientation="horizontal"
                                :gap="15"
                                :align="{horizontal: 'start'}">
                            <KendoEmailAddressInputComponent
                                    :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.emailAddress')"
                                    :name="'locumDetail.locumCompanyDetail.emailAddress'" class="col"
                                    @onValueChange="((value) => locumCompanyDetail.emailAddress = value)"
                                    :value="locumCompanyDetail.emailAddress"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>

                            <KendoTelInputComponent
                                    :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.contactNumber')"
                                    name="locumDetail.locumCompanyDetail.contactNumber"
                                    label="Contact Number"
                                    class="col"
                                    :value="locumCompanyDetail.contactNumber"
                                    @onValueChange="((value) => locumCompanyDetail.contactNumber = value)"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>

                            <KendoGenericInputComponent
                                    :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.website')"
                                    :name="'locumDetail.website'"
                                    class="col" label="Website"
                                    :isCheckForProfanity="false"
                                    :isRequired="false"
                                    @onValueChange="((value) => locumCompanyDetail.website = value)"
                                    :value="locumCompanyDetail.website"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>
                        </StackLayout>
                    </StackLayout>
                </StackLayout>

                <!-- Locum Representative Details Section -->
                <StackLayout v-if="isFirmDependentOnSingleKeyIndividual && hasAppointedLocum && isLocumCompany"
                             orientation="vertical"
                             :gap="20"
                             style="margin-top: 14px;">
                    <Label class="section-title k-color-black">{{
                            $t("arDetailsPage-locumRepresentative")
                        }}</Label>

                    <StackLayout
                            orientation="horizontal"
                            :gap="15"
                            :align="{horizontal: 'start'}"
                            style="margin-top: 4px;"
                    >
                        <KendoNameTitleComponent
                                :id="'locumDetail.locumCompanyDetail.representativeTitle'"
                                :name="setUniqueIdentifier('-locumDetail.locumCompanyDetail.representativeTitle')"
                                :is-required="false"
                                label="Title"
                                class="col"
                                :value="locumCompanyDetail.representativeTitle"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                                @onValueChange="((value) => locumCompanyDetail.representativeTitle = value)"
                        />

                        <KendoGenericInputComponent
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.representativeForename')"
                                :name="'locumDetail.locumCompanyDetail.representativeForename'"
                                class="col"
                                :isCapitalizeFirstLetter="true"
                                label="Forename(s)"
                                @onValueChange="((value) => locumCompanyDetail.representativeForename = value)"
                                :value="locumCompanyDetail.representativeForename"
                                :isCheckForProfanity="true"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                        />

                        <KendoGenericInputComponent
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.representativeSurname')"
                                :name="'locumDetail.locumCompanyDetail.representativeSurname'"
                                class="col"
                                :isCapitalizeFirstLetter="true"
                                label="Surname"
                                @onValueChange="((value) => locumCompanyDetail.representativeSurname = value)"
                                :value="locumCompanyDetail.representativeSurname"
                                :isCheckForProfanity="true"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"
                        />
                    </StackLayout>

                    <StackLayout
                            orientation="horizontal"
                            :gap="15"
                            :align="{horizontal: 'stretch'}">
                        <KendoEmailAddressInputComponent
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.representativeEmailAddress')"
                                :name="'locumDetail.locumCompanyDetail.representativeEmailAddress'"
                                class="col"
                                @onValueChange="((value) => locumCompanyDetail.representativeEmailAddress = value)"
                                :value="locumCompanyDetail.representativeEmailAddress"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoTelInputComponent
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.representativeMobileNumber')"
                                :name="'locumDetail.locumCompanyDetail.representativeMobileNumber'"
                                class="col"
                                @onValueChange="((value) => locumCompanyDetail.representativeMobileNumber = value)"
                                :value="locumCompanyDetail.representativeMobileNumber"
                                label="Contact Number"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoRoleComponent
                                :id="setUniqueIdentifier('-locumDetail.locumCompanyDetail.representativeRole')"
                                :name="'locumDetail.locumCompanyDetail.representativeRole'"
                                class="col"
                                label="Role"
                                :isCheckForProfanity="false"
                                @onValueChange="((value) => locumCompanyDetail.representativeRole = value)"
                                :value="locumCompanyDetail.representativeRole"
                                placeholder="Please select"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>
                    </StackLayout>
                </StackLayout>

                <!-- Locum Sole Trader Details Section -->
                <StackLayout v-if="isLocumCompany === false"
                             orientation="vertical"
                             :gap="20"
                             style="margin-top: 14px;">
                    <StackLayout orientation="horizontal" :gap="15" :align="{horizontal: 'start'}">
                        <KendoGenericInputComponent
                                :id="setUniqueIdentifier( '-locumSoleTraderDetail.foreName')"
                                :name="'locumSoleTraderDetail.foreName'"
                                class="col" label="Forename(s)"
                                :isRequired="true"
                                :isValueReactive="true"
                                :value="locumSoleTraderDetail?.foreName"
                                @onValueChange="((value) => locumSoleTraderDetail.foreName = value)"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoGenericInputComponent
                                :id="setUniqueIdentifier( '-locumSoleTraderDetail.surName')"
                                :name="'locumSoleTraderDetail.surName'"
                                class="col" label="Surname"
                                :isRequired="true"
                                :value="locumSoleTraderDetail?.surName"
                                @onValueChange="((value) => locumSoleTraderDetail.surName = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoGenericInputComponent
                                :id="setUniqueIdentifier( '-locumSoleTraderDetail.firmReferenceNumber')"
                                :name="'locumSoleTraderDetail.firmReferenceNumber'"
                                class="col" label="Firm Reference Number"
                                :isCheckForProfanity="false"
                                :isRequired="true"
                                :isByPassGenericPlaceHolder="true"
                                placeholder="123456"
                                :value="locumSoleTraderDetail?.firmReferenceNumber"
                                @onValueChange="((value) => locumSoleTraderDetail.firmReferenceNumber = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>
                    </StackLayout>

                    <KendoPostCodeInputComponent
                            v-if="isShowLocumTradingAddress"
                            :name="'locumSoleTraderDetail.isTradingAddressChanged'"
                            :id="setUniqueIdentifier( '-locumSoleTraderDetail.isTradingAddressChanged')"
                            label="Trading Address"
                            :isUserModified="locumSoleTraderDetail?.isTradingAddressChanged ?? false"
                            @onValueChange="onLocumSoleTradingAddressChanged"
                            @onLostFocus="onLocumSoleTraderTradingAddressDoneTyping"
                            :value="locumSoleTraderDetail?.tradingAddress"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"/>

                    <StackLayout orientation="horizontal" :gap="15" :align="{horizontal: 'start'}">
                        <KendoEmailAddressInputComponent
                                :id="setUniqueIdentifier( '-locumSoleTraderDetail.emailAddress')"
                                :name="'locumSoleTraderDetail.emailAddress'" class="col"
                                :value="locumSoleTraderDetail?.emailAddress"
                                @onValueChange="((value) => locumSoleTraderDetail.emailAddress = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoTelInputComponent
                                :id="setUniqueIdentifier( '-locumSoleTraderDetail.contactNumber')"
                                name="locumSoleTraderDetail.contactNumber"
                                label="Contact Number"
                                class="col"
                                :value="locumSoleTraderDetail?.contactNumber"
                                @onValueChange="((value) => locumSoleTraderDetail.contactNumber = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoGenericInputComponent
                                :id="setUniqueIdentifier( '-locumSoleTraderDetail.website')"
                                :name="'locumSoleTraderDetail.website'"
                                class="col" label="Website"
                                :isCheckForProfanity="false"
                                :isRequired="false"
                                :value="locumSoleTraderDetail?.website"
                                @onValueChange="((value) => locumSoleTraderDetail.website = value)"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>
                    </StackLayout>
                </StackLayout>
            </KendoAccordionItemComponent>

            <!-- AR Bank Account Details Section -->
            <KendoAccordionItemComponent
                    :title="'Bank Account Details'"
                    id="bank-account-details-section"
                    :isActive="activePageSectionId === 'bank-account-details-section'"
                    @onToggle="onToggleAccordionAsync">
                <StackLayout class="my-3" orientation="horizontal" :gap="4" :align="{horizontal: 'start'}">
                    <KendoGenericInputComponent
                            :id="setUniqueIdentifier('-bankAccountDetails.bankName')"
                            :name="'bankAccountDetails.bankName'"
                            class="col"
                            :isCapitalizeFirstLetter="true"
                            label="Bank Name"
                            @onValueChange="((value) => bankAccountDetails.bankName = value)"
                            :value="bankAccountDetails?.bankName"
                            :isCheckForProfanity="true"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"/>

                    <KendoGenericInputComponent
                            :id="setUniqueIdentifier('-bankAccountDetails.accountName')"
                            :name="'bankAccountDetails.accountName'"
                            class="col"
                            :isCapitalizeFirstLetter="true"
                            label="Account Name"
                            @onValueChange="((value) => bankAccountDetails.accountName = value)"
                            :value="bankAccountDetails?.accountName"
                            :isCheckForProfanity="true"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"/>
                </StackLayout>

                <StackLayout class="my-3" orientation="horizontal" :gap="4" :align="{horizontal: 'start'}">
                    <KendoNumericTextInputComponent
                            :id="setUniqueIdentifier('-bankAccountDetails.sortCode')"
                            :name="'bankAccountDetails.sortCode'"
                            class="col"
                            label="Sort Code"
                            :placeholder="'00-00-00'"
                            @onValueChange="((value) => bankAccountDetails.sortCode = value)"
                            :value="bankAccountDetails?.sortCode"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"
                            :acceptDash="true"
                            :mask="'00-00-00'"
                    />

                    <KendoNumericTextInputComponent
                            :id="setUniqueIdentifier('-bankAccountDetails.accountNumber')"
                            :name="'bankAccountDetails.accountNumber'"
                            class="col"
                            label="Account Number"
                            :placeholder="'12345678'"
                            @onValueChange="((value) => bankAccountDetails.accountNumber = value)"
                            :value="bankAccountDetails?.accountNumber"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"
                    />
                </StackLayout>
            </KendoAccordionItemComponent>

            <!-- AR Accounts Department Details Section -->
            <KendoAccordionItemComponent
                    :title="'Accounts Department Details'"
                    id="account-department-details-section"
                    :isActive="activePageSectionId === 'account-department-details-section'"
                    @onToggle="onToggleAccordionAsync">
                <StackLayout
                        orientation="vertical"
                        :gap="2">
                    <p class="sub-texts">
                        {{ $t("arDetailsPage-accountDepartmentSubText", {firmName}) }}
                    </p>

                    <StackLayout
                            orientation="horizontal"
                            :gap="0"
                            :align="{horizontal: 'start'}">
                        <!-- :valid="true" => this is needed to bypass validation on switch. We don't validate this -->
                        <div class="Switch" @click="onToggleIsSameARRepresentativeDetails">
                            <Switch
                                    name="switch"
                                    size="small"
                                    off-label=""
                                    on-label=""
                                    :valid="true"
                                    :checked="isAccountsDepartmentSameAsARRepresentative"/>
                        </div>

                        <!-- @click="isAccountsDepartmentSameAsARRepresentative ? scrollToPageSection('ar-representative-section') : null" -->
                        <div style="margin-top: 2px; margin-left: 4px; height: 20px; font-weight: 500;">
                            <span :style="{ color: isAccountsDepartmentSameAsARRepresentative ? 'var(--text-text-secondary)' : 'var(--color-black)' }">
                              {{ $t("same-as") + " " }}
                            </span>
                            <span @click="isAccountsDepartmentSameAsARRepresentative ? scrollToPageSection('ar-representative-section') : null"
                                  :style="{ color: isAccountsDepartmentSameAsARRepresentative ? 'var(--color-primary)' : 'var(--color-black)', cursor: isAccountsDepartmentSameAsARRepresentative ? 'pointer' : 'text' }"
                                  :class="isAccountsDepartmentSameAsARRepresentative ? 'link-text' : ''">
                              {{ $t("arDetailsPage-firmRepresentativeText", {firmName}) }}
                            </span>
                        </div>
                    </StackLayout>

                    <!-- Spacer -->
                    <div v-if="isAccountsDepartmentSameAsARRepresentative" style="margin-top: 12px;"/>

                    <!-- Not the same as AR Representative Details -->
                    <StackLayout v-if="!isAccountsDepartmentSameAsARRepresentative"
                                 orientation="vertical"
                                 :gap="20"
                                 style="margin-top: 22px;">
                        <StackLayout
                                orientation="horizontal"
                                :gap="15"
                                :align="{horizontal: 'start'}">
                            <KendoNameTitleComponent
                                    :name="'accountDepartmentDetail.title'"
                                    :id="setUniqueIdentifier('-accountDepartmentDetail.title')"
                                    label="Title"
                                    class="col"
                                    :value="accountDepartmentDetail.title"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"
                                    @onValueChange="((value) => accountDepartmentDetail.title = value)"/>

                            <KendoGenericInputComponent
                                    :id="setUniqueIdentifier( '-accountDepartmentDetail.forename')"
                                    :name="'accountDepartmentDetail.forename'" class="col"
                                    :isCapitalizeFirstLetter="true"
                                    label="Forename(s)"
                                    :isCheckForProfanity="true"
                                    @onValueChange="((value) => accountDepartmentDetail.forename = value)"
                                    :value="accountDepartmentDetail.forename"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>

                            <KendoGenericInputComponent
                                    :id="setUniqueIdentifier( '-accountDepartmentDetail.surname')"
                                    :name="'accountDepartmentDetail.surname'"
                                    class="col"
                                    :isCapitalizeFirstLetter="true"
                                    label="Surname"
                                    :isCheckForProfanity="true"
                                    @onValueChange="((value) => accountDepartmentDetail.surname = value)"
                                    :value="accountDepartmentDetail.surname"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>
                        </StackLayout>

                        <StackLayout
                                orientation="horizontal"
                                :gap="15"
                                :align="{horizontal: 'stretch'}">
                            <KendoEmailAddressInputComponent
                                    :id="setUniqueIdentifier('-accountDepartmentDetail.emailAddress')"
                                    :name="'accountDepartmentDetail.emailAddress'" class="col"
                                    :placeholder="'Type'"
                                    @onValueChange="((value) => accountDepartmentDetail.emailAddress = value)"
                                    :value="accountDepartmentDetail.emailAddress"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>

                            <KendoTelInputComponent
                                    :id="setUniqueIdentifier('-accountDepartmentDetail.contactNumber')"
                                    :name="'accountDepartmentDetail.contactNumber'"
                                    class="col"
                                    @onValueChange="((value) => accountDepartmentDetail.contactNumber = value)"
                                    :value="accountDepartmentDetail.contactNumber"
                                    label="Contact Number"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>

                            <KendoGenericInputComponent
                                    :id="setUniqueIdentifier('-accountDepartmentDetail.jobTitle')"
                                    :name="'accountDepartmentDetail.jobTitle'"
                                    :isRequired="false" class="col "
                                    :isCheckForProfanity="false"
                                    @onValueChange="((value) => accountDepartmentDetail.jobTitle = value)"
                                    :value="accountDepartmentDetail.jobTitle" label="Job Title"
                                    :isValueReactive="true"
                                    :isDataLoadedCompletely="!isInitializing"/>
                        </StackLayout>
                    </StackLayout>
                </StackLayout>
            </KendoAccordionItemComponent>

            <!-- AR Additional Information Section -->
            <KendoAccordionItemComponent
                    :title="'Additonal Information'"
                    id="additional-information-section"
                    :isActive="activePageSectionId === 'additional-information-section'"
                    @onToggle="onToggleAccordionAsync">
                <StackLayout
                        orientation="vertical"
                        :gap="20">
                    <KendoYesOrNoQuestionInputComponent
                            numberText="1"
                            :id="setUniqueIdentifier('-hasAnyInsurerEverDeclined')"
                            :questionText="$t('arDetailsPage-additional-hasAnyInsurerEverDeclined', { firmName })"
                            :value="additionalInformation?.hasAnyInsurerEverDeclined"
                            :isRequired="true"
                            :isValueReactive="true"
                            :isDataLoadedCompletely="!isInitializing"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'hasAnyInsurerEverDeclined')"/>

                    <StackLayout
                            v-if="additionalInformation?.hasAnyInsurerEverDeclined ?? false"
                            orientation="vertical"
                            class="with-vertical-gap"
                            :align="{ horizontal: 'stretch' }">
                        <KendoTextAreaInputComponent
                                :id="setUniqueIdentifier('-additionalInformation.declinedInfo')"
                                name="additionalInformation.declinedInfo"
                                class="flex-grow-1 mb-15px"
                                label="Additional Information"
                                :corner-radius="8"
                                :placeholder="inputType"
                                @onValueChange="((value: string) => additionalInformation.declinedInfo  = value)"
                                :value="additionalInformation?.declinedInfo"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoUploadInputComponent
                                label="Supporting documents"
                                optionalText="(Optional) (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size)"
                                stretched
                                multiple
                                dropzone
                                buttonText="Upload file"
                                :isRequired="false"
                                :allowed-extensions="['.pdf', 'doc', 'docx']"
                                @onFinishedUpload="(url: string) =>additionalInformation.declinedSupportingDocumentsUrls.push(url)"
                        />

                    </StackLayout>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="2"
                            :id="setUniqueIdentifier('-hasBeenRemovedOrRefused')"
                            :questionText="$t('arDetailsPage-additional-hasBeenRemovedOrRefused', { firmName })"
                            :value="additionalInformation?.hasBeenRemovedOrRefused"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'hasBeenRemovedOrRefused')"/>

                    <RemoveRefuseProvider
                            v-if="additionalInformation?.hasBeenRemovedOrRefused ?? false"
                            :items="additionalInformation.hasBeenRemovedOrRefusedItems"
                            :refuseStatuses="getRefuseStatuses"
                            :placeholder="inputType"/>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="3"
                            :id="setUniqueIdentifier('-hasPreviouslyBeenAnAR')"
                            :questionText="$t('arDetailsPage-additional-hasPreviouslyBeenAnAR', { firmName })"
                            :value="additionalInformation?.hasPreviouslyBeenAnAR"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'hasPreviouslyBeenAnAR')"/>

                    <PrincipalFirmFinderTermination
                            v-if="additionalInformation?.hasPreviouslyBeenAnAR ?? false"
                            :items="additionalInformation.hasPreviouslyBeenAnARItems"
                    />

                    <div class="k-form-field">
                        <div class="d-flex align-items-center kendo-yes-no-button">
                            <div class="col-lg-9 d-flex" style="gap: 15px;">
                                <div class="number-text-circle"><label class="k-label number-text">4</label></div>

                                <label class="question-text">{{
                                        $t("arDetailsPage-additional-primaryMarketCovered", {firmName})
                                    }}</label>
                            </div>

                            <div class="col-lg-3">
                                <KendoMultiSelectCheckboxComponentAsync
                                        :id="setUniqueIdentifier('-arDetailsPage-additional-primaryMarketCovered')"
                                        :name="'Primary Market'"
                                        :items="getPrimaryMarketCovered"
                                        :value="additionalInformation?.primaryMarketCovered"
                                        @onValueChange="(value: array) => updatePrimaryMarketCovered(value)"
                                        :isRequired="true"
                                        :isValueReactive="true"
                                        :isDataLoadedCompletely="isInitializing"
                                        value-primitive
                                />
                            </div>
                        </div>
                    </div>

                    <div class="k-form-field">
                        <div class="d-flex align-items-center kendo-yes-no-button">
                            <div class="col-lg-9 d-flex" style="gap: 15px;">
                                <div class="number-text-circle"><label class="k-label number-text">5</label></div>

                                <label class="question-text">{{
                                        $t("arDetailsPage-additional-permittedToUndertakeRegulatedActivities", {firmName})
                                    }}</label>
                            </div>

                            <div class="col-lg-3">
                                <KendoDropdownListComponent
                                        :id="setUniqueIdentifier('additionalInformation.regulatedActivities')"
                                        :name="additionalInformation.regulatedActivities"
                                        :data-items="regulatedActivities"
                                        :is-required="false"
                                        v-model="additionalInformation.permittedToUndertakeRegulatedActivities"
                                        value-primitive
                                        placeholder="Please Select"
                                        :isValueReactive="true"
                                        :isDataLoadedCompletely="!isInitializing"
                                />
                            </div>
                        </div>
                    </div>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="6"
                            :id="setUniqueIdentifier('-contractedToPortfolioManagement')"
                            :questionText="$t('arDetailsPage-additional-contractedToPortfolioManagement', { firmName })"
                            :value="additionalInformation?.contractedToPortfolioManagement"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'contractedToPortfolioManagement')"/>

                    <StackLayout
                            v-if="additionalInformation?.contractedToPortfolioManagement ?? false"
                            orientation="vertical"
                            class="with-vertical-gap"
                            :align="{ horizontal: 'stretch' }">
                        <KendoTextAreaInputComponent
                                :id="setUniqueIdentifier('additionalInformation.portfolioManagementInfo')"
                                name="additionalInformation.portfolioManagementInfo"
                                class="flex-grow-1 mb-15px"
                                label="Additional Information"
                                :corner-radius="8"
                                :placeholder="inputType"
                                @onValueChange="((value: string) => additionalInformation.portfolioManagementInfo  = value)"
                                :value="additionalInformation.portfolioManagementInfo"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoUploadInputComponent
                                label="Supporting documents"
                                optionalText="(Optional) (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size)"
                                stretched
                                multiple
                                dropzone
                                buttonText="Upload file"
                                :isRequired="false"
                                :allowed-extensions="['.pdf', 'doc', 'docx']"
                                @onFinishedUpload="(url: string) =>additionalInformation.portfolioManagementSupportingDocumentsUrls.push(url)"
                        />

                    </StackLayout>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="7"
                            :id="setUniqueIdentifier('-willBeTiedAgent')"
                            :questionText="$t('arDetailsPage-additional-willBeTiedAgent', { firmName })"
                            :value="additionalInformation?.willBeTiedAgent"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'willBeTiedAgent')"/>

                    <StackLayout
                            v-if="additionalInformation?.willBeTiedAgent ?? false"
                            orientation="vertical"
                            class="with-vertical-gap"
                            :align="{ horizontal: 'stretch' }">
                        <KendoTextAreaInputComponent
                                :id="setUniqueIdentifier('-additionalInformation.willBeTiedAgentInfo')"
                                name="additionalInformation.willBeTiedAgentInfo"
                                class="flex-grow-1 mb-15px"
                                label="Additional Information"
                                :corner-radius="8"
                                :placeholder="inputType"
                                @onValueChange="((value: string) => additionalInformation.willBeTiedAgentInfo  = value)"
                                :value="additionalInformation?.willBeTiedAgentInfo"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoUploadInputComponent
                                label="Supporting documents"
                                optionalText="(Optional) (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size)"
                                stretched
                                multiple
                                dropzone
                                buttonText="Upload file"
                                :isRequired="false"
                                :allowed-extensions="['.pdf', 'doc', 'docx']"
                                @onFinishedUpload="(url: string) =>additionalInformation.willBeTiedAgentSupportingDocumentsUrls.push(url)"
                        />
                    </StackLayout>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="8"
                            :id="setUniqueIdentifier('-provideAnyRegulatedServices')"
                            :questionText="$t('arDetailsPage-additional-provideAnyRegulatedServices', { firmName })"
                            :value="additionalInformation?.provideAnyRegulatedServices"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'provideAnyRegulatedServices')"/>

                    <StackLayout
                            v-if="additionalInformation?.provideAnyRegulatedServices ?? false"
                            orientation="vertical"
                            class="with-vertical-gap"
                            :align="{ horizontal: 'stretch' }">
                        <KendoTextAreaInputComponent
                                :id="setUniqueIdentifier('-additionalInformation.provideAnyRegulatedServicesInfo')"
                                name="additionalInformation.provideAnyRegulatedServicesInfo"
                                class="flex-grow-1 mb-15px"
                                label="Additional Information"
                                :corner-radius="8"
                                :placeholder="inputType"
                                @onValueChange="((value: string) => additionalInformation.provideAnyRegulatedServicesInfo  = value)"
                                :value="additionalInformation?.provideAnyRegulatedServicesInfo"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoUploadInputComponent
                                label="Supporting documents"
                                optionalText="(Optional) (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size)"
                                stretched
                                multiple
                                dropzone
                                buttonText="Upload file"
                                :isRequired="false"
                                :allowed-extensions="['.pdf', 'doc', 'docx']"
                                @onFinishedUpload="(url: string) =>additionalInformation.provideAnyRegulatedServicesSupportingDocumentsUrls.push(url)"
                        />
                    </StackLayout>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="9"
                            :id="setUniqueIdentifier('-conductAnyNonRegulatedActivities')"
                            :questionText="$t('arDetailsPage-additional-conductAnyNonRegulatedActivities', { firmName })"
                            :value="additionalInformation?.conductAnyNonRegulatedActivities"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'conductAnyNonRegulatedActivities')"/>

                    <StackLayout
                            v-if="additionalInformation?.conductAnyNonRegulatedActivities ?? false"
                            orientation="vertical"
                            class="with-vertical-gap"
                            :align="{ horizontal: 'stretch' }">
                        <KendoTextAreaInputComponent
                                :id="setUniqueIdentifier('-additionalInformation.conductAnyNonRegulatedActivitiesInfo')"
                                name="additionalInformation.conductAnyNonRegulatedActivitiesInfo"
                                class="flex-grow-1 mb-15px"
                                label="Additional Information"
                                :corner-radius="8"
                                :placeholder="inputType"
                                @onValueChange="((value: string) => additionalInformation.conductAnyNonRegulatedActivitiesInfo  = value)"
                                :value="additionalInformation?.conductAnyNonRegulatedActivitiesInfo"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoUploadInputComponent
                                label="Supporting documents"
                                optionalText="(Optional) (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size)"
                                stretched
                                multiple
                                dropzone
                                buttonText="Upload file"
                                :isRequired="false"
                                :allowed-extensions="['.pdf', 'doc', 'docx']"
                                @onFinishedUpload="(url: string) =>additionalInformation.conductAnyNonRegulatedActivitiesSupportingDocumentsUrls.push(url)"
                        />
                    </StackLayout>

                    <KendoYesOrNoQuestionInputComponent
                            numberText="10"
                            :id="setUniqueIdentifier('-includeAnyNonRegulatedFinancialServices')"
                            :questionText="$t('arDetailsPage-additional-includeAnyNonRegulatedFinancialServices', { firmName })"
                            :value="additionalInformation?.includeAnyNonRegulatedFinancialServices"
                            :isRequired="true"
                            @onValueChange="(selected) => toggleAdditionalInformation(selected, 'includeAnyNonRegulatedFinancialServices')"/>

                    <StackLayout
                            v-if="additionalInformation?.includeAnyNonRegulatedFinancialServices ?? false"
                            orientation="vertical"
                            class="with-vertical-gap"
                            :align="{ horizontal: 'stretch' }">
                        <KendoTextAreaInputComponent
                                :id="setUniqueIdentifier('-additionalInformation.nonRegulatedFinancialServicesInfo')"
                                name="additionalInformation.nonRegulatedFinancialServicesInfo"
                                class="flex-grow-1 mb-15px"
                                label="Additional Information"
                                :corner-radius="8"
                                :placeholder="inputType"
                                @onValueChange="((value: string) => additionalInformation.nonRegulatedFinancialServicesInfo  = value)"
                                :value="additionalInformation?.nonRegulatedFinancialServicesInfo"
                                :isValueReactive="true"
                                :isDataLoadedCompletely="!isInitializing"/>

                        <KendoUploadInputComponent
                                label="Supporting documents"
                                optionalText="(Optional) (Accepted file types: pdf, jpg, doc, Maximum 25 MB file size)"
                                stretched
                                multiple
                                dropzone
                                buttonText="Upload file"
                                :isRequired="false"
                                :allowed-extensions="['.pdf', 'doc', 'docx']"
                                @onFinishedUpload="(url: string) =>additionalInformation.nonRegulatedFinancialServicesSupportingDocumentsUrls.push(url)"
                        />

                        <p class="mt-4">Please specify all activities undertaken or to be undertaken by {{ firmName }}
                            and its associated income. (Where pre-populated below, please ensure that you add any
                            details or entries that are missing, and/or correct any that are inaccurate).</p>

                        <ProductAndServices
                                v-model="additionalInformation.nonRegulatedFinancialServicesItems"
                        ></ProductAndServices>
                    </StackLayout>
                </StackLayout>
            </KendoAccordionItemComponent>
        </StackLayout>
    </FormElement>
</Form>

